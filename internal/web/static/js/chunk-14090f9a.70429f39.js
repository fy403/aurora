(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14090f9a"],{"083a":function(t,e,n){"use strict";var i=n("0d51"),r=TypeError;t.exports=function(t,e){if(!delete t[e])throw r("Cannot delete property "+i(e)+" of "+i(t))}},"1f9d":function(t,e,n){"use strict";var i=n("2b0e"),r=n("56b3");class o{constructor(){}lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,n){let i=[];return this.decompose(0,t,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(e,this.length,i,1),l.from(i,this.length-(e-t)+n.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){let n=[];return this.decompose(t,e,n,0),l.from(n,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),n=this.length-this.scanIdentical(t,-1),i=new u(this),r=new u(t);for(let o=e,s=e;;){if(i.next(o),r.next(o),o=0,i.lineBreak!=r.lineBreak||i.done!=r.done||i.value!=r.value)return!1;if(s+=i.value.length,i.done||s>=n)return!0}}iter(t=1){return new u(this,t)}iterRange(t,e=this.length){return new f(this,t,e)}iterLines(t,e){let n;if(null==t)n=this.iter();else{null==e&&(e=this.lines+1);let i=this.line(t).from;n=this.iterRange(i,Math.max(i,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new d(n)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}static of(t){if(0==t.length)throw new RangeError("A document must have at least one line");return 1!=t.length||t[0]?t.length<=32?new s(t):l.from(s.split(t,[])):o.empty}}class s extends o{constructor(t,e=a(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,n,i){for(let r=0;;r++){let o=this.text[r],s=i+o.length;if((e?n:s)>=t)return new p(i,s,n,o);i=s+1,n++}}decompose(t,e,n,i){let r=t<=0&&e>=this.length?this:new s(c(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(1&i){let t=n.pop(),e=h(r.text,t.text.slice(),0,r.length);if(e.length<=32)n.push(new s(e,t.length+r.length));else{let t=e.length>>1;n.push(new s(e.slice(0,t)),new s(e.slice(t)))}}else n.push(r)}replace(t,e,n){if(!(n instanceof s))return super.replace(t,e,n);let i=h(this.text,h(n.text,c(this.text,0,t)),e),r=this.length+n.length-(e-t);return i.length<=32?new s(i,r):l.from(s.split(i,[]),r)}sliceString(t,e=this.length,n="\n"){let i="";for(let r=0,o=0;r<=e&&o<this.text.length;o++){let s=this.text[o],l=r+s.length;r>t&&o&&(i+=n),t<l&&e>r&&(i+=s.slice(Math.max(0,t-r),e-r)),r=l+1}return i}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let n=[],i=-1;for(let r of t)n.push(r),i+=r.length+1,32==n.length&&(e.push(new s(n,i)),n=[],i=-1);return i>-1&&e.push(new s(n,i)),e}}class l extends o{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let n of t)this.lines+=n.lines}lineInner(t,e,n,i){for(let r=0;;r++){let o=this.children[r],s=i+o.length,l=n+o.lines-1;if((e?l:s)>=t)return o.lineInner(t,e,n,i);i=s+1,n=l+1}}decompose(t,e,n,i){for(let r=0,o=0;o<=e&&r<this.children.length;r++){let s=this.children[r],l=o+s.length;if(t<=l&&e>=o){let r=i&((o<=t?1:0)|(l>=e?2:0));o>=t&&l<=e&&!r?n.push(s):s.decompose(t-o,e-o,n,r)}o=l+1}}replace(t,e,n){if(n.lines<this.lines)for(let i=0,r=0;i<this.children.length;i++){let o=this.children[i],s=r+o.length;if(t>=r&&e<=s){let a=o.replace(t-r,e-r,n),h=this.lines-o.lines+a.lines;if(a.lines<h>>4&&a.lines>h>>6){let r=this.children.slice();return r[i]=a,new l(r,this.length-(e-t)+n.length)}return super.replace(r,s,a)}r=s+1}return super.replace(t,e,n)}sliceString(t,e=this.length,n="\n"){let i="";for(let r=0,o=0;r<this.children.length&&o<=e;r++){let s=this.children[r],l=o+s.length;o>t&&r&&(i+=n),t<l&&e>o&&(i+=s.sliceString(t-o,e-o,n)),o=l+1}return i}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof l))return 0;let n=0,[i,r,o,s]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;i+=e,r+=e){if(i==o||r==s)return n;let l=this.children[i],a=t.children[r];if(l!=a)return n+l.scanIdentical(a,e);n+=l.length+1}}static from(t,e=t.reduce((t,e)=>t+e.length+1,-1)){let n=0;for(let s of t)n+=s.lines;if(n<32){let n=[];for(let e of t)e.flatten(n);return new s(n,e)}let i=Math.max(32,n>>5),r=i<<1,o=i>>1,a=[],h=0,c=-1,u=[];function f(t){let e;if(t.lines>r&&t instanceof l)for(let n of t.children)f(n);else t.lines>o&&(h>o||!h)?(d(),a.push(t)):t instanceof s&&h&&(e=u[u.length-1])instanceof s&&t.lines+e.lines<=32?(h+=t.lines,c+=t.length+1,u[u.length-1]=new s(e.text.concat(t.text),e.length+1+t.length)):(h+t.lines>i&&d(),h+=t.lines,c+=t.length+1,u.push(t))}function d(){0!=h&&(a.push(1==u.length?u[0]:l.from(u,c)),c=-1,h=u.length=0)}for(let s of t)f(s);return d(),1==a.length?a[0]:new l(a,e)}}function a(t){let e=-1;for(let n of t)e+=n.length+1;return e}function h(t,e,n=0,i=1e9){for(let r=0,o=0,s=!0;o<t.length&&r<=i;o++){let l=t[o],a=r+l.length;a>=n&&(a>i&&(l=l.slice(0,i-r)),r<n&&(l=l.slice(n-r)),s?(e[e.length-1]+=l,s=!1):e.push(l)),r=a+1}return e}function c(t,e,n){return h(t,[""],e,n)}o.empty=new s([""],0);class u{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof s?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],r=this.offsets[n],o=r>>1,l=i instanceof s?i.text.length:i.children.length;if(o==(e>0?l:0)){if(0==n)return this.done=!0,this.value="",this;e>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&r)==(e>0?0:1)){if(this.offsets[n]+=e,0==t)return this.lineBreak=!0,this.value="\n",this;t--}else if(i instanceof s){let r=i.text[o+(e<0?-1:0)];if(this.offsets[n]+=e,r.length>Math.max(0,t))return this.value=0==t?r:e>0?r.slice(t):r.slice(0,r.length-t),this;t-=r.length}else{let r=i.children[o+(e<0?-1:0)];t>r.length?(t-=r.length,this.offsets[n]+=e):(e<0&&this.offsets[n]--,this.nodes.push(r),this.offsets.push(e>0?1:(r instanceof s?r.text.length:r.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class f{constructor(t,e,n){this.value="",this.done=!1,this.cursor=new u(t,e>n?-1:1),this.pos=e>n?t.length:0,this.from=Math.min(e,n),this.to=Math.max(e,n)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let n=e<0?this.pos-this.from:this.to-this.pos;t>n&&(t=n),n-=t;let{value:i}=this.cursor.next(t);return this.pos+=(i.length+t)*e,this.value=i.length<=n?i:e<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class d{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:n,value:i}=this.inner.next(t);return e?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(o.prototype[Symbol.iterator]=function(){return this.iter()},u.prototype[Symbol.iterator]=f.prototype[Symbol.iterator]=d.prototype[Symbol.iterator]=function(){return this});class p{constructor(t,e,n,i){this.from=t,this.to=e,this.number=n,this.text=i}get length(){return this.to-this.from}}let g="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let Yl=1;Yl<g.length;Yl++)g[Yl]+=g[Yl-1];function m(t){for(let e=1;e<g.length;e+=2)if(g[e]>t)return g[e-1]<=t;return!1}function v(t){return t>=127462&&t<=127487}const y=8205;function b(t,e,n=!0,i=!0){return(n?w:x)(t,e,i)}function w(t,e,n){if(e==t.length)return e;e&&S(t.charCodeAt(e))&&k(t.charCodeAt(e-1))&&e--;let i=C(t,e);e+=M(i);while(e<t.length){let r=C(t,e);if(i==y||r==y||n&&m(r))e+=M(r),i=r;else{if(!v(r))break;{let n=0,i=e-2;while(i>=0&&v(C(t,i)))n++,i-=2;if(n%2==0)break;e+=2}}}return e}function x(t,e,n){while(e>0){let i=w(t,e-2,n);if(i<e)return i;e--}return 0}function S(t){return t>=56320&&t<57344}function k(t){return t>=55296&&t<56320}function C(t,e){let n=t.charCodeAt(e);if(!k(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return S(i)?i-56320+(n-55296<<10)+65536:n}function M(t){return t<65536?1:2}const A=/\r\n?|\n/;var T=function(t){return t[t["Simple"]=0]="Simple",t[t["TrackDel"]=1]="TrackDel",t[t["TrackBefore"]=2]="TrackBefore",t[t["TrackAfter"]=3]="TrackAfter",t}(T||(T={}));class O{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e+1];t+=n<0?this.sections[e]:n}return t}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(t){for(let e=0,n=0,i=0;e<this.sections.length;){let r=this.sections[e++],o=this.sections[e++];o<0?(t(n,i,r),i+=r):i+=o,n+=r}}iterChangedRanges(t,e=!1){N(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let n=this.sections[e++],i=this.sections[e++];i<0?t.push(n,i):t.push(i,n)}return new O(t)}composeDesc(t){return this.empty?t:t.empty?this:I(this,t)}mapDesc(t,e=!1){return t.empty?this:P(this,t,e)}mapPos(t,e=-1,n=T.Simple){let i=0,r=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],l=this.sections[o++],a=i+s;if(l<0){if(a>t)return r+(t-i);r+=s}else{if(n!=T.Simple&&a>=t&&(n==T.TrackDel&&i<t&&a>t||n==T.TrackBefore&&i<t||n==T.TrackAfter&&a>t))return null;if(a>t||a==t&&e<0&&!s)return t==i||e<0?r:r+l;r+=l}i=a}if(t>i)throw new RangeError(`Position ${t} is out of range for changeset of length ${i}`);return r}touchesRange(t,e=t){for(let n=0,i=0;n<this.sections.length&&i<=e;){let r=this.sections[n++],o=this.sections[n++],s=i+r;if(o>=0&&i<=e&&s>=t)return!(i<t&&s>e)||"cover";i=s}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let n=this.sections[e++],i=this.sections[e++];t+=(t?" ":"")+n+(i>=0?":"+i:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(t=>"number"!=typeof t))throw new RangeError("Invalid JSON representation of ChangeDesc");return new O(t)}static create(t){return new O(t)}}class D extends O{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return N(this,(e,n,i,r,o)=>t=t.replace(i,i+(n-e),o),!1),t}mapDesc(t,e=!1){return P(this,t,e,!0)}invert(t){let e=this.sections.slice(),n=[];for(let i=0,r=0;i<e.length;i+=2){let s=e[i],l=e[i+1];if(l>=0){e[i]=l,e[i+1]=s;let a=i>>1;while(n.length<a)n.push(o.empty);n.push(s?t.slice(r,r+s):o.empty)}r+=s}return new D(e,n)}compose(t){return this.empty?t:t.empty?this:I(this,t,!0)}map(t,e=!1){return t.empty?this:P(this,t,e,!0)}iterChanges(t,e=!1){N(this,t,e)}get desc(){return O.create(this.sections)}filter(t){let e=[],n=[],i=[],r=new R(this);t:for(let o=0,s=0;;){let l=o==t.length?1e9:t[o++];while(s<l||s==l&&0==r.len){if(r.done)break t;let t=Math.min(r.len,l-s);L(i,t,-1);let o=-1==r.ins?-1:0==r.off?r.ins:0;L(e,t,o),o>0&&E(n,e,r.text),r.forward(t),s+=t}let a=t[o++];while(s<a){if(r.done)break t;let t=Math.min(r.len,a-s);L(e,t,-1),L(i,t,-1==r.ins?-1:0==r.off?r.ins:0),r.forward(t),s+=t}}return{changes:new D(e,n),filtered:O.create(i)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e],i=this.sections[e+1];i<0?t.push(n):0==i?t.push([n]):t.push([n].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,n){let i=[],r=[],s=0,l=null;function a(t=!1){if(!t&&!i.length)return;s<e&&L(i,e-s,-1);let n=new D(i,r);l=l?l.compose(n.map(l)):n,i=[],r=[],s=0}function h(t){if(Array.isArray(t))for(let e of t)h(e);else if(t instanceof D){if(t.length!=e)throw new RangeError(`Mismatched change set length (got ${t.length}, expected ${e})`);a(),l=l?l.compose(t.map(l)):t}else{let{from:l,to:h=l,insert:c}=t;if(l>h||l<0||h>e)throw new RangeError(`Invalid change range ${l} to ${h} (in doc of length ${e})`);let u=c?"string"==typeof c?o.of(c.split(n||A)):c:o.empty,f=u.length;if(l==h&&0==f)return;l<s&&a(),l>s&&L(i,l-s,-1),L(i,h-l,f),E(r,i,u),s=h}}return h(t),a(!l),l}static empty(t){return new D(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],n=[];for(let i=0;i<t.length;i++){let r=t[i];if("number"==typeof r)e.push(r,-1);else{if(!Array.isArray(r)||"number"!=typeof r[0]||r.some((t,e)=>e&&"string"!=typeof t))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==r.length)e.push(r[0],0);else{while(n.length<i)n.push(o.empty);n[i]=o.of(r.slice(1)),e.push(r[0],n[i].length)}}}return new D(e,n)}static createSet(t,e){return new D(t,e)}}function L(t,e,n,i=!1){if(0==e&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:0==e&&0==t[r]?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function E(t,e,n){if(0==n.length)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{while(t.length<i)t.push(o.empty);t.push(n)}}function N(t,e,n){let i=t.inserted;for(let r=0,s=0,l=0;l<t.sections.length;){let a=t.sections[l++],h=t.sections[l++];if(h<0)r+=a,s+=a;else{let c=r,u=s,f=o.empty;for(;;){if(c+=a,u+=h,h&&i&&(f=f.append(i[l-2>>1])),n||l==t.sections.length||t.sections[l+1]<0)break;a=t.sections[l++],h=t.sections[l++]}e(r,c,s,u,f),r=c,s=u}}}function P(t,e,n,i=!1){let r=[],o=i?[]:null,s=new R(t),l=new R(e);for(let a=-1;;)if(-1==s.ins&&-1==l.ins){let t=Math.min(s.len,l.len);L(r,t,-1),s.forward(t),l.forward(t)}else if(l.ins>=0&&(s.ins<0||a==s.i||0==s.off&&(l.len<s.len||l.len==s.len&&!n))){let t=l.len;L(r,l.ins,-1);while(t){let e=Math.min(s.len,t);s.ins>=0&&a<s.i&&s.len<=e&&(L(r,0,s.ins),o&&E(o,r,s.text),a=s.i),s.forward(e),t-=e}l.next()}else{if(!(s.ins>=0)){if(s.done&&l.done)return o?D.createSet(r,o):O.create(r);throw new Error("Mismatched change set lengths")}{let t=0,e=s.len;while(e)if(-1==l.ins){let n=Math.min(e,l.len);t+=n,e-=n,l.forward(n)}else{if(!(0==l.ins&&l.len<e))break;e-=l.len,l.next()}L(r,t,a<s.i?s.ins:0),o&&a<s.i&&E(o,r,s.text),a=s.i,s.forward(s.len-e)}}}function I(t,e,n=!1){let i=[],r=n?[]:null,o=new R(t),s=new R(e);for(let l=!1;;){if(o.done&&s.done)return r?D.createSet(i,r):O.create(i);if(0==o.ins)L(i,o.len,0,l),o.next();else if(0!=s.len||s.done){if(o.done||s.done)throw new Error("Mismatched change set lengths");{let t=Math.min(o.len2,s.len),e=i.length;if(-1==o.ins){let e=-1==s.ins?-1:s.off?0:s.ins;L(i,t,e,l),r&&e&&E(r,i,s.text)}else-1==s.ins?(L(i,o.off?0:o.len,t,l),r&&E(r,i,o.textBit(t))):(L(i,o.off?0:o.len,s.off?0:s.ins,l),r&&!s.off&&E(r,i,s.text));l=(o.ins>t||s.ins>=0&&s.len>t)&&(l||i.length>e),o.forward2(t),s.forward(t)}}else L(i,0,s.ins,l),r&&E(r,i,s.text),s.next()}}class R{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?o.empty:t[e]}textBit(t){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length&&!t?o.empty:e[n].slice(this.off,null==t?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){-1==this.ins?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class B{constructor(t,e,n){this.from=t,this.to=e,this.flags=n}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let t=3&this.flags;return 3==t?null:t}get goalColumn(){let t=this.flags>>5;return 33554431==t?void 0:t}map(t,e=-1){let n,i;return this.empty?n=i=t.mapPos(this.from,e):(n=t.mapPos(this.from,1),i=t.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new B(n,i,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return W.range(t,e);let n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return W.range(this.anchor,n)}eq(t){return this.anchor==t.anchor&&this.head==t.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||"number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid JSON representation for SelectionRange");return W.range(t.anchor,t.head)}static create(t,e,n){return new B(t,e,n)}}class W{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:W.create(this.ranges.map(n=>n.map(t,e)),this.mainIndex)}eq(t){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let e=0;e<this.ranges.length;e++)if(!this.ranges[e].eq(t.ranges[e]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new W([this.main],0)}addRange(t,e=!0){return W.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let n=this.ranges.slice();return n[e]=t,W.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||"number"!=typeof t.main||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new W(t.ranges.map(t=>B.fromJSON(t)),t.main)}static single(t,e=t){return new W([W.range(t,e)],0)}static create(t,e=0){if(0==t.length)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<t.length;i++){let r=t[i];if(r.empty?r.from<=n:r.from<n)return W.normalized(t.slice(),e);n=r.to}return new W(t,e)}static cursor(t,e=0,n,i){return B.create(t,t,(0==e?0:e<0?4:8)|(null==n?3:Math.min(2,n))|(null!==i&&void 0!==i?i:33554431)<<5)}static range(t,e,n,i){let r=(null!==n&&void 0!==n?n:33554431)<<5|(null==i?3:Math.min(2,i));return e<t?B.create(e,t,24|r):B.create(t,e,(e>t?4:0)|r)}static normalized(t,e=0){let n=t[e];t.sort((t,e)=>t.from-e.from),e=t.indexOf(n);for(let i=1;i<t.length;i++){let n=t[i],r=t[i-1];if(n.empty?n.from<=r.to:n.from<r.to){let o=r.from,s=Math.max(n.to,r.to);i<=e&&e--,t.splice(--i,2,n.anchor>n.head?W.range(s,o):W.range(o,s))}}return new W(t,e)}}function F(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let H=0;class _{constructor(t,e,n,i,r){this.combine=t,this.compareInput=e,this.compare=n,this.isStatic=i,this.id=H++,this.default=t([]),this.extensions="function"==typeof r?r(this):r}static define(t={}){return new _(t.combine||(t=>t),t.compareInput||((t,e)=>t===e),t.compare||(t.combine?(t,e)=>t===e:z),!!t.static,t.enables)}of(t){return new V([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new V(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new V(t,this,2,e)}from(t,e){return e||(e=t=>t),this.compute([t],n=>e(n.field(t)))}}function z(t,e){return t==e||t.length==e.length&&t.every((t,n)=>t===e[n])}class V{constructor(t,e,n,i){this.dependencies=t,this.facet=e,this.type=n,this.value=i,this.id=H++}dynamicSlot(t){var e;let n=this.value,i=this.facet.compareInput,r=this.id,o=t[r]>>1,s=2==this.type,l=!1,a=!1,h=[];for(let c of this.dependencies)"doc"==c?l=!0:"selection"==c?a=!0:0==(1&(null!==(e=t[c.id])&&void 0!==e?e:1))&&h.push(t[c.id]);return{create(t){return t.values[o]=n(t),1},update(t,e){if(l&&e.docChanged||a&&(e.docChanged||e.selection)||U(t,h)){let e=n(t);if(s?!j(e,t.values[o],i):!i(e,t.values[o]))return t.values[o]=e,1}return 0},reconfigure:(t,e)=>{let l,a=e.config.address[r];if(null!=a){let r=it(e,a);if(this.dependencies.every(n=>n instanceof _?e.facet(n)===t.facet(n):!(n instanceof q)||e.field(n,!1)==t.field(n,!1))||(s?j(l=n(t),r,i):i(l=n(t),r)))return t.values[o]=r,0}else l=n(t);return t.values[o]=l,1}}}}function j(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function U(t,e){let n=!1;for(let i of e)1&nt(t,i)&&(n=!0);return n}function K(t,e,n){let i=n.map(e=>t[e.id]),r=n.map(t=>t.type),o=i.filter(t=>!(1&t)),s=t[e.id]>>1;function l(t){let n=[];for(let e=0;e<i.length;e++){let o=it(t,i[e]);if(2==r[e])for(let t of o)n.push(t);else n.push(o)}return e.combine(n)}return{create(t){for(let e of i)nt(t,e);return t.values[s]=l(t),1},update(t,n){if(!U(t,o))return 0;let i=l(t);return e.compare(i,t.values[s])?0:(t.values[s]=i,1)},reconfigure(t,r){let o=U(t,i),a=r.config.facets[e.id],h=r.facet(e);if(a&&!o&&z(n,a))return t.values[s]=h,0;let c=l(t);return e.compare(c,h)?(t.values[s]=h,0):(t.values[s]=c,1)}}}const G=_.define({static:!0});class q{constructor(t,e,n,i,r){this.id=t,this.createF=e,this.updateF=n,this.compareF=i,this.spec=r,this.provides=void 0}static define(t){let e=new q(H++,t.create,t.update,t.compare||((t,e)=>t===e),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(G).find(t=>t.field==this);return((null===e||void 0===e?void 0:e.create)||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:t=>(t.values[e]=this.create(t),1),update:(t,n)=>{let i=t.values[e],r=this.updateF(i,n);return this.compareF(i,r)?0:(t.values[e]=r,1)},reconfigure:(t,n)=>null!=n.config.address[this.id]?(t.values[e]=n.field(this),0):(t.values[e]=this.create(t),1)}}init(t){return[this,G.of({field:this,create:t})]}get extension(){return this}}const $={lowest:4,low:3,default:2,high:1,highest:0};function X(t){return e=>new J(e,t)}const Y={highest:X($.highest),high:X($.high),default:X($.default),low:X($.low),lowest:X($.lowest)};class J{constructor(t,e){this.inner=t,this.prec=e}}class Z{of(t){return new Q(this,t)}reconfigure(t){return Z.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class Q{constructor(t,e){this.compartment=t,this.inner=e}}class tt{constructor(t,e,n,i,r,o){this.base=t,this.compartments=e,this.dynamicSlots=n,this.address=i,this.staticValues=r,this.facets=o,this.statusTemplate=[];while(this.statusTemplate.length<n.length)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return null==e?t.default:this.staticValues[e>>1]}static resolve(t,e,n){let i=[],r=Object.create(null),o=new Map;for(let u of et(t,e,o))u instanceof q?i.push(u):(r[u.facet.id]||(r[u.facet.id]=[])).push(u);let s=Object.create(null),l=[],a=[];for(let u of i)s[u.id]=a.length<<1,a.push(t=>u.slot(t));let h=null===n||void 0===n?void 0:n.config.facets;for(let u in r){let t=r[u],e=t[0].facet,i=h&&h[u]||[];if(t.every(t=>0==t.type))if(s[e.id]=l.length<<1|1,z(i,t))l.push(n.facet(e));else{let i=e.combine(t.map(t=>t.value));l.push(n&&e.compare(i,n.facet(e))?n.facet(e):i)}else{for(let e of t)0==e.type?(s[e.id]=l.length<<1|1,l.push(e.value)):(s[e.id]=a.length<<1,a.push(t=>e.dynamicSlot(t)));s[e.id]=a.length<<1,a.push(n=>K(n,e,t))}}let c=a.map(t=>t(s));return new tt(t,o,c,s,l,r)}}function et(t,e,n){let i=[[],[],[],[],[]],r=new Map;function o(t,s){let l=r.get(t);if(null!=l){if(l<=s)return;let e=i[l].indexOf(t);e>-1&&i[l].splice(e,1),t instanceof Q&&n.delete(t.compartment)}if(r.set(t,s),Array.isArray(t))for(let e of t)o(e,s);else if(t instanceof Q){if(n.has(t.compartment))throw new RangeError("Duplicate use of compartment in extensions");let i=e.get(t.compartment)||t.inner;n.set(t.compartment,i),o(i,s)}else if(t instanceof J)o(t.inner,t.prec);else if(t instanceof q)i[s].push(t),t.provides&&o(t.provides,s);else if(t instanceof V)i[s].push(t),t.facet.extensions&&o(t.facet.extensions,$.default);else{let e=t.extension;if(!e)throw new Error(`Unrecognized extension value in extension set (${t}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(e,s)}}return o(t,$.default),i.reduce((t,e)=>t.concat(e))}function nt(t,e){if(1&e)return 2;let n=e>>1,i=t.status[n];if(4==i)throw new Error("Cyclic dependency between fields and/or facets");if(2&i)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function it(t,e){return 1&e?t.config.staticValues[e>>1]:t.values[e>>1]}const rt=_.define(),ot=_.define({combine:t=>t.some(t=>t),static:!0}),st=_.define({combine:t=>t.length?t[0]:void 0,static:!0}),lt=_.define(),at=_.define(),ht=_.define(),ct=_.define({combine:t=>!!t.length&&t[0]});class ut{constructor(t,e){this.type=t,this.value=e}static define(){return new ft}}class ft{of(t){return new ut(this,t)}}class dt{constructor(t){this.map=t}of(t){return new pt(this,t)}}class pt{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return void 0===e?void 0:e==this.value?this:new pt(this.type,e)}is(t){return this.type==t}static define(t={}){return new dt(t.map||(t=>t))}static mapEffects(t,e){if(!t.length)return t;let n=[];for(let i of t){let t=i.map(e);t&&n.push(t)}return n}}pt.reconfigure=pt.define(),pt.appendConfig=pt.define();class gt{constructor(t,e,n,i,r,o){this.startState=t,this.changes=e,this.selection=n,this.effects=i,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,n&&F(n,e.newLength),r.some(t=>t.type==gt.time)||(this.annotations=r.concat(gt.time.of(Date.now())))}static create(t,e,n,i,r,o){return new gt(t,e,n,i,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(gt.userEvent);return!(!e||!(e==t||e.length>t.length&&e.slice(0,t.length)==t&&"."==e[t.length]))}}function mt(t,e){let n=[];for(let i=0,r=0;;){let o,s;if(i<t.length&&(r==e.length||e[r]>=t[i]))o=t[i++],s=t[i++];else{if(!(r<e.length))return n;o=e[r++],s=e[r++]}!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function vt(t,e,n){var i;let r,o,s;return n?(r=e.changes,o=D.empty(e.changes.length),s=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),s=t.changes.compose(r)),{changes:s,selection:e.selection?e.selection.map(o):null===(i=t.selection)||void 0===i?void 0:i.map(r),effects:pt.mapEffects(t.effects,r).concat(pt.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function yt(t,e,n){let i=e.selection,r=kt(e.annotations);return e.userEvent&&(r=r.concat(gt.userEvent.of(e.userEvent))),{changes:e.changes instanceof D?e.changes:D.of(e.changes||[],n,t.facet(st)),selection:i&&(i instanceof W?i:W.single(i.anchor,i.head)),effects:kt(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function bt(t,e,n){let i=yt(t,e.length?e[0]:{},t.doc.length);e.length&&!1===e[0].filter&&(n=!1);for(let o=1;o<e.length;o++){!1===e[o].filter&&(n=!1);let r=!!e[o].sequential;i=vt(i,yt(t,e[o],r?i.changes.newLength:t.doc.length),r)}let r=gt.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return xt(n?wt(r):r)}function wt(t){let e=t.startState,n=!0;for(let r of e.facet(lt)){let e=r(t);if(!1===e){n=!1;break}Array.isArray(e)&&(n=!0===n?e:mt(n,e))}if(!0!==n){let i,r;if(!1===n)r=t.changes.invertedDesc,i=D.empty(e.doc.length);else{let e=t.changes.filter(n);i=e.changes,r=e.filtered.mapDesc(e.changes).invertedDesc}t=gt.create(e,i,t.selection&&t.selection.map(r),pt.mapEffects(t.effects,r),t.annotations,t.scrollIntoView)}let i=e.facet(at);for(let r=i.length-1;r>=0;r--){let n=i[r](t);t=n instanceof gt?n:Array.isArray(n)&&1==n.length&&n[0]instanceof gt?n[0]:bt(e,kt(n),!1)}return t}function xt(t){let e=t.startState,n=e.facet(ht),i=t;for(let r=n.length-1;r>=0;r--){let o=n[r](t);o&&Object.keys(o).length&&(i=vt(i,yt(e,o,t.changes.newLength),!0))}return i==t?t:gt.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}gt.time=ut.define(),gt.userEvent=ut.define(),gt.addToHistory=ut.define(),gt.remote=ut.define();const St=[];function kt(t){return null==t?St:Array.isArray(t)?t:[t]}var Ct=function(t){return t[t["Word"]=0]="Word",t[t["Space"]=1]="Space",t[t["Other"]=2]="Other",t}(Ct||(Ct={}));const Mt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let At;try{At=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(Xl){}function Tt(t){if(At)return At.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Mt.test(n)))return!0}return!1}function Ot(t){return e=>{if(!/\S/.test(e))return Ct.Space;if(Tt(e))return Ct.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Ct.Word;return Ct.Other}}class Dt{constructor(t,e,n,i,r,o){this.config=t,this.doc=e,this.selection=n,this.values=i,this.status=t.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let s=0;s<this.config.dynamicSlots.length;s++)nt(this,s<<1);this.computeSlot=null}field(t,e=!0){let n=this.config.address[t.id];if(null!=n)return nt(this,n),it(this,n);if(e)throw new RangeError("Field is not present in this state")}update(...t){return bt(this,t,!0)}applyTransaction(t){let e,n=this.config,{base:i,compartments:r}=n;for(let o of t.effects)o.is(Z.reconfigure)?(n&&(r=new Map,n.compartments.forEach((t,e)=>r.set(e,t)),n=null),r.set(o.value.compartment,o.value.extension)):o.is(pt.reconfigure)?(n=null,i=o.value):o.is(pt.appendConfig)&&(n=null,i=kt(i).concat(o.value));if(n)e=t.startState.values.slice();else{n=tt.resolve(i,r,this);let t=new Dt(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(t,e)=>e.reconfigure(t,this),null);e=t.values}new Dt(n,t.newDoc,t.newSelection,e,(e,n)=>n.update(e,t),t)}replaceSelection(t){return"string"==typeof t&&(t=this.toText(t)),this.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:t},range:W.cursor(e.from+t.length)}))}changeByRange(t){let e=this.selection,n=t(e.ranges[0]),i=this.changes(n.changes),r=[n.range],o=kt(n.effects);for(let s=1;s<e.ranges.length;s++){let n=t(e.ranges[s]),l=this.changes(n.changes),a=l.map(i);for(let t=0;t<s;t++)r[t]=r[t].map(a);let h=i.mapDesc(l,!0);r.push(n.range.map(h)),i=i.compose(a),o=pt.mapEffects(o,a).concat(pt.mapEffects(kt(n.effects),h))}return{changes:i,selection:W.create(r,e.mainIndex),effects:o}}changes(t=[]){return t instanceof D?t:D.of(t,this.doc.length,this.facet(Dt.lineSeparator))}toText(t){return o.of(t.split(this.facet(Dt.lineSeparator)||A))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return null==e?t.default:(nt(this,e),it(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let n in t){let i=t[n];i instanceof q&&null!=this.config.address[i.id]&&(e[n]=i.spec.toJSON(this.field(t[n]),this))}return e}static fromJSON(t,e={},n){if(!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n)for(let r in n)if(Object.prototype.hasOwnProperty.call(t,r)){let e=n[r],o=t[r];i.push(e.init(t=>e.spec.fromJSON(o,t)))}return Dt.create({doc:t.doc,selection:W.fromJSON(t.selection),extensions:e.extensions?i.concat([e.extensions]):i})}static create(t={}){let e=tt.resolve(t.extensions||[],new Map),n=t.doc instanceof o?t.doc:o.of((t.doc||"").split(e.staticFacet(Dt.lineSeparator)||A)),i=t.selection?t.selection instanceof W?t.selection:W.single(t.selection.anchor,t.selection.head):W.single(0);return F(i,n.length),e.staticFacet(ot)||(i=i.asSingle()),new Dt(e,n,i,e.dynamicSlots.map(()=>null),(t,e)=>e.create(t),null)}get tabSize(){return this.facet(Dt.tabSize)}get lineBreak(){return this.facet(Dt.lineSeparator)||"\n"}get readOnly(){return this.facet(ct)}phrase(t,...e){for(let n of this.facet(Dt.phrases))if(Object.prototype.hasOwnProperty.call(n,t)){t=n[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,(t,n)=>{if("$"==n)return"$";let i=+(n||1);return!i||i>e.length?t:e[i-1]})),t}languageDataAt(t,e,n=-1){let i=[];for(let r of this.facet(rt))for(let o of r(this,e,n))Object.prototype.hasOwnProperty.call(o,t)&&i.push(o[t]);return i}charCategorizer(t){return Ot(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:e,from:n,length:i}=this.doc.lineAt(t),r=this.charCategorizer(t),o=t-n,s=t-n;while(o>0){let t=b(e,o,!1);if(r(e.slice(t,o))!=Ct.Word)break;o=t}while(s<i){let t=b(e,s);if(r(e.slice(s,t))!=Ct.Word)break;s=t}return o==s?null:W.range(o+n,s+n)}}Dt.allowMultipleSelections=ot,Dt.tabSize=_.define({combine:t=>t.length?t[0]:4}),Dt.lineSeparator=st,Dt.readOnly=ct,Dt.phrases=_.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(n=>t[n]==e[n])}}),Dt.languageData=rt,Dt.changeFilter=lt,Dt.transactionFilter=at,Dt.transactionExtender=ht,Z.reconfigure=pt.define();class Lt{eq(t){return this==t}range(t,e=t){return Et.create(t,e,this)}}Lt.prototype.startSide=Lt.prototype.endSide=0,Lt.prototype.point=!1,Lt.prototype.mapMode=T.TrackDel;class Et{constructor(t,e,n){this.from=t,this.to=e,this.value=n}static create(t,e,n){return new Et(t,e,n)}}function Nt(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Pt{constructor(t,e,n,i){this.from=t,this.to=e,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(t,e,n,i=0){let r=n?this.to:this.from;for(let o=i,s=r.length;;){if(o==s)return o;let i=o+s>>1,l=r[i]-t||(n?this.value[i].endSide:this.value[i].startSide)-e;if(i==o)return l>=0?o:s;l>=0?s=i:o=i+1}}between(t,e,n,i){for(let r=this.findIndex(e,-1e9,!0),o=this.findIndex(n,1e9,!1,r);r<o;r++)if(!1===i(this.from[r]+t,this.to[r]+t,this.value[r]))return!1}map(t,e){let n=[],i=[],r=[],o=-1,s=-1;for(let l=0;l<this.value.length;l++){let a,h,c=this.value[l],u=this.from[l]+t,f=this.to[l]+t;if(u==f){let t=e.mapPos(u,c.startSide,c.mapMode);if(null==t)continue;if(a=h=t,c.startSide!=c.endSide&&(h=e.mapPos(u,c.endSide),h<a))continue}else if(a=e.mapPos(u,c.startSide),h=e.mapPos(f,c.endSide),a>h||a==h&&c.startSide>0&&c.endSide<=0)continue;(h-a||c.endSide-c.startSide)<0||(o<0&&(o=a),c.point&&(s=Math.max(s,h-a)),n.push(c),i.push(a-o),r.push(h-o))}return{mapped:n.length?new Pt(i,r,n,s):null,pos:o}}}class It{constructor(t,e,n,i){this.chunkPos=t,this.chunk=e,this.nextLayer=n,this.maxPoint=i}static create(t,e,n,i){return new It(t,e,n,i)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:n=!1,filterFrom:i=0,filterTo:r=this.length}=t,o=t.filter;if(0==e.length&&!o)return this;if(n&&(e=e.slice().sort(Nt)),this.isEmpty)return e.length?It.of(e):this;let s=new Ft(this,null,-1).goto(0),l=0,a=[],h=new Bt;while(s.value||l<e.length)if(l<e.length&&(s.from-e[l].from||s.startSide-e[l].value.startSide)>=0){let t=e[l++];h.addInner(t.from,t.to,t.value)||a.push(t)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(l==e.length||this.chunkEnd(s.chunkIndex)<e[l].from)&&(!o||i>this.chunkEnd(s.chunkIndex)||r<this.chunkPos[s.chunkIndex])&&h.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||i>s.to||r<s.from||o(s.from,s.to,s.value))&&(h.addInner(s.from,s.to,s.value)||a.push(Et.create(s.from,s.to,s.value))),s.next());return h.finishInner(this.nextLayer.isEmpty&&!a.length?It.empty:this.nextLayer.update({add:a,filter:o,filterFrom:i,filterTo:r}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],n=[],i=-1;for(let o=0;o<this.chunk.length;o++){let r=this.chunkPos[o],s=this.chunk[o],l=t.touchesRange(r,r+s.length);if(!1===l)i=Math.max(i,s.maxPoint),e.push(s),n.push(t.mapPos(r));else if(!0===l){let{mapped:o,pos:l}=s.map(r,t);o&&(i=Math.max(i,o.maxPoint),e.push(o),n.push(l))}}let r=this.nextLayer.map(t);return 0==e.length?r:new It(n,e,r||It.empty,i)}between(t,e,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let r=this.chunkPos[i],o=this.chunk[i];if(e>=r&&t<=r+o.length&&!1===o.between(r,t-r,e-r,n))return}this.nextLayer.between(t,e,n)}}iter(t=0){return Ht.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return Ht.from(t).goto(e)}static compare(t,e,n,i,r=-1){let o=t.filter(t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=r),s=e.filter(t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=r),l=Wt(o,s,n),a=new zt(o,l,r),h=new zt(s,l,r);n.iterGaps((t,e,n)=>Vt(a,t,h,e,n,i)),n.empty&&0==n.length&&Vt(a,0,h,0,0,i)}static eq(t,e,n=0,i){null==i&&(i=999999999);let r=t.filter(t=>!t.isEmpty&&e.indexOf(t)<0),o=e.filter(e=>!e.isEmpty&&t.indexOf(e)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let s=Wt(r,o),l=new zt(r,s,0).goto(n),a=new zt(o,s,0).goto(n);for(;;){if(l.to!=a.to||!jt(l.active,a.active)||l.point&&(!a.point||!l.point.eq(a.point)))return!1;if(l.to>i)return!0;l.next(),a.next()}}static spans(t,e,n,i,r=-1){let o=new zt(t,null,r).goto(e),s=e,l=o.openStart;for(;;){let t=Math.min(o.to,n);if(o.point){let n=o.activeForPoint(o.to),r=o.pointFrom<e?n.length+1:Math.min(n.length,l);i.point(s,t,o.point,n,r,o.pointRank),l=Math.min(o.openEnd(t),n.length)}else t>s&&(i.span(s,t,o.active,l),l=o.openEnd(t));if(o.to>n)return l+(o.point&&o.to>n?1:0);s=o.to,o.next()}}static of(t,e=!1){let n=new Bt;for(let i of t instanceof Et?[t]:e?Rt(t):t)n.add(i.from,i.to,i.value);return n.finish()}}function Rt(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(Nt(e,i)>0)return t.slice().sort(Nt);e=i}return t}It.empty=new It([],[],null,-1),It.empty.nextLayer=It.empty;class Bt{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(t){this.chunks.push(new Pt(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}add(t,e,n){this.addInner(t,e,n)||(this.nextLayer||(this.nextLayer=new Bt)).add(t,e,n)}addInner(t,e,n){let i=t-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(i<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=e,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let n=e.value.length-1;return this.last=e.value[n],this.lastFrom=e.from[n]+t,this.lastTo=e.to[n]+t,!0}finish(){return this.finishInner(It.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return t;let e=It.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function Wt(t,e,n){let i=new Map;for(let o of t)for(let t=0;t<o.chunk.length;t++)o.chunk[t].maxPoint<=0&&i.set(o.chunk[t],o.chunkPos[t]);let r=new Set;for(let o of e)for(let t=0;t<o.chunk.length;t++){let e=i.get(o.chunk[t]);null==e||(n?n.mapPos(e):e)!=o.chunkPos[t]||(null===n||void 0===n?void 0:n.touchesRange(e,e+o.chunk[t].length))||r.add(o.chunk[t])}return r}class Ft{constructor(t,e,n,i=0){this.layer=t,this.skip=e,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,n){while(this.chunkIndex<this.layer.chunk.length){let e=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(e)||this.layer.chunkEnd(this.chunkIndex)<t||e.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],n=t+e.from[this.rangeIndex];if(this.from=n,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)while(this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]))this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Ht{constructor(t){this.heap=t}static from(t,e=null,n=-1){let i=[];for(let r=0;r<t.length;r++)for(let o=t[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&i.push(new Ft(o,e,n,r));return 1==i.length?i[0]:new Ht(i)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let n of this.heap)n.goto(t,e);for(let n=this.heap.length>>1;n>=0;n--)_t(this.heap,n);return this.next(),this}forward(t,e){for(let n of this.heap)n.forward(t,e);for(let n=this.heap.length>>1;n>=0;n--)_t(this.heap,n);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),_t(this.heap,0)}}}function _t(t,e){for(let n=t[e];;){let i=1+(e<<1);if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class zt{constructor(t,e,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ht.from(t,e,n)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){while(this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){Ut(this.active,t),Ut(this.activeTo,t),Ut(this.activeRank,t),this.minActive=Gt(this.active,this.activeTo)}addActive(t){let e=0,{value:n,to:i,rank:r}=this.cursor;while(e<this.activeRank.length&&this.activeRank[e]<=r)e++;Kt(this.active,e,n),Kt(this.activeTo,e,i),Kt(this.activeRank,e,r),t&&Kt(t,e,this.cursor.from),this.minActive=Gt(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>t){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&Ut(n,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let t=this.cursor.value;if(t.point){if(!(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=t,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=t.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let e=n.length-1;e>=0&&n[e]<t;e--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let n=this.active.length-1;n>=0;n--){if(this.activeRank[n]<this.pointRank)break;(this.activeTo[n]>t||this.activeTo[n]==t&&this.active[n].endSide>=this.point.endSide)&&e.push(this.active[n])}return e.reverse()}openEnd(t){let e=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>t;n--)e++;return e}}function Vt(t,e,n,i,r,o){t.goto(e),n.goto(i);let s=i+r,l=i,a=i-e;for(;;){let e=t.to+a-n.to||t.endSide-n.endSide,i=e<0?t.to+a:n.to,r=Math.min(i,s);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&jt(t.activeForPoint(t.to+a),n.activeForPoint(n.to))||o.comparePoint(l,r,t.point,n.point):r>l&&!jt(t.active,n.active)&&o.compareRange(l,r,t.active,n.active),i>s)break;l=i,e<=0&&t.next(),e>=0&&n.next()}}function jt(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Ut(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Kt(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function Gt(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function qt(t,e,n=t.length){let i=0;for(let r=0;r<n;)9==t.charCodeAt(r)?(i+=e-i%e,r++):(i++,r=b(t,r));return i}function $t(t,e,n,i){for(let r=0,o=0;;){if(o>=e)return r;if(r==t.length)break;o+=9==t.charCodeAt(r)?n-o%n:1,r=b(t,r)}return!0===i?-1:t.length}const Xt="ͼ",Yt="undefined"==typeof Symbol?"__"+Xt:Symbol.for(Xt),Jt="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),Zt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Qt{constructor(t,e){this.rules=[];let{finish:n}=e||{};function i(t){return/^@/.test(t)?[t]:t.split(/,\s*/)}function r(t,e,o,s){let l=[],a=/^@(\w+)\b/.exec(t[0]),h=a&&"keyframes"==a[1];if(a&&null==e)return o.push(t[0]+";");for(let n in e){let s=e[n];if(/&/.test(n))r(n.split(/,\s*/).map(e=>t.map(t=>e.replace(/&/,t))).reduce((t,e)=>t.concat(e)),s,o);else if(s&&"object"==typeof s){if(!a)throw new RangeError("The value of a property ("+n+") should be a primitive value.");r(i(n),s,l,h)}else null!=s&&l.push(n.replace(/_.*/,"").replace(/[A-Z]/g,t=>"-"+t.toLowerCase())+": "+s+";")}(l.length||h)&&o.push((!n||a||s?t:t.map(n)).join(", ")+" {"+l.join(" ")+"}")}for(let o in t)r(i(o),t[o],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let t=Zt[Yt]||1;return Zt[Yt]=t+1,Xt+t.toString(36)}static mount(t,e){(t[Jt]||new ee(t)).mount(Array.isArray(e)?e:[e])}}let te=null;class ee{constructor(t){if(!t.head&&t.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(te)return t.adoptedStyleSheets=[te.sheet].concat(t.adoptedStyleSheets),t[Jt]=te;this.sheet=new CSSStyleSheet,t.adoptedStyleSheets=[this.sheet].concat(t.adoptedStyleSheets),te=this}else{this.styleTag=(t.ownerDocument||t).createElement("style");let e=t.head||t;e.insertBefore(this.styleTag,e.firstChild)}this.modules=[],t[Jt]=this}mount(t){let e=this.sheet,n=0,i=0;for(let r=0;r<t.length;r++){let o=t[r],s=this.modules.indexOf(o);if(s<i&&s>-1&&(this.modules.splice(s,1),i--,s=-1),-1==s){if(this.modules.splice(i++,0,o),e)for(let t=0;t<o.rules.length;t++)e.insertRule(o.rules[t],n++)}else{while(i<s)n+=this.modules[i++].rules.length;n+=o.rules.length,i++}}if(!e){let t="";for(let e=0;e<this.modules.length;e++)t+=this.modules[e].getRules()+"\n";this.styleTag.textContent=t}}}for(var ne={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ie={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},re="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),oe=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),se="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),le=oe||re&&+re[1]<57,ae=0;ae<10;ae++)ne[48+ae]=ne[96+ae]=String(ae);for(ae=1;ae<=24;ae++)ne[ae+111]="F"+ae;for(ae=65;ae<=90;ae++)ne[ae]=String.fromCharCode(ae+32),ie[ae]=String.fromCharCode(ae);for(var he in ne)ie.hasOwnProperty(he)||(ie[he]=ne[he]);function ce(t){var e=le&&(t.ctrlKey||t.altKey||t.metaKey)||se&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key,n=!e&&t.key||(t.shiftKey?ie:ne)[t.keyCode]||t.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}function ue(t){let e;return e=11==t.nodeType?t.getSelection?t:t.ownerDocument:t,e.getSelection()}function fe(t,e){return!!e&&(t==e||t.contains(1!=e.nodeType?e.parentNode:e))}function de(t){let e=t.activeElement;while(e&&e.shadowRoot)e=e.shadowRoot.activeElement;return e}function pe(t,e){if(!e.anchorNode)return!1;try{return fe(t,e.anchorNode)}catch(Xl){return!1}}function ge(t){return 3==t.nodeType?De(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function me(t,e,n,i){return!!n&&(ye(t,e,n,i,-1)||ye(t,e,n,i,1))}function ve(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function ye(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:be(t))){if("DIV"==t.nodeName)return!1;let n=t.parentNode;if(!n||1!=n.nodeType)return!1;e=ve(t)+(r<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(t=t.childNodes[e+(r<0?-1:0)],1==t.nodeType&&"false"==t.contentEditable)return!1;e=r<0?be(t):0}}}function be(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}const we={left:0,right:0,top:0,bottom:0};function xe(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Se(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function ke(t,e,n,i,r,o,s,l){let a=t.ownerDocument,h=a.defaultView||window;for(let c=t;c;)if(1==c.nodeType){let t,u=c==a.body;if(u)t=Se(h);else{if(c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let e=c.getBoundingClientRect();t={left:e.left,right:e.left+c.clientWidth,top:e.top,bottom:e.top+c.clientHeight}}let f=0,d=0;if("nearest"==r)e.top<t.top?(d=-(t.top-e.top+s),n>0&&e.bottom>t.bottom+d&&(d=e.bottom-t.bottom+d+s)):e.bottom>t.bottom&&(d=e.bottom-t.bottom+s,n<0&&e.top-d<t.top&&(d=-(t.top+d-e.top+s)));else{let i=e.bottom-e.top,o=t.bottom-t.top,l="center"==r&&i<=o?e.top+i/2-o/2:"start"==r||"center"==r&&n<0?e.top-s:e.bottom-o+s;d=l-t.top}if("nearest"==i)e.left<t.left?(f=-(t.left-e.left+o),n>0&&e.right>t.right+f&&(f=e.right-t.right+f+o)):e.right>t.right&&(f=e.right-t.right+o,n<0&&e.left<t.left+f&&(f=-(t.left+f-e.left+o)));else{let n="center"==i?e.left+(e.right-e.left)/2-(t.right-t.left)/2:"start"==i==l?e.left-o:e.right-(t.right-t.left)+o;f=n-t.left}if(f||d)if(u)h.scrollBy(f,d);else{let t=0,n=0;if(d){let t=c.scrollTop;c.scrollTop+=d,n=c.scrollTop-t}if(f){let e=c.scrollLeft;c.scrollLeft+=f,t=c.scrollLeft-e}e={left:e.left-t,top:e.top-n,right:e.right-t,bottom:e.bottom-n},t&&Math.abs(t-f)<1&&(i="nearest"),n&&Math.abs(n-d)<1&&(r="nearest")}if(u)break;c=c.assignedSlot||c.parentNode}else{if(11!=c.nodeType)break;c=c.host}}function Ce(t){let e=t.ownerDocument;for(let n=t.parentNode;n;){if(n==e.body)break;if(1==n.nodeType){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else{if(11!=n.nodeType)break;n=n.host}}return null}class Me{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){this.set(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)}set(t,e,n,i){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=i}}let Ae,Te=null;function Oe(t){if(t.setActive)return t.setActive();if(Te)return t.focus(Te);let e=[];for(let n=t;n;n=n.parentNode)if(e.push(n,n.scrollTop,n.scrollLeft),n==n.ownerDocument)break;if(t.focus(null==Te?{get preventScroll(){return Te={preventScroll:!0},!0}}:void 0),!Te){Te=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],r=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=r&&(n.scrollLeft=r)}}}function De(t,e,n=e){let i=Ae||(Ae=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Le(t,e,n){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,t.dispatchEvent(r);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,t.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function Ee(t){while(t){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function Ne(t){while(t.attributes.length)t.removeAttributeNode(t.attributes[0])}function Pe(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(;;)if(i){if(1!=n.nodeType)return!1;let t=n.childNodes[i-1];"false"==t.contentEditable?i--:(n=t,i=be(n))}else{if(n==t)return!0;i=ve(n),n=n.parentNode}}class Ie{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new Ie(t.parentNode,ve(t),e)}static after(t,e){return new Ie(t.parentNode,ve(t)+1,e)}}const Re=[];class Be{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}coordsAt(t,e){return null}sync(t){if(2&this.dirty){let e,n=this.dom,i=null;for(let r of this.children){if(r.dirty){if(!r.dom&&(e=i?i.nextSibling:n.firstChild)){let t=Be.get(e);(!t||!t.parent&&t.canReuseDOM(r))&&r.reuseDOM(e)}r.sync(t),r.dirty=0}if(e=i?i.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&e!=r.dom&&(t.written=!0),r.dom.parentNode==n)while(e&&e!=r.dom)e=We(e);else n.insertBefore(r.dom,e);i=r.dom}e=i?i.nextSibling:n.firstChild,e&&t&&t.node==n&&(t.written=!0);while(e)e=We(e)}else if(1&this.dirty)for(let e of this.children)e.dirty&&(e.sync(t),e.dirty=0)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let i=0==be(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==i&&e.firstChild!=e.lastChild&&(i=t==e.firstChild?-1:1),t=e}n=i<0?t:t.nextSibling}if(n==this.dom.firstChild)return 0;while(n&&!Be.get(n))n=n.nextSibling;if(!n)return this.length;for(let i=0,r=0;;i++){let t=this.children[i];if(t.dom==n)return r;r+=t.length+t.breakAfter}}domBoundsAround(t,e,n=0){let i=-1,r=-1,o=-1,s=-1;for(let l=0,a=n,h=n;l<this.children.length;l++){let n=this.children[l],c=a+n.length;if(a<t&&c>e)return n.domBoundsAround(t,e,a);if(c>=t&&-1==i&&(i=l,r=a),a>e&&n.dom.parentNode==this.dom){o=l,s=h;break}h=c,a=c+n.breakAfter}return{from:r,to:s<0?n+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.dirty|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.dirty|=2),1&e.dirty)return;e.dirty|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.dirty&&this.markParentsDirty(!0))}setDOM(t){this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=Re){this.markDirty();for(let i=t;i<e;i++){let t=this.children[i];t.parent==this&&t.destroy()}this.children.splice(t,e-t,...n);for(let i=0;i<n.length;i++)n[i].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new Fe(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}merge(t,e,n,i,r,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}function We(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}Be.prototype.breakAfter=0;class Fe{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function He(t,e,n,i,r,o,s,l,a){let{children:h}=t,c=h.length?h[e]:null,u=o.length?o[o.length-1]:null,f=u?u.breakAfter:s;if(!(e==i&&c&&!s&&!f&&o.length<2&&c.merge(n,r,o.length?u:null,0==n,l,a))){if(i<h.length){let t=h[i];t&&r<t.length?(e==i&&(t=t.split(r),r=0),!f&&u&&t.merge(0,r,u,!0,0,a)?o[o.length-1]=t:(r&&t.merge(0,r,null,!1,0,a),o.push(t))):(null===t||void 0===t?void 0:t.breakAfter)&&(u?u.breakAfter=1:s=1),i++}c&&(c.breakAfter=s,n>0&&(!s&&o.length&&c.merge(n,c.length,o[0],!1,l,0)?c.breakAfter=o.shift().breakAfter:(n<c.length||c.children.length&&0==c.children[c.children.length-1].length)&&c.merge(n,c.length,null,!1,l,0),e++));while(e<i&&o.length)if(h[i-1].become(o[o.length-1]))i--,o.pop(),a=o.length?0:l;else{if(!h[e].become(o[0]))break;e++,o.shift(),l=o.length?0:a}!o.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,l,a)&&e--,(e<i||o.length)&&t.replaceChildren(e,i,o)}}function _e(t,e,n,i,r,o){let s=t.childCursor(),{i:l,off:a}=s.findPos(n,1),{i:h,off:c}=s.findPos(e,-1),u=e-n;for(let f of i)u+=f.length;t.length+=u,He(t,h,c,l,a,i,0,r,o)}let ze="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},Ve="undefined"!=typeof document?document:{documentElement:{style:{}}};const je=/Edge\/(\d+)/.exec(ze.userAgent),Ue=/MSIE \d/.test(ze.userAgent),Ke=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ze.userAgent),Ge=!!(Ue||Ke||je),qe=!Ge&&/gecko\/(\d+)/i.test(ze.userAgent),$e=!Ge&&/Chrome\/(\d+)/.exec(ze.userAgent),Xe="webkitFontSmoothing"in Ve.documentElement.style,Ye=!Ge&&/Apple Computer/.test(ze.vendor),Je=Ye&&(/Mobile\/\w+/.test(ze.userAgent)||ze.maxTouchPoints>2);var Ze={mac:Je||/Mac/.test(ze.platform),windows:/Win/.test(ze.platform),linux:/Linux|X11/.test(ze.platform),ie:Ge,ie_version:Ue?Ve.documentMode||6:Ke?+Ke[1]:je?+je[1]:0,gecko:qe,gecko_version:qe?+(/Firefox\/(\d+)/.exec(ze.userAgent)||[0,0])[1]:0,chrome:!!$e,chrome_version:$e?+$e[1]:0,ios:Je,android:/Android\b/.test(ze.userAgent),webkit:Xe,safari:Ye,webkit_version:Xe?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=Ve.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};const Qe=256;class tn extends Be{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){3==t.nodeType&&this.createDOM(t)}merge(t,e,n){return(!n||n instanceof tn&&!(this.length-(e-t)+n.length>Qe))&&(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),!0)}split(t){let e=new tn(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new Ie(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return nn(this.dom,t,e)}}class en extends Be{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let i of e)i.setParent(this)}setAttrs(t){if(Ne(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.dirty|=6)}sync(t){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t)}merge(t,e,n,i,r,o){return(!n||!(!(n instanceof en&&n.mark.eq(this.mark))||t&&r<=0||e<this.length&&o<=0))&&(_e(this,t,e,n?n.children:[],r-1,o-1),this.markDirty(),!0)}split(t){let e=[],n=0,i=-1,r=0;for(let s of this.children){let o=n+s.length;o>t&&e.push(n<t?s.split(t-n):s),i<0&&n>=t&&(i=r),n=o,r++}let o=this.length-t;return this.length=t,i>-1&&(this.children.length=i,this.markDirty()),new en(this.mark,e,o)}domAtPos(t){return cn(this,t)}coordsAt(t,e){return fn(this,t,e)}}function nn(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;0==e&&n<0||e==i&&n>=0?Ze.chrome||Ze.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):n<0?r--:o<i&&o++;let l=De(t,r,o).getClientRects();if(!l.length)return we;let a=l[(s?s<0:n>=0)?0:l.length-1];return Ze.safari&&!s&&0==a.width&&(a=Array.prototype.find.call(l,t=>t.width)||a),s?xe(a,s<0):a||null}class rn extends Be{constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}static create(t,e,n){return new(t.customView||rn)(t,e,n)}split(t){let e=rn.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof rn&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0))&&(this.length=t+(n?n.length:0)+(this.length-e),!0)}become(t){return t.length==this.length&&t instanceof rn&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.eq(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return o.empty;let t=this;while(t.parent)t=t.parent;let e=t.editorView,n=e&&e.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):o.empty}domAtPos(t){return 0==t?Ie.before(this.dom):Ie.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.dom.getClientRects(),i=null;if(!n.length)return we;for(let r=t>0?n.length-1:0;;r+=t>0?-1:1)if(i=n[r],t>0?0==r:r==n.length-1||i.top<i.bottom)break;return this.length?i:xe(i,this.side>0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class on extends rn{domAtPos(t){let{topView:e,text:n}=this.widget;return e?sn(t,0,e,n,(t,e)=>t.domAtPos(e),t=>new Ie(n,Math.min(t,n.nodeValue.length))):new Ie(n,Math.min(t,n.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(t,e){let{topView:n,text:i}=this.widget;return n?ln(t,e,n,i):Math.min(e,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(t,e){let{topView:n,text:i}=this.widget;return n?sn(t,e,n,i,(t,e,n)=>t.coordsAt(e,n),(t,e)=>nn(i,t,e)):nn(i,t,e)}destroy(){var t;super.destroy(),null===(t=this.widget.topView)||void 0===t||t.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function sn(t,e,n,i,r,o){if(n instanceof en){for(let s=n.dom.firstChild;s;s=s.nextSibling){let n=Be.get(s);if(!n)return o(t,e);let l=fe(s,i),a=n.length+(l?i.nodeValue.length:0);if(t<a||t==a&&n.getSide()<=0)return l?sn(t,e,n,i,r,o):r(n,t,e);t-=a}return r(n,n.length,-1)}return n.dom==i?o(t,e):r(n,t,e)}function ln(t,e,n,i){if(n instanceof en)for(let r of n.children){let n=0,o=fe(r.dom,i);if(fe(r.dom,t))return n+(o?ln(t,e,r,i):r.localPosFromDOM(t,e));n+=o?i.nodeValue.length:r.length}else if(n.dom==i)return Math.min(e,i.nodeValue.length);return n.localPosFromDOM(t,e)}class an extends Be{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof an&&t.side==this.side}split(){return new an(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return Ie.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){let e=this.dom.getBoundingClientRect(),n=hn(this,this.side>0?-1:1);return n&&n.top<e.bottom&&n.bottom>e.top?{left:e.left,right:e.right,top:n.top,bottom:n.bottom}:e}get overrideDOMText(){return o.empty}}function hn(t,e){let n=t.parent,i=n?n.children.indexOf(t):-1;while(n&&i>=0)if(e<0?i>0:i<n.children.length){let t=n.children[i+e];if(t instanceof tn){let n=t.coordsAt(e<0?t.length:0,e);if(n)return n}i+=e}else{if(!(n instanceof en&&n.parent)){let t=n.dom.lastChild;if(t&&"BR"==t.nodeName)return t.getClientRects()[0];break}i=n.parent.children.indexOf(n)+(e<0?0:1),n=n.parent}}function cn(t,e){let n=t.dom,{children:i}=t,r=0;for(let o=0;r<i.length;r++){let t=i[r],s=o+t.length;if(!(s==o&&t.getSide()<=0)){if(e>o&&e<s&&t.dom.parentNode==n)return t.domAtPos(e-o);if(e<=o)break;o=s}}for(let o=r;o>0;o--){let t=i[o-1];if(t.dom.parentNode==n)return t.domAtPos(t.length)}for(let o=r;o<i.length;o++){let t=i[o];if(t.dom.parentNode==n)return t.domAtPos(0)}return new Ie(n,0)}function un(t,e,n){let i,{children:r}=t;n>0&&e instanceof en&&r.length&&(i=r[r.length-1])instanceof en&&i.mark.eq(e.mark)?un(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function fn(t,e,n){let i=null,r=-1,o=null,s=-1;function l(t,e){for(let n=0,a=0;n<t.children.length&&a<=e;n++){let h=t.children[n],c=a+h.length;c>=e&&(h.children.length?l(h,e-a):!o&&(c>e||a==c&&h.getSide()>0)?(o=h,s=e-a):(a<e||a==c&&h.getSide()<0)&&(i=h,r=e-a)),a=c}}l(t,e);let a=(n<0?i:o)||i||o;return a?a.coordsAt(Math.max(0,a==i?r:s),n):dn(t)}function dn(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=ge(e);return n[n.length-1]||null}function pn(t,e){for(let n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}function gn(t,e){if(t==e)return!0;if(!t||!e)return!1;let n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r of n)if(-1==i.indexOf(r)||t[r]!==e[r])return!1;return!0}function mn(t,e,n){let i=null;if(e)for(let r in e)n&&r in n||t.removeAttribute(i=r);if(n)for(let r in n)e&&e[r]==n[r]||t.setAttribute(i=r,n[r]);return!!i}tn.prototype.children=rn.prototype.children=an.prototype.children=Re;class vn{eq(t){return!1}updateDOM(t){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}ignoreEvent(t){return!0}get customView(){return null}destroy(t){}}var yn=function(t){return t[t["Text"]=0]="Text",t[t["WidgetBefore"]=1]="WidgetBefore",t[t["WidgetAfter"]=2]="WidgetAfter",t[t["WidgetRange"]=3]="WidgetRange",t}(yn||(yn={}));class bn extends Lt{constructor(t,e,n,i){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(t){return new wn(t)}static widget(t){let e=t.side||0,n=!!t.block;return e+=n?e>0?3e8:-4e8:e>0?1e8:-1e8,new Sn(t,e,e,n,t.widget||null,!1)}static replace(t){let e,n,i=!!t.block;if(t.isBlockGap)e=-5e8,n=4e8;else{let{start:r,end:o}=kn(t,i);e=(r?i?-3e8:-1:5e8)-1,n=1+(o?i?2e8:1:-6e8)}return new Sn(t,e,n,i,t.widget||null,!0)}static line(t){return new xn(t)}static set(t,e=!1){return It.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}bn.none=It.empty;class wn extends bn{constructor(t){let{start:e,end:n}=kn(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){return this==t||t instanceof wn&&this.tagName==t.tagName&&this.class==t.class&&gn(this.attrs,t.attrs)}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}wn.prototype.point=!1;class xn extends bn{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof xn&&this.spec.class==t.spec.class&&gn(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}xn.prototype.mapMode=T.TrackBefore,xn.prototype.point=!0;class Sn extends bn{constructor(t,e,n,i,r,o){super(e,n,r,t),this.block=i,this.isReplace=o,this.mapMode=i?e<=0?T.TrackBefore:T.TrackAfter:T.TrackDel}get type(){return this.startSide<this.endSide?yn.WidgetRange:this.startSide<=0?yn.WidgetBefore:yn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(t){return t instanceof Sn&&Cn(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}function kn(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return null==n&&(n=t.inclusive),null==i&&(i=t.inclusive),{start:null!==n&&void 0!==n?n:e,end:null!==i&&void 0!==i?i:e}}function Cn(t,e){return t==e||!!(t&&e&&t.compare(e))}function Mn(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}Sn.prototype.point=!0;class An extends Be{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,i,r,o){if(n){if(!(n instanceof An))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),_e(this,t,e,n?n.children:[],r,o),!0}split(t){let e=new An;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:n,off:i}=this.childPos(t);i&&(e.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let r=n;r<this.children.length;r++)e.append(this.children[r],0);while(n>0&&0==this.children[n-1].length)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){gn(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){un(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=pn(e,this.attrs||{})),n&&(this.attrs=pn({class:n},this.attrs||{}))}domAtPos(t){return cn(this,t)}reuseDOM(t){"DIV"==t.nodeName&&(this.setDOM(t),this.dirty|=6)}sync(t){var e;this.dom?4&this.dirty&&(Ne(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(mn(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t);let n=this.dom.lastChild;while(n&&Be.get(n)instanceof en)n=n.lastChild;if(!n||!this.length||"BR"!=n.nodeName&&0==(null===(e=Be.get(n))||void 0===e?void 0:e.isEditable)&&(!Ze.ios||!this.children.some(t=>t instanceof tn))){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t=0;for(let e of this.children){if(!(e instanceof tn)||/[^ -~]/.test(e.text))return null;let n=ge(e.dom);if(1!=n.length)return null;t+=n[0].width}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}:null}coordsAt(t,e){return fn(this,t,e)}become(t){return!1}get type(){return yn.Text}static find(t,e){for(let n=0,i=0;n<t.children.length;n++){let r=t.children[n],o=i+r.length;if(o>=e){if(r instanceof An)return r;if(o>e)break}i=o+r.breakAfter}return null}}class Tn extends Be{constructor(t,e,n){super(),this.widget=t,this.length=e,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof Tn&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0))&&(this.length=t+(n?n.length:0)+(this.length-e),!0)}domAtPos(t){return 0==t?Ie.before(this.dom):Ie.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new Tn(this.widget,e,this.type);return n.breakAfter=this.breakAfter,n}get children(){return Re}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):o.empty}domBoundsAround(){return null}become(t){return t instanceof Tn&&t.type==this.type&&t.widget.constructor==this.widget.constructor&&(t.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.breakAfter=t.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class On{constructor(t,e,n,i){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!t.breakAfter&&!(t instanceof Tn&&t.type==yn.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new An),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Dn(new an(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(t,e,n){while(t>0){if(this.textOff==this.text.length){let{value:e,lineBreak:n,done:i}=this.cursor.next(this.skip);if(this.skip=0,i)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}this.text=e,this.textOff=0}let i=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-n)),this.getLine().append(Dn(new tn(this.text.slice(this.textOff,this.textOff+i)),e),n),this.atCursorPos=!0,this.textOff+=i,t-=i,n=0}}span(t,e,n,i){this.buildText(e-t,n,i),this.pos=e,this.openStart<0&&(this.openStart=i)}point(t,e,n,i,r,o){if(this.disallowBlockEffectsFor[o]&&n instanceof Sn){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=e-t;if(n instanceof Sn)if(n.block){let{type:t}=n;t!=yn.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new Tn(n.widget||new Ln("div"),s,t))}else{let o=rn.create(n.widget||new Ln("span"),s,s?0:n.startSide),l=this.atCursorPos&&!o.isEditable&&r<=i.length&&(t<e||n.startSide>0),a=!o.isEditable&&(t<e||r>i.length||n.startSide<=0),h=this.getLine();2!=this.pendingBuffer||l||(this.pendingBuffer=0),this.flushBuffer(i),l&&(h.append(Dn(new an(1),i),r),r=i.length+Math.max(0,r-i.length)),h.append(Dn(o,i),r),this.atCursorPos=a,this.pendingBuffer=a?t<e||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=r)}static build(t,e,n,i,r){let o=new On(t,e,n,r);return o.openEnd=It.spans(i,e,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Dn(t,e){for(let n of e)t=new en(n,[t],t.length);return t}class Ln extends vn{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}}const En=_.define(),Nn=_.define(),Pn=_.define(),In=_.define(),Rn=_.define(),Bn=_.define(),Wn=_.define({combine:t=>t.some(t=>t)}),Fn=_.define({combine:t=>t.some(t=>t)});class Hn{constructor(t,e="nearest",n="nearest",i=5,r=5){this.range=t,this.y=e,this.x=n,this.yMargin=i,this.xMargin=r}map(t){return t.empty?this:new Hn(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin)}}const _n=pt.define({map:(t,e)=>t.map(e)});function zn(t,e,n){let i=t.facet(In);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const Vn=_.define({combine:t=>!t.length||t[0]});let jn=0;const Un=_.define();class Kn{constructor(t,e,n,i){this.id=t,this.create=e,this.domEventHandlers=n,this.extension=i(this)}static define(t,e){const{eventHandlers:n,provide:i,decorations:r}=e||{};return new Kn(jn++,t,n,t=>{let e=[Un.of(t)];return r&&e.push(Xn.of(e=>{let n=e.plugin(t);return n?r(n):bn.none})),i&&e.push(i(t)),e})}static fromClass(t,e){return Kn.define(e=>new t(e),e)}}class Gn{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(zn(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(Xl){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){zn(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(n){zn(t.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const qn=_.define(),$n=_.define(),Xn=_.define(),Yn=_.define(),Jn=_.define(),Zn=_.define();class Qn{constructor(t,e,n,i){this.fromA=t,this.toA=e,this.fromB=n,this.toB=i}join(t){return new Qn(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let i=t[e-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(0==e.length)return t;let n=[];for(let i=0,r=0,o=0,s=0;;i++){let l=i==t.length?null:t[i],a=o-s,h=l?l.fromB:1e9;while(r<e.length&&e[r]<h){let t=e[r],i=e[r+1],o=Math.max(s,t),l=Math.min(h,i);if(o<=l&&new Qn(o+a,l+a,o,l).addToSet(n),i>h)break;r+=2}if(!l)return n;new Qn(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),o=l.toA,s=l.toB}}}class ti{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=D.empty(this.startState.doc.length);for(let o of n)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((t,e,n,r)=>i.push(new Qn(t,e,n,r))),this.changedRanges=i;let r=t.hasFocus;r!=t.inputState.notifiedFocused&&(t.inputState.notifiedFocused=r,this.flags|=1)}static create(t,e,n){return new ti(t,e,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}var ei=function(t){return t[t["LTR"]=0]="LTR",t[t["RTL"]=1]="RTL",t}(ei||(ei={}));const ni=ei.LTR,ii=ei.RTL;function ri(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const oi=ri("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),si=ri("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),li=Object.create(null),ai=[];for(let Yl of["()","[]","{}"]){let t=Yl.charCodeAt(0),e=Yl.charCodeAt(1);li[t]=e,li[e]=-t}function hi(t){return t<=247?oi[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?si[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:64336<=t&&t<=65023?4:8204==t?256:1}const ci=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ui{constructor(t,e,n){this.from=t,this.to=e,this.level=n}get dir(){return this.level%2?ii:ni}side(t,e){return this.dir==e==t?this.to:this.from}static find(t,e,n,i){let r=-1;for(let o=0;o<t.length;o++){let s=t[o];if(s.from<=e&&s.to>=e){if(s.level==n)return o;(r<0||(0!=i?i<0?s.from<e:s.to>e:t[r].level>s.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}const fi=[];function di(t,e){let n=t.length,i=e==ni?1:2,r=e==ni?2:1;if(!t||1==i&&!ci.test(t))return pi(n);for(let s=0,l=i,a=i;s<n;s++){let e=hi(t.charCodeAt(s));512==e?e=l:8==e&&4==a&&(e=16),fi[s]=4==e?2:e,7&e&&(a=e),l=e}for(let s=0,l=i,a=i;s<n;s++){let t=fi[s];if(128==t)s<n-1&&l==fi[s+1]&&24&l?t=fi[s]=l:fi[s]=256;else if(64==t){let t=s+1;while(t<n&&64==fi[t])t++;let e=s&&8==l||t<n&&8==fi[t]?1==a?1:8:256;for(let n=s;n<t;n++)fi[n]=e;s=t-1}else 8==t&&1==a&&(fi[s]=1);l=t,7&t&&(a=t)}for(let s,l,a,h=0,c=0,u=0;h<n;h++)if(l=li[s=t.charCodeAt(h)])if(l<0){for(let t=c-3;t>=0;t-=3)if(ai[t+1]==-l){let e=ai[t+2],n=2&e?i:4&e?1&e?r:i:0;n&&(fi[h]=fi[ai[t]]=n),c=t;break}}else{if(189==ai.length)break;ai[c++]=h,ai[c++]=s,ai[c++]=u}else if(2==(a=fi[h])||1==a){let t=a==i;u=t?0:1;for(let e=c-3;e>=0;e-=3){let n=ai[e+2];if(2&n)break;if(t)ai[e+2]|=2;else{if(4&n)break;ai[e+2]|=4}}}for(let s=0;s<n;s++)if(256==fi[s]){let t=s+1;while(t<n&&256==fi[t])t++;let e=1==(s?fi[s-1]:i),r=1==(t<n?fi[t]:i),o=e==r?e?1:2:i;for(let n=s;n<t;n++)fi[n]=o;s=t-1}let o=[];if(1==i)for(let s=0;s<n;){let t=s,e=1!=fi[s++];while(s<n&&e==(1!=fi[s]))s++;if(e)for(let n=s;n>t;){let e=n,i=2!=fi[--n];while(n>t&&i==(2!=fi[n-1]))n--;o.push(new ui(n,e,i?2:1))}else o.push(new ui(t,s,0))}else for(let s=0;s<n;){let t=s,e=2==fi[s++];while(s<n&&e==(2==fi[s]))s++;o.push(new ui(t,s,e?1:2))}return o}function pi(t){return[new ui(0,t,0)]}let gi="";function mi(t,e,n,i,r){var o;let s=i.head-t.from,l=-1;if(0==s){if(!r||!t.length)return null;e[0].level!=n&&(s=e[0].side(!1,n),l=0)}else if(s==t.length){if(r)return null;let t=e[e.length-1];t.level!=n&&(s=t.side(!0,n),l=e.length-1)}l<0&&(l=ui.find(e,s,null!==(o=i.bidiLevel)&&void 0!==o?o:-1,i.assoc));let a=e[l];s==a.side(r,n)&&(a=e[l+=r?1:-1],s=a.side(!r,n));let h=r==(a.dir==n),c=b(t.text,s,h);if(gi=t.text.slice(Math.min(s,c),Math.max(s,c)),c!=a.side(r,n))return W.cursor(c+t.from,h?-1:1,a.level);let u=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return u||a.level==n?u&&u.level<a.level?W.cursor(u.side(!r,n)+t.from,r?1:-1,u.level):W.cursor(c+t.from,r?-1:1,a.level):W.cursor(r?t.to:t.from,r?-1:1,n)}const vi="￿";class yi{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(Dt.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=vi}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let i=t;;){this.findPointBefore(n,i),this.readNode(i);let t=i.nextSibling;if(t==e)break;let r=Be.get(i),o=Be.get(t);(r&&o?r.breakAfter:(r?r.breakAfter:bi(i))||bi(t)&&("BR"!=i.nodeName||i.cmIgnore))&&this.lineBreak(),i=t}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r,o=-1,s=1;if(this.lineSeparator?(o=e.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(r=i.exec(e))&&(o=r.index,s=r[0].length),this.append(e.slice(n,o<0?e.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let e of this.points)e.node==t&&e.pos>this.text.length&&(e.pos-=s-1);n=o+s}}readNode(t){if(t.cmIgnore)return;let e=Be.get(t),n=e&&e.overrideDOMText;if(null!=n){this.findPointInside(t,n.length);for(let t=n.iter();!t.next().done;)t.lineBreak?this.lineBreak():this.append(t.value)}else 3==t.nodeType?this.readTextNode(t):"BR"==t.nodeName?t.nextSibling&&this.lineBreak():1==t.nodeType&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(3==t.nodeType?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+Math.min(e,n.offset))}}function bi(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class wi{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class xi extends Be{constructor(t){super(),this.view=t,this.compositionDeco=bn.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new An],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Qn(0,0,0,t.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(t){let e=t.changedRanges;this.minWidth>0&&e.length&&(e.every(({fromA:t,toA:e})=>e<this.minWidthFrom||t>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=bn.none:(t.transactions.length||this.dirty)&&(this.compositionDeco=Mi(this.view,t.changes)),(Ze.ie||Ze.chrome)&&!this.compositionDeco.size&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let n=this.decorations,i=this.updateDeco(),r=Li(n,i,t.changes);return e=Qn.extendWithRanges(e,r),(0!=this.dirty||0!=e.length)&&(this.updateInner(e,t.startState.doc.length),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let t=Ze.chrome||Ze.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(t),this.dirty=0,t&&(t.written||n.selectionRange.focusNode!=t.node)&&(this.forceSelection=!0),this.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let r of this.children)r instanceof Tn&&r.widget instanceof ki&&i.push(r.dom);n.updateGaps(i)}updateChildren(t,e){let n=this.childCursor(e);for(let i=t.length-1;;i--){let e=i>=0?t[i]:null;if(!e)break;let{fromA:r,toA:o,fromB:s,toB:l}=e,{content:a,breakAtStart:h,openStart:c,openEnd:u}=On.build(this.view.state.doc,s,l,this.decorations,this.dynamicDecorationMap),{i:f,off:d}=n.findPos(o,1),{i:p,off:g}=n.findPos(r,-1);He(this,p,g,f,d,a,h,c,u)}}updateSelection(t=!1,e=!1){if(!t&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange(),!e&&!this.mayControlSelection())return;let n=this.forceSelection;this.forceSelection=!1;let i=this.view.state.selection.main,r=this.domAtPos(i.anchor),o=i.empty?r:this.domAtPos(i.head);if(Ze.gecko&&i.empty&&Si(r)){let t=document.createTextNode("");this.view.observer.ignore(()=>r.node.insertBefore(t,r.node.childNodes[r.offset]||null)),r=o=new Ie(t,0),n=!0}let s=this.view.observer.selectionRange;!n&&s.focusNode&&me(r.node,r.offset,s.anchorNode,s.anchorOffset)&&me(o.node,o.offset,s.focusNode,s.focusOffset)||(this.view.observer.ignore(()=>{Ze.android&&Ze.chrome&&this.dom.contains(s.focusNode)&&Ei(s.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let t=ue(this.view.root);if(t)if(i.empty){if(Ze.gecko){let t=Oi(r.node,r.offset);if(t&&3!=t){let e=Ti(r.node,r.offset,1==t?1:-1);e&&(r=new Ie(e,1==t?0:e.nodeValue.length))}}t.collapse(r.node,r.offset),null!=i.bidiLevel&&null!=s.cursorBidiLevel&&(s.cursorBidiLevel=i.bidiLevel)}else if(t.extend){t.collapse(r.node,r.offset);try{t.extend(o.node,o.offset)}catch(Xl){}}else{let e=document.createRange();i.anchor>i.head&&([r,o]=[o,r]),e.setEnd(o.node,o.offset),e.setStart(r.node,r.offset),t.removeAllRanges(),t.addRange(e)}else;}),this.view.observer.setSelectionRange(r,o)),this.impreciseAnchor=r.precise?null:new Ie(s.anchorNode,s.anchorOffset),this.impreciseHead=o.precise?null:new Ie(s.focusNode,s.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:t}=this,e=t.state.selection.main,n=ue(t.root),{anchorNode:i,anchorOffset:r}=t.observer.selectionRange;if(!n||!e.empty||!e.assoc||!n.modify)return;let o=An.find(this,e.head);if(!o)return;let s=o.posAtStart;if(e.head==s||e.head==s+o.length)return;let l=this.coordsAt(e.head,-1),a=this.coordsAt(e.head,1);if(!l||!a||l.bottom>a.top)return;let h=this.domAtPos(e.head+e.assoc);n.collapse(h.node,h.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let c=t.observer.selectionRange;t.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=e.from&&n.collapse(i,r)}mayControlSelection(){let t=this.view.root.activeElement;return t==this.dom||pe(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t))}nearest(t){for(let e=t;e;){let t=Be.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(n<t.length||t instanceof An)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){for(let n=this.length,i=this.children.length-1;;i--){let r=this.children[i],o=n-r.breakAfter-r.length;if(t>o||t==o&&r.type!=yn.WidgetBefore&&r.type!=yn.WidgetAfter&&(!i||2==e||this.children[i-1].breakAfter||this.children[i-1].type==yn.WidgetBefore&&e>-2))return r.coordsAt(t-o,e);n=o}}measureVisibleLineHeights(t){let e=[],{from:n,to:i}=t,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,l=this.view.textDirection==ei.LTR;for(let a=0,h=0;h<this.children.length;h++){let t=this.children[h],c=a+t.length;if(c>i)break;if(a>=n){let n=t.dom.getBoundingClientRect();if(e.push(n.height),o){let e=t.dom.lastChild,i=e?ge(e):[];if(i.length){let t=i[i.length-1],e=l?t.right-n.left:n.right-t.left;e>s&&(s=e,this.minWidth=r,this.minWidthFrom=a,this.minWidthTo=c)}}}a=c+t.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return"rtl"==getComputedStyle(this.children[e].dom).direction?ei.RTL:ei.LTR}measureTextSize(){for(let i of this.children)if(i instanceof An){let t=i.measureTextSize();if(t)return t}let t,e,n=document.createElement("div");return n.className="cm-line",n.style.width="99999px",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(n);let i=ge(n.firstChild)[0];t=n.getBoundingClientRect().height,e=i?i.width/27:7,n.remove()}),{lineHeight:t,charWidth:e}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new Fe(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,i=0;;i++){let r=i==e.viewports.length?null:e.viewports[i],o=r?r.from-1:this.length;if(o>n){let i=e.lineBlockAt(o).bottom-e.lineBlockAt(n).top;t.push(bn.replace({widget:new ki(i),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!r)break;n=r.to+1}return bn.set(t)}updateDeco(){let t=this.view.state.facet(Xn).map((t,e)=>{let n=this.dynamicDecorationMap[e]="function"==typeof t;return n?t(this.view):t});for(let e=t.length;e<t.length+3;e++)this.dynamicDecorationMap[e]=!1;return this.decorations=[...t,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(t){let e,{range:n}=t,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!i)return;!n.empty&&(e=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,e.left),top:Math.min(i.top,e.top),right:Math.max(i.right,e.right),bottom:Math.max(i.bottom,e.bottom)});let r=0,o=0,s=0,l=0;for(let h of this.view.state.facet(Jn).map(t=>t(this.view)))if(h){let{left:t,right:e,top:n,bottom:i}=h;null!=t&&(r=Math.max(r,t)),null!=e&&(o=Math.max(o,e)),null!=n&&(s=Math.max(s,n)),null!=i&&(l=Math.max(l,i))}let a={left:i.left-r,top:i.top-s,right:i.right+o,bottom:i.bottom+l};ke(this.view.scrollDOM,a,n.head<n.anchor?-1:1,t.x,t.y,t.xMargin,t.yMargin,this.view.textDirection==ei.LTR)}}function Si(t){return 1==t.node.nodeType&&t.node.firstChild&&(0==t.offset||"false"==t.node.childNodes[t.offset-1].contentEditable)&&(t.offset==t.node.childNodes.length||"false"==t.node.childNodes[t.offset].contentEditable)}class ki extends vn{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Ci(t){let e=t.observer.selectionRange,n=e.focusNode&&Ti(e.focusNode,e.focusOffset,0);if(!n)return null;let i=t.docView.nearest(n);if(!i)return null;if(i instanceof An){let t=n;while(t.parentNode!=i.dom)t=t.parentNode;let e=t.previousSibling;while(e&&!Be.get(e))e=e.previousSibling;let r=e?Be.get(e).posAtEnd:i.posAtStart;return{from:r,to:r,node:t,text:n}}{for(;;){let{parent:t}=i;if(!t)return null;if(t instanceof An)break;i=t}let t=i.posAtStart;return{from:t,to:t+i.length,node:i.dom,text:n}}}function Mi(t,e){let n=Ci(t);if(!n)return bn.none;let{from:i,to:r,node:o,text:s}=n,l=e.mapPos(i,1),a=Math.max(l,e.mapPos(r,-1)),{state:h}=t,c=3==o.nodeType?o.nodeValue:new yi([],h).readRange(o.firstChild,null).text;if(a-l<c.length)if(h.doc.sliceString(l,Math.min(h.doc.length,l+c.length),vi)==c)a=l+c.length;else{if(h.doc.sliceString(Math.max(0,a-c.length),a,vi)!=c)return bn.none;l=a-c.length}else if(h.doc.sliceString(l,a,vi)!=c)return bn.none;let u=Be.get(o);return u instanceof on?u=u.widget.topView:u&&(u.parent=null),bn.set(bn.replace({widget:new Ai(o,s,u),inclusive:!0}).range(l,a))}class Ai extends vn{constructor(t,e,n){super(),this.top=t,this.text=e,this.topView=n}eq(t){return this.top==t.top&&this.text==t.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return on}}function Ti(t,e,n){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0&&n<=0)t=t.childNodes[e-1],e=be(t);else{if(!(1==t.nodeType&&e<t.childNodes.length&&n>=0))return null;t=t.childNodes[e],e=0}}}function Oi(t,e){return 1!=t.nodeType?0:(e&&"false"==t.childNodes[e-1].contentEditable?1:0)|(e<t.childNodes.length&&"false"==t.childNodes[e].contentEditable?2:0)}class Di{constructor(){this.changes=[]}compareRange(t,e){Mn(t,e,this.changes)}comparePoint(t,e){Mn(t,e,this.changes)}}function Li(t,e,n){let i=new Di;return It.compare(t,e,n,i),i.changes}function Ei(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}function Ni(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),o=e-r.from;if(0==r.length)return W.cursor(e);0==o?n=1:o==r.length&&(n=-1);let s=o,l=o;n<0?s=b(r.text,o,!1):l=b(r.text,o);let a=i(r.text.slice(s,l));while(s>0){let t=b(r.text,s,!1);if(i(r.text.slice(t,s))!=a)break;s=t}while(l<r.length){let t=b(r.text,l);if(i(r.text.slice(l,t))!=a)break;l=t}return W.range(s+r.from,l+r.from)}function Pi(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Ii(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Ri(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Bi(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Wi(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Fi(t,e,n){let i,r,o,s,l,a,h,c,u=!1;for(let p=t.firstChild;p;p=p.nextSibling){let t=ge(p);for(let f=0;f<t.length;f++){let d=t[f];r&&Ri(r,d)&&(d=Bi(Wi(d,r.bottom),r.top));let g=Pi(e,d),m=Ii(n,d);if(0==g&&0==m)return 3==p.nodeType?Hi(p,e,n):Fi(p,e,n);if(!i||s>m||s==m&&o>g){i=p,r=d,o=g,s=m;let l=m?n<d.top?-1:1:g?e<d.left?-1:1:0;u=!l||(l>0?f<t.length-1:f>0)}0==g?n>d.bottom&&(!h||h.bottom<d.bottom)?(l=p,h=d):n<d.top&&(!c||c.top>d.top)&&(a=p,c=d):h&&Ri(h,d)?h=Wi(h,d.bottom):c&&Ri(c,d)&&(c=Bi(c,d.top))}}if(h&&h.bottom>=n?(i=l,r=h):c&&c.top<=n&&(i=a,r=c),!i)return{node:t,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(3==i.nodeType)return Hi(i,f,n);if(u&&"false"!=i.contentEditable)return Fi(i,f,n);let d=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:d}}function Hi(t,e,n){let i=t.nodeValue.length,r=-1,o=1e9,s=0;for(let l=0;l<i;l++){let i=De(t,l,l+1).getClientRects();for(let a=0;a<i.length;a++){let h=i[a];if(h.top==h.bottom)continue;s||(s=e-h.left);let c=(h.top>n?h.top-n:n-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&c<o){let n=e>=(h.left+h.right)/2,i=n;if(Ze.chrome||Ze.gecko){let e=De(t,l).getBoundingClientRect();e.left==h.right&&(i=!n)}if(c<=0)return{node:t,offset:l+(i?1:0)};r=l+(i?1:0),o=c}}}return{node:t,offset:r>-1?r:s>0?t.nodeValue.length:0}}function _i(t,{x:e,y:n},i,r=-1){var o;let s,l=t.contentDOM.getBoundingClientRect(),a=l.top+t.viewState.paddingTop,{docHeight:h}=t.viewState,c=n-a;if(c<0)return 0;if(c>h)return t.state.doc.length;for(let v=t.defaultLineHeight/2,y=!1;;){if(s=t.elementAtHeight(c),s.type==yn.Text)break;for(;;){if(c=r>0?s.bottom+v:s.top-v,c>=0&&c<=h)break;if(y)return i?null:0;y=!0,r=-r}}n=a+c;let u=s.from;if(u<t.viewport.from)return 0==t.viewport.from?0:i?null:zi(t,l,s,e,n);if(u>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:i?null:zi(t,l,s,e,n);let f=t.dom.ownerDocument,d=t.root.elementFromPoint?t.root:f,p=d.elementFromPoint(e,n);p&&!t.contentDOM.contains(p)&&(p=null),p||(e=Math.max(l.left+1,Math.min(l.right-1,e)),p=d.elementFromPoint(e,n),p&&!t.contentDOM.contains(p)&&(p=null));let g,m=-1;if(p&&0!=(null===(o=t.docView.nearest(p))||void 0===o?void 0:o.isEditable))if(f.caretPositionFromPoint){let t=f.caretPositionFromPoint(e,n);t&&({offsetNode:g,offset:m}=t)}else if(f.caretRangeFromPoint){let i=f.caretRangeFromPoint(e,n);i&&(({startContainer:g,startOffset:m}=i),(!t.contentDOM.contains(g)||Ze.safari&&Vi(g,m,e)||Ze.chrome&&ji(g,m,e))&&(g=void 0))}if(!g||!t.docView.dom.contains(g)){let i=An.find(t.docView,u);if(!i)return c>s.top+s.height/2?s.to:s.from;({node:g,offset:m}=Fi(i.dom,e,n))}return t.docView.posFromDOM(g,m)}function zi(t,e,n,i,r){let o=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>1.5*t.defaultLineHeight){let e=Math.floor((r-n.top)/t.defaultLineHeight);o+=e*t.viewState.heightOracle.lineLength}let s=t.state.sliceDoc(n.from,n.to);return n.from+$t(s,o,t.state.tabSize)}function Vi(t,e,n){let i;if(3!=t.nodeType||e!=(i=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(1!=r.nodeType||"BR"!=r.nodeName)return!1;return De(t,i-1,i).getBoundingClientRect().left>n}function ji(t,e,n){if(0!=e)return!1;for(let r=t;;){let t=r.parentNode;if(!t||1!=t.nodeType||t.firstChild!=r)return!1;if(t.classList.contains("cm-line"))break;r=t}let i=1==t.nodeType?t.getBoundingClientRect():De(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function Ui(t,e,n,i){let r=t.state.doc.lineAt(e.head),o=i&&t.lineWrapping?t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head):null;if(o){let e=t.dom.getBoundingClientRect(),i=t.textDirectionAt(r.from),s=t.posAtCoords({x:n==(i==ei.LTR)?e.right-1:e.left+1,y:(o.top+o.bottom)/2});if(null!=s)return W.cursor(s,n?-1:1)}let s=An.find(t.docView,e.head),l=s?n?s.posAtEnd:s.posAtStart:n?r.to:r.from;return W.cursor(l,n?-1:1)}function Ki(t,e,n,i){let r=t.state.doc.lineAt(e.head),o=t.bidiSpans(r),s=t.textDirectionAt(r.from);for(let l=e,a=null;;){let e=mi(r,o,s,l,n),h=gi;if(!e){if(r.number==(n?t.state.doc.lines:1))return l;h="\n",r=t.state.doc.line(r.number+(n?1:-1)),o=t.bidiSpans(r),e=W.cursor(n?r.from:r.to)}if(a){if(!a(h))return l}else{if(!i)return e;a=i(h)}l=e}}function Gi(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return t=>{let e=i(t);return r==Ct.Space&&(r=e),r==e}}function qi(t,e,n,i){let r=e.head,o=n?1:-1;if(r==(n?t.state.doc.length:0))return W.cursor(r,e.assoc);let s,l=e.goalColumn,a=t.contentDOM.getBoundingClientRect(),h=t.coordsAtPos(r),c=t.documentTop;if(h)null==l&&(l=h.left-a.left),s=o<0?h.top:h.bottom;else{let e=t.viewState.lineBlockAt(r);null==l&&(l=Math.min(a.right-a.left,t.defaultCharacterWidth*(r-e.from))),s=(o<0?e.top:e.bottom)+c}let u=a.left+l,f=null!==i&&void 0!==i?i:t.defaultLineHeight>>1;for(let d=0;;d+=10){let n=s+(f+d)*o,i=_i(t,{x:u,y:n},!1,o);if(n<a.top||n>a.bottom||(o<0?i<r:i>r))return W.cursor(i,e.assoc,void 0,l)}}function $i(t,e,n){let i=t.state.facet(Yn).map(e=>e(t));for(;;){let t=!1;for(let r of i)r.between(n.from-1,n.from+1,(i,r,o)=>{n.from>i&&n.from<r&&(n=e.head>n.from?W.cursor(i,1):W.cursor(r,-1),t=!0)});if(!t)return n}}class Xi{constructor(t){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let e=(e,n)=>{this.ignoreDuringComposition(n)||"keydown"==n.type&&this.keydown(t,n)||(this.mustFlushObserver(n)&&t.observer.forceFlush(),this.runCustomHandlers(n.type,t,n)?n.preventDefault():e(t,n))};for(let n in or){let i=or[n];t.contentDOM.addEventListener(n,n=>{rr(t,n)&&e(i,n)},sr[n]),this.registeredEvents.push(n)}t.scrollDOM.addEventListener("mousedown",n=>{n.target==t.scrollDOM&&e(or.mousedown,n)}),Ze.chrome&&102==Ze.chrome_version&&t.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?t.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,t.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=t.hasFocus,Ze.safari&&t.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}ensureHandlers(t,e){var n;let i;this.customHandlers=[];for(let r of e)if(i=null===(n=r.update(t).spec)||void 0===n?void 0:n.domEventHandlers){this.customHandlers.push({plugin:r.value,handlers:i});for(let e in i)this.registeredEvents.indexOf(e)<0&&"scroll"!=e&&(this.registeredEvents.push(e),t.contentDOM.addEventListener(e,n=>{rr(t,n)&&this.runCustomHandlers(e,t,n)&&n.preventDefault()}))}}runCustomHandlers(t,e,n){for(let r of this.customHandlers){let o=r.handlers[t];if(o)try{if(o.call(r.plugin,n,e)||n.defaultPrevented)return!0}catch(i){zn(e.state,i)}}return!1}runScrollHandlers(t,e){this.lastScrollTop=t.scrollDOM.scrollTop,this.lastScrollLeft=t.scrollDOM.scrollLeft;for(let i of this.customHandlers){let r=i.handlers.scroll;if(r)try{r.call(i.plugin,e,t)}catch(n){zn(t.state,n)}}}keydown(t,e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(Ze.android&&Ze.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))return t.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return!(!Ze.ios||e.synthetic||e.altKey||e.metaKey||!((n=Yi.find(t=>t.keyCode==e.keyCode))&&!e.ctrlKey||Ji.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey))&&(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(t),250),!0)}flushIOSKey(t){let e=this.pendingIOSKey;return!!e&&(this.pendingIOSKey=void 0,Le(t.contentDOM,e.key,e.keyCode))}ignoreDuringComposition(t){return!!/^key/.test(t.type)&&(this.composing>0||!!(Ze.safari&&!Ze.ios&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))}mustFlushObserver(t){return"keydown"==t.type&&229!=t.keyCode}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.mouseSelection&&this.mouseSelection.update(t),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Yi=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Ji="dthko",Zi=[16,17,18,20,91,92,224,225];function Qi(t){return.7*t+8}class tr{constructor(t,e,n,i){this.view=t,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParent=Ce(t.contentDOM);let r=t.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Dt.allowMultipleSelections)&&er(t,e),this.dragMove=nr(t,e),this.dragging=!(!ir(t,e)||1!=br(e))&&null,!1===this.dragging&&(e.preventDefault(),this.select(e))}move(t){var e;if(0==t.buttons)return this.destroy();if(!1!==this.dragging)return;this.select(this.lastEvent=t);let n=0,i=0,r=(null===(e=this.scrollParent)||void 0===e?void 0:e.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};t.clientX<=r.left?n=-Qi(r.left-t.clientX):t.clientX>=r.right&&(n=Qi(t.clientX-r.right)),t.clientY<=r.top?i=-Qi(r.top-t.clientY):t.clientY>=r.bottom&&(i=Qi(t.clientY-r.bottom)),this.setScrollSpeed(n,i)}up(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}select(t){let e=this.style.get(t,this.extend,this.multiple);!this.mustSelect&&e.eq(this.view.state.selection)&&e.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:e,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.docChanged&&this.dragging&&(this.dragging=this.dragging.map(t.changes)),this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function er(t,e){let n=t.state.facet(En);return n.length?n[0](e):Ze.mac?e.metaKey:e.ctrlKey}function nr(t,e){let n=t.state.facet(Nn);return n.length?n[0](e):Ze.mac?!e.altKey:!e.ctrlKey}function ir(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=ue(t.root);if(!i||0==i.rangeCount)return!0;let r=i.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let t=r[o];if(t.left<=e.clientX&&t.right>=e.clientX&&t.top<=e.clientY&&t.bottom>=e.clientY)return!0}return!1}function rr(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n,i=e.target;i!=t.contentDOM;i=i.parentNode)if(!i||11==i.nodeType||(n=Be.get(i))&&n.ignoreEvent(e))return!1;return!0}const or=Object.create(null),sr=Object.create(null),lr=Ze.ie&&Ze.ie_version<15||Ze.ios&&Ze.webkit_version<604;function ar(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),hr(t,n.value)},50)}function hr(t,e){let n,{state:i}=t,r=1,o=i.toText(e),s=o.lines==i.selection.ranges.length,l=null!=Mr&&i.selection.ranges.every(t=>t.empty)&&Mr==o.toString();if(l){let t=-1;n=i.changeByRange(n=>{let l=i.doc.lineAt(n.from);if(l.from==t)return{range:n};t=l.from;let a=i.toText((s?o.line(r++).text:e)+i.lineBreak);return{changes:{from:l.from,insert:a},range:W.cursor(n.from+a.length)}})}else n=s?i.changeByRange(t=>{let e=o.line(r++);return{changes:{from:t.from,to:t.to,insert:e.text},range:W.cursor(t.from+e.length)}}):i.replaceSelection(o);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function cr(t,e,n,i){if(1==i)return W.cursor(e,n);if(2==i)return Ni(t.state,e,n);{let n=An.find(t.docView,e),i=t.state.doc.lineAt(n?n.posAtEnd:e),r=n?n.posAtStart:i.from,o=n?n.posAtEnd:i.to;return o<t.state.doc.length&&o==i.to&&o++,W.range(r,o)}}or.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),27==e.keyCode?t.inputState.lastEscPress=Date.now():Zi.indexOf(e.keyCode)<0&&(t.inputState.lastEscPress=0)},or.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},or.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")},sr.touchstart=sr.touchmove={passive:!0},or.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let i of t.state.facet(Pn))if(n=i(t,e),n)break;if(n||0!=e.button||(n=wr(t,e)),n){let i=t.root.activeElement!=t.contentDOM;i&&t.observer.ignore(()=>Oe(t.contentDOM)),t.inputState.startMouseSelection(new tr(t,e,n,i))}};let ur=(t,e)=>t>=e.top&&t<=e.bottom,fr=(t,e,n)=>ur(e,n)&&t>=n.left&&t<=n.right;function dr(t,e,n,i){let r=An.find(t.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(0==o)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&fr(n,i,s))return-1;let l=r.coordsAt(o,1);return l&&fr(n,i,l)?1:s&&ur(i,s)?-1:1}function pr(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:dr(t,n,e.clientX,e.clientY)}}const gr=Ze.ie&&Ze.ie_version<=11;let mr=null,vr=0,yr=0;function br(t){if(!gr)return t.detail;let e=mr,n=yr;return mr=t,yr=Date.now(),vr=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(vr+1)%3:1}function wr(t,e){let n=pr(t,e),i=br(e),r=t.state.selection;return{update(t){t.docChanged&&(n.pos=t.changes.mapPos(n.pos),r=r.map(t.changes))},get(e,o,s){let l=pr(t,e),a=cr(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let e=cr(t,n.pos,n.bias,i),r=Math.min(e.from,a.from),o=Math.max(e.to,a.to);a=r<a.from?W.range(r,o):W.range(o,r)}return o?r.replaceRange(r.main.extend(a.from,a.to)):s&&r.ranges.length>1&&r.ranges.some(t=>t.eq(a))?xr(r,a):s?r.addRange(a):W.create([a])}}}function xr(t,e){for(let n=0;;n++)if(t.ranges[n].eq(e))return W.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}function Sr(t,e,n,i){if(!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:o}=t.inputState,s=i&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,l={from:r,insert:n},a=t.state.changes(s?[s,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(r,-1),head:a.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"})}function kr(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function Cr(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:i}of t.selection.ranges){let o=t.doc.lineAt(i);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:i}}or.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:i}=t.inputState;i&&(i.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")},or.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let i=Array(n.length),r=0,o=()=>{++r==n.length&&Sr(t,e,i.filter(t=>null!=t).join(t.state.lineBreak),!1)};for(let t=0;t<n.length;t++){let e=new FileReader;e.onerror=o,e.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(i[t]=e.result),o()},e.readAsText(n[t])}}else Sr(t,e,e.dataTransfer.getData("Text"),!0)},or.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=lr?null:e.clipboardData;n?(hr(t,n.getData("text/plain")),e.preventDefault()):ar(t)};let Mr=null;function Ar(t){setTimeout(()=>{t.hasFocus!=t.inputState.notifiedFocused&&t.update([])},10)}or.copy=or.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=Cr(t.state);if(!n&&!r)return;Mr=r?n:null;let o=lr?null:e.clipboardData;o?(e.preventDefault(),o.clearData(),o.setData("text/plain",n)):kr(t,n),"cut"!=e.type||t.state.readOnly||t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})},or.focus=t=>{t.inputState.lastFocusTime=Date.now(),t.scrollDOM.scrollTop||!t.inputState.lastScrollTop&&!t.inputState.lastScrollLeft||(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Ar(t)},or.blur=t=>{t.observer.clearSelectionRange(),Ar(t)},or.compositionstart=or.compositionupdate=t=>{null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)},or.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionFirstChange=null,Ze.chrome&&Ze.android&&t.observer.flushSoon(),setTimeout(()=>{t.inputState.composing<0&&t.docView.compositionDeco.size&&t.update([])},50)},or.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()},or.beforeinput=(t,e)=>{var n;let i;if(Ze.chrome&&Ze.android&&(i=Yi.find(t=>t.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),"Backspace"==i.key||"Delete"==i.key)){let e=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout(()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>e+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const Tr=["pre-wrap","normal","pre-line","break-spaces"];class Or{constructor(t){this.lineWrapping=t,this.doc=o.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}heightForLine(t){if(!this.lineWrapping)return this.lineHeight;let e=1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5)));return e*this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return Tr.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let i=t[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(e=!0,this.heightSamples[Math.floor(10*i)]=!0)}return e}refresh(t,e,n,i,r){let o=Tr.indexOf(t)>-1,s=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=e,this.charWidth=n,this.lineLength=i,s){this.heightSamples={};for(let t=0;t<r.length;t++){let e=r[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return s}}class Dr{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class Lr{constructor(t,e,n,i,r){this.from=t,this.length=e,this.top=n,this.height=i,this.type=r}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(t){let e=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new Lr(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var Er=function(t){return t[t["ByPos"]=0]="ByPos",t[t["ByHeight"]=1]="ByHeight",t[t["ByPosNoHeight"]=2]="ByPosNoHeight",t}(Er||(Er={}));const Nr=.001;class Pr{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|-3&this.flags}setHeight(t,e){this.height!=e&&(Math.abs(this.height-e)>Nr&&(t.heightChanged=!0),this.height=e)}replace(t,e,n){return Pr.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,i){let r=this;for(let o=i.length-1;o>=0;o--){let{fromA:s,toA:l,fromB:a,toB:h}=i[o],c=r.lineAt(s,Er.ByPosNoHeight,e,0,0),u=c.to>=l?c:r.lineAt(l,Er.ByPosNoHeight,e,0,0);h+=u.to-l,l=u.to;while(o>0&&c.from<=i[o-1].toA)s=i[o-1].fromA,a=i[o-1].fromB,o--,s<c.from&&(c=r.lineAt(s,Er.ByPosNoHeight,e,0,0));a+=c.from-s,s=c.from;let f=_r.build(n,t,a,h);r=r.replace(s,l,f)}return r.updateHeight(n,0)}static empty(){return new Rr(0,0)}static of(t){if(1==t.length)return t[0];let e=0,n=t.length,i=0,r=0;for(;;)if(e==n)if(i>2*r){let r=t[e-1];r.break?t.splice(--e,1,r.left,null,r.right):t.splice(--e,1,r.left,r.right),n+=1+r.break,i-=r.size}else{if(!(r>2*i))break;{let e=t[n];e.break?t.splice(n,1,e.left,null,e.right):t.splice(n,1,e.left,e.right),n+=2+e.break,r-=e.size}}else if(i<r){let n=t[e++];n&&(i+=n.size)}else{let e=t[--n];e&&(r+=e.size)}let o=0;return null==t[e-1]?(o=1,e--):null==t[e]&&(o=1,n++),new Wr(Pr.of(t.slice(0,e)),o,Pr.of(t.slice(n)))}}Pr.prototype.size=1;class Ir extends Pr{constructor(t,e,n){super(t,e),this.type=n}blockAt(t,e,n,i){return new Lr(i,this.length,n,this.height,this.type)}lineAt(t,e,n,i,r){return this.blockAt(0,n,i,r)}forEachLine(t,e,n,i,r,o){t<=r+this.length&&e>=r&&o(this.blockAt(0,n,i,r))}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more&&this.setHeight(t,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Rr extends Ir{constructor(t,e){super(t,e,yn.Text),this.collapsed=0,this.widgetHeight=0}replace(t,e,n){let i=n[0];return 1==n.length&&(i instanceof Rr||i instanceof Br&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof Br?i=new Rr(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Pr.of(n)}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more?this.setHeight(t,i.heights[i.index++]):(n||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Br extends Pr{constructor(t){super(t,0)}lines(t,e){let n=t.lineAt(e).number,i=t.lineAt(e+this.length).number;return{firstLine:n,lastLine:i,lineHeight:this.height/(i-n+1)}}blockAt(t,e,n,i){let{firstLine:r,lastLine:o,lineHeight:s}=this.lines(e,i),l=Math.max(0,Math.min(o-r,Math.floor((t-n)/s))),{from:a,length:h}=e.line(r+l);return new Lr(a,h,n+s*l,s,yn.Text)}lineAt(t,e,n,i,r){if(e==Er.ByHeight)return this.blockAt(t,n,i,r);if(e==Er.ByPosNoHeight){let{from:e,to:i}=n.lineAt(t);return new Lr(e,i-e,0,0,yn.Text)}let{firstLine:o,lineHeight:s}=this.lines(n,r),{from:l,length:a,number:h}=n.lineAt(t);return new Lr(l,a,i+s*(h-o),s,yn.Text)}forEachLine(t,e,n,i,r,o){let{firstLine:s,lineHeight:l}=this.lines(n,r);for(let a=Math.max(t,r),h=Math.min(r+this.length,e);a<=h;){let e=n.lineAt(a);a==t&&(i+=l*(e.number-s)),o(new Lr(e.from,e.length,i,l,yn.Text)),i+=l,a=e.to+1}}replace(t,e,n){let i=this.length-e;if(i>0){let t=n[n.length-1];t instanceof Br?n[n.length-1]=new Br(t.length+i):n.push(null,new Br(i-1))}if(t>0){let e=n[0];e instanceof Br?n[0]=new Br(t+e.length):n.unshift(new Br(t-1),null)}return Pr.of(n)}decomposeLeft(t,e){e.push(new Br(t-1),null)}decomposeRight(t,e){e.push(null,new Br(this.length-t-1))}updateHeight(t,e=0,n=!1,i){let r=e+this.length;if(i&&i.from<=e+this.length&&i.more){let n=[],o=Math.max(e,i.from),s=-1,l=t.heightChanged;i.from>e&&n.push(new Br(i.from-e-1).updateHeight(t,e));while(o<=r&&i.more){let e=t.doc.lineAt(o).length;n.length&&n.push(null);let r=i.heights[i.index++];-1==s?s=r:Math.abs(r-s)>=Nr&&(s=-2);let l=new Rr(e,r);l.outdated=!1,n.push(l),o+=e+1}o<=r&&n.push(null,new Br(r-o).updateHeight(t,o));let a=Pr.of(n);return t.heightChanged=l||s<0||Math.abs(a.height-this.height)>=Nr||Math.abs(s-this.lines(t.doc,e).lineHeight)>=Nr,a}return(n||this.outdated)&&(this.setHeight(t,t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class Wr extends Pr{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return 1&this.flags}blockAt(t,e,n,i){let r=n+this.left.height;return t<r?this.left.blockAt(t,e,n,i):this.right.blockAt(t,e,r,i+this.left.length+this.break)}lineAt(t,e,n,i,r){let o=i+this.left.height,s=r+this.left.length+this.break,l=e==Er.ByHeight?t<o:t<s,a=l?this.left.lineAt(t,e,n,i,r):this.right.lineAt(t,e,n,o,s);if(this.break||(l?a.to<s:a.from>s))return a;let h=e==Er.ByPosNoHeight?Er.ByPosNoHeight:Er.ByPos;return l?a.join(this.right.lineAt(s,h,n,o,s)):this.left.lineAt(s,h,n,i,r).join(a)}forEachLine(t,e,n,i,r,o){let s=i+this.left.height,l=r+this.left.length+this.break;if(this.break)t<l&&this.left.forEachLine(t,e,n,i,r,o),e>=l&&this.right.forEachLine(t,e,n,s,l,o);else{let a=this.lineAt(l,Er.ByPos,n,i,r);t<a.from&&this.left.forEachLine(t,a.from-1,n,i,r,o),a.to>=t&&a.from<=e&&o(a),e>a.to&&this.right.forEachLine(a.to+1,e,n,s,l,o)}}replace(t,e,n){let i=this.left.length+this.break;if(e<i)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-i,e-i,n));let r=[];t>0&&this.decomposeLeft(t,r);let o=r.length;for(let s of n)r.push(s);if(t>0&&Fr(r,o-1),e<this.length){let t=r.length;this.decomposeRight(e,r),Fr(r,t)}return Pr.of(r)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,i=n+this.break;if(t>=i)return this.right.decomposeRight(t-i,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<i&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?Pr.of(this.break?[t,null,e]:[t,e]):(this.left=t,this.right=e,this.height=t.height+e.height,this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,i){let{left:r,right:o}=this,s=e+r.length+this.break,l=null;return i&&i.from<=e+r.length&&i.more?l=r=r.updateHeight(t,e,n,i):r.updateHeight(t,e,n),i&&i.from<=s+o.length&&i.more?l=o=o.updateHeight(t,s,n,i):o.updateHeight(t,s,n),l?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Fr(t,e){let n,i;null==t[e]&&(n=t[e-1])instanceof Br&&(i=t[e+1])instanceof Br&&t.splice(e-1,3,new Br(n.length+1+i.length))}const Hr=5;class _r{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Rr?n.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new Rr(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0;i<0&&(i=this.oracle.lineHeight);let r=e-t;n.block?this.addBlock(new Ir(r,i,n.type)):(r||i>=Hr)&&this.addLineDeco(i,r)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Rr(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new Br(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Rr)return t;let e=new Rr(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine(),t.type!=yn.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,t.type!=yn.WidgetBefore&&(this.covering=t)}addLineDeco(t,e){let n=this.ensureLine();n.length+=e,n.collapsed+=e,n.widgetHeight=Math.max(n.widgetHeight,t),this.writtenTo=this.pos=this.pos+e}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof Rr||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Rr(0,-1));let n=t;for(let i of this.nodes)i instanceof Rr&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(t,e,n,i){let r=new _r(n,t);return It.spans(e,n,i,r,0),r.finish(n)}}function zr(t,e,n){let i=new Vr;return It.compare(t,e,n,i,0),i.changes}class Vr{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,i){(t<e||n&&n.heightRelevant||i&&i.heightRelevant)&&Mn(t,e,this.changes,5)}}function jr(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,o=Math.max(0,n.left),s=Math.min(r.innerWidth,n.right),l=Math.max(0,n.top),a=Math.min(r.innerHeight,n.bottom);for(let h=t.parentNode;h&&h!=i.body;)if(1==h.nodeType){let e=h,n=window.getComputedStyle(e);if((e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&"visible"!=n.overflow){let n=e.getBoundingClientRect();o=Math.max(o,n.left),s=Math.min(s,n.right),l=Math.max(l,n.top),a=h==t.parentNode?n.bottom:Math.min(a,n.bottom)}h="absolute"==n.position||"fixed"==n.position?e.offsetParent:e.parentNode}else{if(11!=h.nodeType)break;h=h.host}return{left:o-n.left,right:Math.max(o,s)-n.left,top:l-(n.top+e),bottom:Math.max(l,a)-(n.top+e)}}function Ur(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Kr{constructor(t,e,n){this.from=t,this.to=e,this.size=n}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(t){return bn.replace({widget:new Gr(this.size,t)}).range(this.from,this.to)}}class Gr extends vn{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class qr{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=Qr,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ei.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet($n).some(t=>"function"!=typeof t&&"cm-lineWrapping"==t.class);this.heightOracle=new Or(e),this.stateDeco=t.facet(Xn).filter(t=>"function"!=typeof t),this.heightMap=Pr.empty().applyChanges(this.stateDeco,o.empty,this.heightOracle.setDoc(t.doc),[new Qn(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=bn.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let i=n?e.head:e.anchor;if(!t.some(({from:t,to:e})=>i>=t&&i<=e)){let{from:e,to:n}=this.lineBlockAt(i);t.push(new $r(e,n))}}this.viewports=t.sort((t,e)=>t.from-e.from),this.scaler=this.heightMap.height<=7e6?Qr:new to(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,t=>{this.viewportLines.push(1==this.scaler.scale?t:eo(t,this.scaler))})}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Xn).filter(t=>"function"!=typeof t);let i=t.changedRanges,r=Qn.extendWithRanges(i,zr(n,this.stateDeco,t?t.changes:D.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),r),this.heightMap.height!=o&&(t.flags|=2);let s=r.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<s.from||e.range.head>s.to)||!this.viewportIsAppropriate(s))&&(s=this.getViewport(0,e));let l=!t.changes.empty||2&t.flags||s.from!=this.viewport.from||s.to!=this.viewport.to;this.viewport=s,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(Fn)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),i=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?ei.RTL:ei.LTR;let s=this.heightOracle.mustRefreshForWrapping(r),l=s||this.mustMeasureContent||this.contentDOMHeight!=e.clientHeight;this.contentDOMHeight=e.clientHeight,this.mustMeasureContent=!1;let a=0,h=0,c=parseInt(n.paddingTop)||0,u=parseInt(n.paddingBottom)||0;this.paddingTop==c&&this.paddingBottom==u||(this.paddingTop=c,this.paddingBottom=u,a|=10),this.editorWidth!=t.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=t.scrollDOM.clientWidth,a|=8);let f=(this.printing?Ur:jr)(e,this.paddingTop),d=f.top-this.pixelViewport.top,p=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let m=e.clientWidth;if(this.contentDOMWidth==m&&this.editorHeight==t.scrollDOM.clientHeight||(this.contentDOMWidth=m,this.editorHeight=t.scrollDOM.clientHeight,a|=8),l){let e=t.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(e)&&(s=!0),s||i.lineWrapping&&Math.abs(m-this.contentDOMWidth)>i.charWidth){let{lineHeight:n,charWidth:o}=t.docView.measureTextSize();s=n>0&&i.refresh(r,n,o,m/o,e),s&&(t.docView.minWidth=0,a|=8)}d>0&&p>0?h=Math.max(d,p):d<0&&p<0&&(h=Math.min(d,p)),i.heightChanged=!1;for(let n of this.viewports){let r=n.from==this.viewport.from?e:t.docView.measureVisibleLineHeights(n);this.heightMap=(s?Pr.empty().applyChanges(this.stateDeco,o.empty,this.heightOracle,[new Qn(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(i,0,s,new Dr(n.from,r))}i.heightChanged&&(a|=2)}let v=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(this.viewport=this.getViewport(h,this.scrollTarget)),this.updateForViewport(),(2&a||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,t)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),i=this.heightMap,r=this.state.doc,{visibleTop:o,visibleBottom:s}=this,l=new $r(i.lineAt(o-1e3*n,Er.ByHeight,r,0,0).from,i.lineAt(s+1e3*(1-n),Er.ByHeight,r,0,0).to);if(e){let{head:t}=e.range;if(t<l.from||t>l.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=i.lineAt(t,Er.ByPos,r,0,0);n="center"==e.y?(s.top+s.bottom)/2-o/2:"start"==e.y||"nearest"==e.y&&t<l.from?s.top:s.bottom-o,l=new $r(i.lineAt(n-500,Er.ByHeight,r,0,0).from,i.lineAt(n+o+500,Er.ByHeight,r,0,0).to)}}return l}mapViewport(t,e){let n=e.mapPos(t.from,-1),i=e.mapPos(t.to,1);return new $r(this.heightMap.lineAt(n,Er.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(i,Er.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(t,Er.ByPos,this.state.doc,0,0),{bottom:r}=this.heightMap.lineAt(e,Er.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==t||i<=o-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||r>=s+Math.max(10,Math.min(n,250)))&&i>o-2e3&&r<s+2e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let i of t)e.touchesRange(i.from,i.to)||n.push(new Kr(e.mapPos(i.from),e.mapPos(i.to),i.size));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,r=i>>1,o=i<<1;if(this.defaultTextDirection!=ei.LTR&&!n)return[];let s=[],l=(i,o,a,h)=>{if(o-i<r)return;let c=this.state.selection.main,u=[c.from];c.empty||u.push(c.to);for(let t of u)if(t>i&&t<o)return l(i,t-10,a,h),void l(t+10,o,a,h);let f=Zr(t,t=>t.from>=a.from&&t.to<=a.to&&Math.abs(t.from-i)<r&&Math.abs(t.to-o)<r&&!u.some(e=>t.from<e&&t.to>e));if(!f){if(o<a.to&&e&&n&&e.visibleRanges.some(t=>t.from<=o&&t.to>=o)){let t=e.moveToLineBoundary(W.cursor(o),!1,!0).head;t>i&&(o=t)}f=new Kr(i,o,this.gapSize(a,i,o,h))}s.push(f)};for(let a of this.viewportLines){if(a.length<o)continue;let t=Xr(a.from,a.to,this.stateDeco);if(t.total<o)continue;let e,r,s=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let n,o,l=i/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=s){let e=Jr(t,s),i=((this.visibleBottom-this.visibleTop)/2+l)/a.height;n=e-i,o=e+i}else n=(this.visibleTop-a.top-l)/a.height,o=(this.visibleBottom-a.top+l)/a.height;e=Yr(t,n),r=Yr(t,o)}else{let n,o,l=t.total*this.heightOracle.charWidth,a=i*this.heightOracle.charWidth;if(null!=s){let e=Jr(t,s),i=((this.pixelViewport.right-this.pixelViewport.left)/2+a)/l;n=e-i,o=e+i}else n=(this.pixelViewport.left-a)/l,o=(this.pixelViewport.right+a)/l;e=Yr(t,n),r=Yr(t,o)}e>a.from&&l(a.from,e,a,t),r<a.to&&l(r,a.to,a,t)}return s}gapSize(t,e,n,i){let r=Jr(i,n)-Jr(i,e);return this.heightOracle.lineWrapping?t.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(t){Kr.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=bn.set(t.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let e=[];It.spans(t,this.viewport.from,this.viewport.to,{span(t,n){e.push({from:t,to:n})},point(){}},20);let n=e.length!=this.visibleRanges.length||this.visibleRanges.some((t,n)=>t.from!=e[n].from||t.to!=e[n].to);return this.visibleRanges=e,n?4:0}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(e=>e.from<=t&&e.to>=t)||eo(this.heightMap.lineAt(t,Er.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(t){return eo(this.heightMap.lineAt(this.scaler.fromDOM(t),Er.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(t){return eo(this.heightMap.blockAt(this.scaler.fromDOM(t),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class $r{constructor(t,e){this.from=t,this.to=e}}function Xr(t,e,n){let i=[],r=t,o=0;return It.spans(n,t,e,{span(){},point(t,e){t>r&&(i.push({from:r,to:t}),o+=t-r),r=e}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}function Yr({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:t,to:n}=e[r],o=n-t;if(i<=o)return t+i;i-=o}}function Jr(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function Zr(t,e){for(let n of t)if(e(n))return n}const Qr={toDOM(t){return t},fromDOM(t){return t},scale:1};class to{constructor(t,e,n){let i=0,r=0,o=0;this.viewports=n.map(({from:n,to:r})=>{let o=e.lineAt(n,Er.ByPos,t,0,0).top,s=e.lineAt(r,Er.ByPos,t,0,0).bottom;return i+=s-o,{from:n,to:r,top:o,bottom:s,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(e.height-i);for(let s of this.viewports)s.domTop=o+(s.top-r)*this.scale,o=s.domBottom=s.domTop+(s.bottom-s.top),r=s.bottom}toDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.top)return i+(t-n)*this.scale;if(t<=r.bottom)return r.domTop+(t-r.top);n=r.bottom,i=r.domBottom}}fromDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.domTop)return n+(t-i)/this.scale;if(t<=r.domBottom)return r.top+(t-r.domTop);n=r.bottom,i=r.domBottom}}}function eo(t,e){if(1==e.scale)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new Lr(t.from,t.length,n,i-n,Array.isArray(t.type)?t.type.map(t=>eo(t,e)):t.type)}const no=_.define({combine:t=>t.join(" ")}),io=_.define({combine:t=>t.indexOf(!0)>-1}),ro=Qt.newName(),oo=Qt.newName(),so=Qt.newName(),lo={"&light":"."+oo,"&dark":"."+so};function ao(t,e,n){return new Qt(e,{finish(e){return/&/.test(e)?e.replace(/&\w*/,e=>{if("&"==e)return t;if(!n||!n[e])throw new RangeError("Unsupported selector: "+e);return n[e]}):t+" "+e}})}const ho=ao("."+ro,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lo);class co{constructor(t,e,n,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:r,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,n,0))){let e=r||o?[]:po(t),n=new yi(e,t.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=go(e,this.bounds.from)}else{let e=t.observer.selectionRange,n=r&&r.node==e.focusNode&&r.offset==e.focusOffset||!fe(t.contentDOM,e.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(e.focusNode,e.focusOffset),i=o&&o.node==e.anchorNode&&o.offset==e.anchorOffset||!fe(t.contentDOM,e.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(e.anchorNode,e.anchorOffset);this.newSel=W.single(i,n)}}}function uo(t,e){let n,{newSel:i}=e,r=t.state.selection.main;if(e.bounds){let{from:i,to:s}=e.bounds,l=r.from,a=null;(8===t.inputState.lastKeyCode&&t.inputState.lastKeyTime>Date.now()-100||Ze.android&&e.text.length<s-i)&&(l=r.to,a="end");let h=fo(t.state.doc.sliceString(i,s,vi),e.text,l-i,a);h&&(Ze.chrome&&13==t.inputState.lastKeyCode&&h.toB==h.from+2&&e.text.slice(h.from,h.toB)==vi+vi&&h.toB--,n={from:i+h.from,to:i+h.toA,insert:o.of(e.text.slice(h.from,h.toB).split(vi))})}else i&&(!t.hasFocus&&t.state.facet(Vn)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(Ze.mac||Ze.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())?(i&&2==n.insert.length&&(i=W.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:o.of([" "])}):Ze.chrome&&n&&n.from==n.to&&n.from==r.head&&"\n "==n.insert.toString()&&t.lineWrapping&&(i&&(i=W.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:o.of([" "])}),n){let e=t.state;if(Ze.ios&&t.inputState.flushIOSKey(t))return!0;if(Ze.android&&(n.from==r.from&&n.to==r.to&&1==n.insert.length&&2==n.insert.lines&&Le(t.contentDOM,"Enter",13)||n.from==r.from-1&&n.to==r.to&&0==n.insert.length&&Le(t.contentDOM,"Backspace",8)||n.from==r.from&&n.to==r.to+1&&0==n.insert.length&&Le(t.contentDOM,"Delete",46)))return!0;let o,s=n.insert.toString();if(t.state.facet(Bn).some(e=>e(t,n.from,n.to,s)))return!0;if(t.inputState.composing>=0&&t.inputState.composing++,n.from>=r.from&&n.to<=r.to&&n.to-n.from>=(r.to-r.from)/3&&(!i||i.main.empty&&i.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let i=r.from<n.from?e.sliceDoc(r.from,n.from):"",s=r.to>n.to?e.sliceDoc(n.to,r.to):"";o=e.replaceSelection(t.state.toText(i+n.insert.sliceString(0,void 0,t.state.lineBreak)+s))}else{let s=e.changes(n),l=i&&!e.selection.main.eq(i.main)&&i.main.to<=s.newLength?i.main:void 0;if(e.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=r.to&&n.to>=r.to-10){let i=t.state.sliceDoc(n.from,n.to),a=Ci(t)||t.state.doc.lineAt(r.head),h=r.to-n.to,c=r.to-r.from;o=e.changeByRange(o=>{if(o.from==r.from&&o.to==r.to)return{changes:s,range:l||o.map(s)};let u=o.to-h,f=u-i.length;if(o.to-o.from!=c||t.state.sliceDoc(f,u)!=i||a&&o.to>=a.from&&o.from<=a.to)return{range:o};let d=e.changes({from:f,to:u,insert:n.insert}),p=o.to-r.to;return{changes:d,range:l?W.range(Math.max(0,l.anchor+p),Math.max(0,l.head+p)):o.map(d)}})}else o={changes:s,selection:l&&e.selection.replaceRange(l)}}let l="input.type";return t.composing&&(l+=".compose",t.inputState.compositionFirstChange&&(l+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(o,{scrollIntoView:!0,userEvent:l}),!0}if(i&&!i.main.eq(r)){let e=!1,n="select";return t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(e=!0),n=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:e,userEvent:n}),!0}return!1}function fo(t,e,n,i){let r=Math.min(t.length,e.length),o=0;while(o<r&&t.charCodeAt(o)==e.charCodeAt(o))o++;if(o==r&&t.length==e.length)return null;let s=t.length,l=e.length;while(s>0&&l>0&&t.charCodeAt(s-1)==e.charCodeAt(l-1))s--,l--;if("end"==i){let t=Math.max(0,o-Math.min(s,l));n-=s+t-o}if(s<o&&t.length<e.length){let t=n<=o&&n>=s?o-n:0;o-=t,l=o+(l-s),s=o}else if(l<o){let t=n<=o&&n>=l?o-n:0;o-=t,s=o+(s-l),l=o}return{from:o,toA:s,toB:l}}function po(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new wi(n,i)),r==n&&o==i||e.push(new wi(r,o))),e}function go(t,e){if(0==t.length)return null;let n=t[0].pos,i=2==t.length?t[1].pos:n;return n>-1&&i>-1?W.single(n+e,i+e):null}const mo={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},vo=Ze.ie&&Ze.ie_version<=11;class yo{constructor(t){this.view=t,this.active=!1,this.selectionRange=new Me,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(e=>{for(let t of e)this.queue.push(t);(Ze.ie&&Ze.ie_version<=11||Ze.ios&&t.composing)&&e.some(t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length)?this.flushSoon():this.flush()}),vo&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(t.contentDOM)),this.addWindowListeners(this.win=t.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runScrollHandlers(this.view,t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((e,n)=>e!=t[n]))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(Vn)?n.root.activeElement!=this.dom:!pe(n.dom,i))return;let r=i.anchorNode&&n.docView.nearest(i.anchorNode);r&&r.ignoreEvent(t)?e||(this.selectionChanged=!1):(Ze.ie&&Ze.ie_version<=11||Ze.android&&Ze.chrome)&&!n.state.selection.main.empty&&i.focusNode&&me(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=Ze.safari&&11==t.root.nodeType&&de(this.dom.ownerDocument)==this.dom&&wo(this.view)||ue(t.root);if(!e||this.selectionRange.eq(e))return!1;let n=pe(this.dom,e);return n&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&Pe(this.dom,e)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(e),n&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,mo),vo&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),vo&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;if(!this.delayedAndroidKey){let t=()=>{let t=this.delayedAndroidKey;t&&(this.clearDelayedAndroidKey(),!this.flush()&&t.force&&Le(this.dom,t.key,t.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(t)}this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let t=this.queue;for(let r of this.observer.takeRecords())t.push(r);t.length&&(this.queue=[]);let e=-1,n=-1,i=!1;for(let r of t){let t=this.readMutation(r);t&&(t.typeOver&&(i=!0),-1==e?({from:e,to:n}=t):(e=Math.min(t.from,e),n=Math.max(t.to,n)))}return{from:e,to:n,typeOver:i}}readChange(){let{from:t,to:e,typeOver:n}=this.processRecords(),i=this.selectionChanged&&pe(this.dom,this.selectionRange);return t<0&&!i?null:(t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new co(this.view,t,e,n))}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return!1;let n=this.view.state,i=uo(this.view,e);return this.view.state==n&&this.view.update([]),i}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.dirty|=4),"childList"==t.type){let n=bo(e,t.previousSibling||t.target.previousSibling,-1),i=bo(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:i?e.posBefore(i):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var t,e,n,i;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect(),null===(i=this.resizeContent)||void 0===i||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function bo(t,e,n){while(e){let i=Be.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function wo(t){let e=null;function n(t){t.preventDefault(),t.stopImmediatePropagation(),e=t.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let i=e.startContainer,r=e.startOffset,o=e.endContainer,s=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return me(l.node,l.offset,o,s)&&([i,r,o,s]=[o,s,i,r]),{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:s}}class xo{constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=t.root||Ee(t.parent)||document,this.viewState=new qr(t.state||Dt.create(t)),this.plugins=this.state.facet(Un).map(t=>new Gn(t));for(let e of this.plugins)e.update(this);this.observer=new yo(this),this.inputState=new Xi(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new xi(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...t){this._dispatch(1==t.length&&t[0]instanceof gt?t[0]:this.state.update(...t))}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e,n=!1,i=!1,r=this.state;for(let a of t){if(a.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=a.state}if(this.destroyed)return void(this.viewState.state=r);let o=this.observer.delayedAndroidKey,s=null;if(o?(this.observer.clearDelayedAndroidKey(),s=this.observer.readChange(),(s&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(s=null)):this.observer.clear(),r.facet(Dt.phrases)!=this.state.facet(Dt.phrases))return this.setState(r);e=ti.create(this,r,t);let l=this.viewState.scrollTarget;try{this.updateState=2;for(let e of t){if(l&&(l=l.map(e.changes)),e.scrollIntoView){let{main:t}=e.state.selection;l=new Hn(t.empty?t:W.cursor(t.head,t.head>t.anchor?-1:1))}for(let t of e.effects)t.is(_n)&&(l=t.value)}this.viewState.update(e,l),this.bidiCache=Co.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),n=this.docView.update(e),this.state.facet(Zn)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some(t=>t.isUserEvent("select.pointer")))}finally{this.updateState=0}if(e.startState.facet(no)!=e.state.facet(no)&&(this.viewState.mustMeasureContent=!0),(n||i||l||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!e.empty)for(let a of this.state.facet(Rn))a(e);s&&!uo(this,s)&&o.force&&Le(this.contentDOM,o.key,o.keyCode)}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let e=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new qr(t),this.plugins=t.facet(Un).map(t=>new Gn(t)),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView=new xi(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(Un),n=t.state.facet(Un);if(e!=n){let i=[];for(let r of n){let n=e.indexOf(r);if(n<0)i.push(new Gn(r));else{let e=this.plugins[n];e.mustUpdate=t,i.push(e)}}for(let e of this.plugins)e.mustUpdate!=t&&e.destroy(this);this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let i of this.plugins)i.mustUpdate=t;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this)}measure(t=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,{scrollHeight:n,scrollTop:i,clientHeight:r}=this.scrollDOM,o=i>n-r-4?n:i;try{for(let t=0;;t++){this.updateState=1;let n=this.viewport,i=this.viewState.lineBlockAtHeight(o),r=this.viewState.measure(this);if(!r&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(t>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let l=[];4&r||([this.measureRequests,l]=[l,this.measureRequests]);let a=l.map(t=>{try{return t.read(this)}catch(e){return zn(this.state,e),ko}}),h=ti.create(this,this.state,[]),c=!1,u=!1;h.flags|=r,e?e.flags|=r:e=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),c=this.docView.update(h));for(let t=0;t<l.length;t++)if(a[t]!=ko)try{let e=l[t];e.write&&e.write(a[t],this)}catch(s){zn(this.state,s)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,u=!0;else{let t=this.viewState.lineBlockAt(i.from).top-i.top;(t>1||t<-1)&&(this.scrollDOM.scrollTop+=t,u=!0)}if(c&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!u&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let l of this.state.facet(Rn))l(e)}get themeClasses(){return ro+" "+(this.state.facet(io)?so:oo)+" "+this.state.facet(no)}updateAttrs(){let t=Mo(this,qn,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Vn)?"true":"false",class:"cm-content",style:`${Ze.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),Mo(this,$n,e);let n=this.observer.ignore(()=>{let n=mn(this.contentDOM,this.contentAttrs,e),i=mn(this.dom,this.editorAttrs,t);return n||i});return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let t of n.effects)if(t.is(xo.announce)){e&&(this.announceDOM.textContent=""),e=!1;let n=this.announceDOM.appendChild(document.createElement("div"));n.textContent=t.value}}mountStyles(){this.styleModules=this.state.facet(Zn),Qt.mount(this.root,this.styleModules.concat(ho).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find(e=>e.spec==t)||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return $i(this,t,Ki(this,t,e,n))}moveByGroup(t,e){return $i(this,t,Ki(this,t,e,e=>Gi(this,t.head,e)))}moveToLineBoundary(t,e,n=!0){return Ui(this,t,e,n)}moveVertically(t,e,n){return $i(this,t,qi(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),_i(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(t),r=this.bidiSpans(i),o=r[ui.find(r,t-i.from,-1,e)];return xe(n,o.dir==ei.LTR==e>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){let e=this.state.facet(Wn);return!e||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>So)return pi(t.length);let e=this.textDirectionAt(t.from);for(let i of this.bidiCache)if(i.from==t.from&&i.dir==e)return i.order;let n=di(t.text,e);return this.bidiCache.push(new Co(t.from,t.to,e,n)),n}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||Ze.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Oe(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return _n.of(new Hn("number"==typeof t?W.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}static domEventHandlers(t){return Kn.define(()=>({}),{eventHandlers:t})}static theme(t,e){let n=Qt.newName(),i=[no.of(n),Zn.of(ao("."+n,t))];return e&&e.dark&&i.push(io.of(!0)),i}static baseTheme(t){return Y.lowest(Zn.of(ao("."+ro,t,lo)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),i=n&&Be.get(n)||Be.get(t);return(null===(e=null===i||void 0===i?void 0:i.rootView)||void 0===e?void 0:e.view)||null}}xo.styleModule=Zn,xo.inputHandler=Bn,xo.perLineTextDirection=Wn,xo.exceptionSink=In,xo.updateListener=Rn,xo.editable=Vn,xo.mouseSelectionStyle=Pn,xo.dragMovesSelection=Nn,xo.clickAddsSelectionRange=En,xo.decorations=Xn,xo.atomicRanges=Yn,xo.scrollMargins=Jn,xo.darkTheme=io,xo.contentAttributes=$n,xo.editorAttributes=qn,xo.lineWrapping=xo.contentAttributes.of({class:"cm-lineWrapping"}),xo.announce=pt.define();const So=4096,ko={};class Co{constructor(t,e,n,i){this.from=t,this.to=e,this.dir=n,this.order=i}static update(t,e){if(e.empty)return t;let n=[],i=t.length?t[t.length-1].dir:ei.LTR;for(let r=Math.max(0,t.length-10);r<t.length;r++){let o=t[r];o.dir!=i||e.touchesRange(o.from,o.to)||n.push(new Co(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.order))}return n}}function Mo(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let e=i[r],o="function"==typeof e?e(t):e;o&&pn(o,n)}return n}const Ao=Ze.mac?"mac":Ze.windows?"win":Ze.linux?"linux":"key";function To(t,e){const n=t.split(/-(?!$)/);let i,r,o,s,l=n[n.length-1];"Space"==l&&(l=" ");for(let a=0;a<n.length-1;++a){const t=n[a];if(/^(cmd|meta|m)$/i.test(t))s=!0;else if(/^a(lt)?$/i.test(t))i=!0;else if(/^(c|ctrl|control)$/i.test(t))r=!0;else if(/^s(hift)?$/i.test(t))o=!0;else{if(!/^mod$/i.test(t))throw new Error("Unrecognized modifier name: "+t);"mac"==e?s=!0:r=!0}}return i&&(l="Alt-"+l),r&&(l="Ctrl-"+l),s&&(l="Meta-"+l),o&&(l="Shift-"+l),l}function Oo(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}const Do=Y.default(xo.domEventHandlers({keydown(t,e){return Bo(No(e.state),t,e,"editor")}})),Lo=_.define({enables:Do}),Eo=new WeakMap;function No(t){let e=t.facet(Lo),n=Eo.get(e);return n||Eo.set(e,n=Ro(e.reduce((t,e)=>t.concat(e),[]))),n}let Po=null;const Io=4e3;function Ro(t,e=Ao){let n=Object.create(null),i=Object.create(null),r=(t,e)=>{let n=i[t];if(null==n)i[t]=e;else if(n!=e)throw new Error("Key binding "+t+" is used both as a regular binding and as a multi-stroke prefix")},o=(t,i,o,s)=>{var l,a;let h=n[t]||(n[t]=Object.create(null)),c=i.split(/ (?!$)/).map(t=>To(t,e));for(let e=1;e<c.length;e++){let n=c.slice(0,e).join(" ");r(n,!0),h[n]||(h[n]={preventDefault:!0,run:[e=>{let i=Po={view:e,prefix:n,scope:t};return setTimeout(()=>{Po==i&&(Po=null)},Io),!0}]})}let u=c.join(" ");r(u,!1);let f=h[u]||(h[u]={preventDefault:!1,run:(null===(a=null===(l=h._any)||void 0===l?void 0:l.run)||void 0===a?void 0:a.slice())||[]});o&&f.run.push(o),s&&(f.preventDefault=!0)};for(let s of t){let t=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let e of t){let t=n[e]||(n[e]=Object.create(null));t._any||(t._any={preventDefault:!1,run:[]});for(let e in t)t[e].run.push(s.any)}let i=s[e]||s.key;if(i)for(let e of t)o(e,i,s.run,s.preventDefault),s.shift&&o(e,"Shift-"+i,s.shift,s.preventDefault)}return n}function Bo(t,e,n,i){let r=ce(e),o=C(r,0),s=M(o)==r.length&&" "!=r,l="",a=!1;Po&&Po.view==n&&Po.scope==i&&(l=Po.prefix+" ",(a=Zi.indexOf(e.keyCode)<0)&&(Po=null));let h,c,u=new Set,f=t=>{if(t){for(let i of t.run)if(!u.has(i)&&(u.add(i),i(n,e)))return!0;t.preventDefault&&(a=!0)}return!1},d=t[i];if(d){if(f(d[l+Oo(r,e,!s)]))return!0;if(s&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ze.windows&&e.ctrlKey&&e.altKey)&&(h=ne[e.keyCode])&&h!=r){if(f(d[l+Oo(h,e,!0)]))return!0;if(e.shiftKey&&(c=ie[e.keyCode])!=r&&c!=h&&f(d[l+Oo(c,e,!1)]))return!0}else if(s&&e.shiftKey&&f(d[l+Oo(r,e,!0)]))return!0;if(f(d._any))return!0}return a}const Wo=!Ze.ios;const Fo={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Wo&&(Fo[".cm-line"].caretColor="transparent !important");class Ho extends vn{constructor(t){super(),this.content=t}toDOM(){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content),"string"==typeof this.content?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}ignoreEvent(){return!1}}function _o(t){return Kn.fromClass(class{constructor(e){this.view=e,this.placeholder=bn.set([bn.widget({widget:new Ho(t),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?bn.none:this.placeholder}},{decorations:t=>t.decorations})}class zo extends Lt{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}zo.prototype.elementClass="",zo.prototype.toDOM=void 0,zo.prototype.mapMode=T.TrackBefore,zo.prototype.startSide=zo.prototype.endSide=-1,zo.prototype.point=!0;const Vo=1024;let jo=0;class Uo{constructor(t,e){this.from=t,this.to=e}}class Ko{constructor(t={}){this.id=jo++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof t&&(t=qo.match(t)),e=>{let n=t(e);return void 0===n?null:[this,n]}}}Ko.closedBy=new Ko({deserialize:t=>t.split(" ")}),Ko.openedBy=new Ko({deserialize:t=>t.split(" ")}),Ko.group=new Ko({deserialize:t=>t.split(" ")}),Ko.contextHash=new Ko({perNode:!0}),Ko.lookAhead=new Ko({perNode:!0}),Ko.mounted=new Ko({perNode:!0});const Go=Object.create(null);class qo{constructor(t,e,n,i=0){this.name=t,this.props=e,this.id=n,this.flags=i}static define(t){let e=t.props&&t.props.length?Object.create(null):Go,n=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(null==t.name?8:0),i=new qo(t.name||"",e,t.id,n);if(t.props)for(let r of t.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[r[0].id]=r[1]}return i}prop(t){return this.props[t.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(t){if("string"==typeof t){if(this.name==t)return!0;let e=this.prop(Ko.group);return!!e&&e.indexOf(t)>-1}return this.id==t}static match(t){let e=Object.create(null);for(let n in t)for(let i of n.split(" "))e[i]=t[n];return t=>{for(let n=t.prop(Ko.group),i=-1;i<(n?n.length:0);i++){let r=e[i<0?t.name:n[i]];if(r)return r}}}}qo.none=new qo("",Object.create(null),0,8);const $o=new WeakMap,Xo=new WeakMap;var Yo;(function(t){t[t["ExcludeBuffers"]=1]="ExcludeBuffers",t[t["IncludeAnonymous"]=2]="IncludeAnonymous",t[t["IgnoreMounts"]=4]="IgnoreMounts",t[t["IgnoreOverlays"]=8]="IgnoreOverlays"})(Yo||(Yo={}));class Jo{constructor(t,e,n,i,r){if(this.type=t,this.children=e,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[t,e]of r)this.props["number"==typeof t?t:t.id]=e}}toString(){let t=this.prop(Ko.mounted);if(t&&!t.overlay)return t.tree.toString();let e="";for(let n of this.children){let t=n.toString();t&&(e&&(e+=","),e+=t)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new as(this.topNode,t)}cursorAt(t,e=0,n=0){let i=$o.get(this)||this.topNode,r=new as(i);return r.moveTo(t,e),$o.set(this,r._tree),r}get topNode(){return new is(this,0,0,null)}resolve(t,e=0){let n=ns($o.get(this)||this.topNode,t,e,!1);return $o.set(this,n),n}resolveInner(t,e=0){let n=ns(Xo.get(this)||this.topNode,t,e,!0);return Xo.set(this,n),n}iterate(t){let{enter:e,leave:n,from:i=0,to:r=this.length}=t;for(let o=this.cursor((t.mode||0)|Yo.IncludeAnonymous);;){let t=!1;if(o.from<=r&&o.to>=i&&(o.type.isAnonymous||!1!==e(o))){if(o.firstChild())continue;t=!0}for(;;){if(t&&n&&!o.type.isAnonymous&&n(o),o.nextSibling())break;if(!o.parent())return;t=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:ds(qo.none,this.children,this.positions,0,this.children.length,0,this.length,(t,e,n)=>new Jo(this.type,t,e,n,this.propValues),t.makeTree||((t,e,n)=>new Jo(qo.none,t,e,n)))}static build(t){return cs(t)}}Jo.empty=new Jo(qo.none,[],[],0);class Zo{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Zo(this.buffer,this.index)}}class Qo{constructor(t,e,n){this.buffer=t,this.length=e,this.set=n}get type(){return qo.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],n=this.buffer[t+3],i=this.set.types[e],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),t+=4,n==t)return r;let o=[];while(t<n)o.push(this.childString(t)),t=this.buffer[t+3];return r+"("+o.join(",")+")"}findChild(t,e,n,i,r){let{buffer:o}=this,s=-1;for(let l=t;l!=e;l=o[l+3])if(ts(r,i,o[l+1],o[l+2])&&(s=l,n>0))break;return s}slice(t,e,n){let i=this.buffer,r=new Uint16Array(e-t),o=0;for(let s=t,l=0;s<e;){r[l++]=i[s++],r[l++]=i[s++]-n;let e=r[l++]=i[s++]-n;r[l++]=i[s++]-t,o=Math.max(o,e)}return new Qo(r,o,this.set)}}function ts(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function es(t,e){let n=t.childBefore(e);while(n){let e=n.lastChild;if(!e||e.to!=n.to)break;e.type.isError&&e.from==e.to?(t=n,n=e.prevSibling):n=e}return t}function ns(t,e,n,i){var r;while(t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e)){let e=!i&&t instanceof is&&t.index<0?null:t.parent;if(!e)return t;t=e}let o=i?0:Yo.IgnoreOverlays;if(i)for(let s=t,l=s.parent;l;s=l,l=s.parent)s instanceof is&&s.index<0&&(null===(r=l.enter(e,n,o))||void 0===r?void 0:r.from)!=s.from&&(t=l);for(;;){let i=t.enter(e,n,o);if(!i)return t;t=i}}class is{constructor(t,e,n,i){this._tree=t,this.from=e,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,n,i,r=0){for(let o=this;;){for(let{children:s,positions:l}=o._tree,a=e>0?s.length:-1;t!=a;t+=e){let a=s[t],h=l[t]+o.from;if(ts(i,n,h,h+a.length))if(a instanceof Qo){if(r&Yo.ExcludeBuffers)continue;let s=a.findChild(0,a.buffer.length,e,n-h,i);if(s>-1)return new ls(new ss(o,a,t,h),null,s)}else if(r&Yo.IncludeAnonymous||!a.type.isAnonymous||hs(a)){let s;if(!(r&Yo.IgnoreMounts)&&a.props&&(s=a.prop(Ko.mounted))&&!s.overlay)return new is(s.tree,h,t,o);let l=new is(a,h,t,o);return r&Yo.IncludeAnonymous||!l.type.isAnonymous?l:l.nextChild(e<0?a.children.length-1:0,e,n,i)}}if(r&Yo.IncludeAnonymous||!o.type.isAnonymous)return null;if(t=o.index>=0?o.index+e:e<0?-1:o._parent._tree.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e,n=0){let i;if(!(n&Yo.IgnoreOverlays)&&(i=this._tree.prop(Ko.mounted))&&i.overlay){let n=t-this.from;for(let{from:t,to:r}of i.overlay)if((e>0?t<=n:t<n)&&(e<0?r>=n:r>n))return new is(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,n)}nextSignificantParent(){let t=this;while(t.type.isAnonymous&&t._parent)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(t=0){return new as(this,t)}get tree(){return this._tree}toTree(){return this._tree}resolve(t,e=0){return ns(this,t,e,!1)}resolveInner(t,e=0){return ns(this,t,e,!0)}enterUnfinishedNodesBefore(t){return es(this,t)}getChild(t,e=null,n=null){let i=rs(this,t,e,n);return i.length?i[0]:null}getChildren(t,e=null,n=null){return rs(this,t,e,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(t){return os(this,t)}}function rs(t,e,n,i){let r=t.cursor(),o=[];if(!r.firstChild())return o;if(null!=n)while(!r.type.is(n))if(!r.nextSibling())return o;for(;;){if(null!=i&&r.type.is(i))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return null==i?o:[]}}function os(t,e,n=e.length-1){for(let i=t.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class ss{constructor(t,e,n,i){this.parent=t,this.buffer=e,this.index=n,this.start=i}}class ls{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,n){this.context=t,this._parent=e,this.index=n,this.type=t.buffer.set.types[t.buffer.buffer[n]]}child(t,e,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],t,e-this.context.start,n);return r<0?null:new ls(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e,n=0){if(n&Yo.ExcludeBuffers)return null;let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return r<0?null:new ls(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new ls(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new ls(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}cursor(t=0){return new as(this,t)}get tree(){return null}toTree(){let t=[],e=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let o=n.buffer[this.index+1];t.push(n.slice(i,r,o)),e.push(0)}return new Jo(this.type,t,e,this.to-this.from)}resolve(t,e=0){return ns(this,t,e,!1)}resolveInner(t,e=0){return ns(this,t,e,!0)}enterUnfinishedNodesBefore(t){return es(this,t)}toString(){return this.context.buffer.childString(this.index)}getChild(t,e=null,n=null){let i=rs(this,t,e,n);return i.length?i[0]:null}getChildren(t,e=null,n=null){return rs(this,t,e,n)}get node(){return this}matchContext(t){return os(this,t)}}class as{get name(){return this.type.name}constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof is)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let e=t._parent;e;e=e._parent)this.stack.unshift(e.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return!!t&&(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0)}yieldBuf(t,e){this.index=t;let{start:n,buffer:i}=this.buffer;return this.type=e||i.set.types[i.buffer[t]],this.from=n+i.buffer[t+1],this.to=n+i.buffer[t+2],!0}yield(t){return!!t&&(t instanceof is?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,n){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],t,e-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,n=this.mode){return this.buffer?!(n&Yo.ExcludeBuffers)&&this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Yo.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&Yo.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode));let{buffer:e}=this.buffer,n=this.stack.length-1;if(t<0){let t=n<0?0:this.stack[n]+4;if(this.index!=t)return this.yieldBuf(e.findChild(t,this.index,-1,0,4))}else{let t=e.buffer[this.index+3];if(t<(n<0?e.buffer.length:e.buffer[this.stack[n]+3]))return this.yieldBuf(t)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,n,{buffer:i}=this;if(i){if(t>0){if(this.index<i.buffer.buffer.length)return!1}else for(let t=0;t<this.index;t++)if(i.buffer.buffer[t+3]<this.index)return!1;({index:e,parent:n}=i)}else({index:e,_parent:n}=this._tree);for(;n;({index:e,_parent:n}=n))if(e>-1)for(let i=e+t,r=t<0?-1:n._tree.children.length;i!=r;i+=t){let t=n._tree.children[i];if(this.mode&Yo.IncludeAnonymous||t instanceof Qo||!t.type.isAnonymous||hs(t))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){while(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))if(!this.parent())break;while(this.enterChild(1,t,e));return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,n=0;if(t&&t.context==this.buffer)t:for(let i=this.index,r=this.stack.length;r>=0;){for(let o=t;o;o=o._parent)if(o.index==i){if(i==this.index)return o;e=o,n=r+1;break t}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)e=new ls(this.buffer,e,this.stack[i]);return this.bufferNode=new ls(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let n=0;;){let i=!1;if(this.type.isAnonymous||!1!==t(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&e&&e(this),i=this.type.isAnonymous,this.nextSibling())break;if(!n)return;this.parent(),n--,i=!0}}}matchContext(t){if(!this.buffer)return os(this.node,t);let{buffer:e}=this.buffer,{types:n}=e.set;for(let i=t.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return os(this.node,t,i);let o=n[e.buffer[this.stack[r]]];if(!o.isAnonymous){if(t[i]&&t[i]!=o.name)return!1;i--}}return!0}}function hs(t){return t.children.some(t=>t instanceof Qo||!t.type.isAnonymous||hs(t))}function cs(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=Vo,reused:o=[],minRepeatType:s=i.types.length}=t,l=Array.isArray(n)?new Zo(n,n.length):n,a=i.types,h=0,c=0;function u(t,e,n,v,y){let{id:b,start:w,end:x,size:S}=l,k=c;while(S<0){if(l.next(),-1==S){let e=o[b];return n.push(e),void v.push(w-t)}if(-3==S)return void(h=b);if(-4==S)return void(c=b);throw new RangeError("Unrecognized record size: "+S)}let C,M,A=a[b],T=w-t;if(x-w<=r&&(M=g(l.pos-e,y))){let e=new Uint16Array(M.size-M.skip),n=l.pos-M.size,r=e.length;while(l.pos>n)r=m(M.start,e,r);C=new Qo(e,x-M.start,i),T=M.start-t}else{let t=l.pos-S;l.next();let e=[],n=[],i=b>=s?b:-1,o=0,a=x;while(l.pos>t)i>=0&&l.id==i&&l.size>=0?(l.end<=a-r&&(d(e,n,w,o,l.end,a,i,k),o=e.length,a=l.end),l.next()):u(w,t,e,n,i);if(i>=0&&o>0&&o<e.length&&d(e,n,w,o,w,a,i,k),e.reverse(),n.reverse(),i>-1&&o>0){let t=f(A);C=ds(A,e,n,0,e.length,0,x-w,t,t)}else C=p(A,e,n,x-w,k-x)}n.push(C),v.push(T)}function f(t){return(e,n,i)=>{let r,o,s=0,l=e.length-1;if(l>=0&&(r=e[l])instanceof Jo){if(!l&&r.type==t&&r.length==i)return r;(o=r.prop(Ko.lookAhead))&&(s=n[l]+r.length+o)}return p(t,e,n,i,s)}}function d(t,e,n,r,o,s,l,a){let h=[],c=[];while(t.length>r)h.push(t.pop()),c.push(e.pop()+n-o);t.push(p(i.types[l],h,c,s-o,a-s)),e.push(o-n)}function p(t,e,n,i,r=0,o){if(h){let t=[Ko.contextHash,h];o=o?[t].concat(o):[t]}if(r>25){let t=[Ko.lookAhead,r];o=o?[t].concat(o):[t]}return new Jo(t,e,n,i,o)}function g(t,e){let n=l.fork(),i=0,o=0,a=0,h=n.end-r,c={size:0,start:0,skip:0};t:for(let r=n.pos-t;n.pos>r;){let t=n.size;if(n.id==e&&t>=0){c.size=i,c.start=o,c.skip=a,a+=4,i+=4,n.next();continue}let l=n.pos-t;if(t<0||l<r||n.start<h)break;let u=n.id>=s?4:0,f=n.start;n.next();while(n.pos>l){if(n.size<0){if(-3!=n.size)break t;u+=4}else n.id>=s&&(u+=4);n.next()}o=f,i+=t,a+=u}return(e<0||i==t)&&(c.size=i,c.start=o,c.skip=a),c.size>4?c:void 0}function m(t,e,n){let{id:i,start:r,end:o,size:a}=l;if(l.next(),a>=0&&i<s){let s=n;if(a>4){let i=l.pos-(a-4);while(l.pos>i)n=m(t,e,n)}e[--n]=s,e[--n]=o-t,e[--n]=r-t,e[--n]=i}else-3==a?h=i:-4==a&&(c=i);return n}let v=[],y=[];while(l.pos>0)u(t.start||0,t.bufferStart||0,v,y,-1);let b=null!==(e=t.length)&&void 0!==e?e:v.length?y[0]+v[0].length:0;return new Jo(a[t.topID],v.reverse(),y.reverse(),b)}const us=new WeakMap;function fs(t,e){if(!t.isAnonymous||e instanceof Qo||e.type!=t)return 1;let n=us.get(e);if(null==n){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof Jo)){n=1;break}n+=fs(t,i)}us.set(e,n)}return n}function ds(t,e,n,i,r,o,s,l,a){let h=0;for(let p=i;p<r;p++)h+=fs(t,e[p]);let c=Math.ceil(1.5*h/8),u=[],f=[];function d(e,n,i,r,s){for(let l=i;l<r;){let i=l,h=n[l],p=fs(t,e[l]);for(l++;l<r;l++){let n=fs(t,e[l]);if(p+n>=c)break;p+=n}if(l==i+1){if(p>c){let t=e[i];d(t.children,t.positions,0,t.children.length,n[i]+s);continue}u.push(e[i])}else{let r=n[l-1]+e[l-1].length-h;u.push(ds(t,e,n,i,l,h,r,null,a))}f.push(h+s-o)}}return d(e,n,i,r,0),(l||a)(u,f,s)}class ps{constructor(t,e,n,i,r=!1,o=!1){this.from=t,this.to=e,this.tree=n,this.offset=i,this.open=(r?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(t,e=[],n=!1){let i=[new ps(0,t.length,t,0,!1,n)];for(let r of e)r.to>t.length&&i.push(r);return i}static applyChanges(t,e,n=128){if(!e.length)return t;let i=[],r=1,o=t.length?t[0]:null;for(let s=0,l=0,a=0;;s++){let h=s<e.length?e[s]:null,c=h?h.fromA:1e9;if(c-l>=n)while(o&&o.from<c){let e=o;if(l>=e.from||c<=e.to||a){let t=Math.max(e.from,l)-a,n=Math.min(e.to,c)-a;e=t>=n?null:new ps(t,n,e.tree,e.offset+a,s>0,!!h)}if(e&&i.push(e),o.to>c)break;o=r<t.length?t[r++]:null}if(!h)break;l=h.toA,a=h.toA-h.toB}return i}}class gs{startParse(t,e,n){return"string"==typeof t&&(t=new ms(t)),n=n?n.length?n.map(t=>new Uo(t.from,t.to)):[new Uo(0,0)]:[new Uo(0,t.length)],this.createParse(t,e||[],n)}parse(t,e,n){let i=this.startParse(t,e,n);for(;;){let t=i.advance();if(t)return t}}}class ms{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}new Ko({perNode:!0});let vs=0;class ys{constructor(t,e,n){this.set=t,this.base=e,this.modified=n,this.id=vs++}static define(t){if(null===t||void 0===t?void 0:t.base)throw new Error("Can not derive from a modified tag");let e=new ys([],null,[]);if(e.set.push(e),t)for(let n of t.set)e.set.push(n);return e}static defineModifier(){let t=new ws;return e=>e.modified.indexOf(t)>-1?e:ws.get(e.base||e,e.modified.concat(t).sort((t,e)=>t.id-e.id))}}let bs=0;class ws{constructor(){this.instances=[],this.id=bs++}static get(t,e){if(!e.length)return t;let n=e[0].instances.find(n=>n.base==t&&xs(e,n.modified));if(n)return n;let i=[],r=new ys(i,t,e);for(let s of e)s.instances.push(r);let o=Ss(e);for(let s of t.set)if(!s.modified.length)for(let t of o)i.push(ws.get(s,t));return r}}function xs(t,e){return t.length==e.length&&t.every((t,n)=>t==e[n])}function Ss(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((t,e)=>e.length-t.length)}function ks(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let t of n.split(" "))if(t){let n=[],r=2,o=t;for(let e=0;;){if("..."==o&&e>0&&e+3==t.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!i)throw new RangeError("Invalid path: "+t);if(n.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),e+=i[0].length,e==t.length)break;let s=t[e++];if(e==t.length&&"!"==s){r=0;break}if("/"!=s)throw new RangeError("Invalid path: "+t);o=t.slice(e)}let s=n.length-1,l=n[s];if(!l)throw new RangeError("Invalid path: "+t);let a=new Ms(i,r,s>0?n.slice(0,s):null);e[l]=a.sort(e[l])}}return Cs.add(e)}const Cs=new Ko;class Ms{constructor(t,e,n,i){this.tags=t,this.mode=e,this.context=n,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}function As(t,e){let n=Object.create(null);for(let o of t)if(Array.isArray(o.tag))for(let t of o.tag)n[t.id]=o.class;else n[o.tag.id]=o.class;let{scope:i,all:r=null}=e||{};return{style:t=>{let e=r;for(let i of t)for(let t of i.set){let i=n[t.id];if(i){e=e?e+" "+i:i;break}}return e},scope:i}}Ms.empty=new Ms([],2,null);const Ts=ys.define,Os=Ts(),Ds=Ts(),Ls=Ts(Ds),Es=Ts(Ds),Ns=Ts(),Ps=Ts(Ns),Is=Ts(Ns),Rs=Ts(),Bs=Ts(Rs),Ws=Ts(),Fs=Ts(),Hs=Ts(),_s=Ts(Hs),zs=Ts(),Vs={comment:Os,lineComment:Ts(Os),blockComment:Ts(Os),docComment:Ts(Os),name:Ds,variableName:Ts(Ds),typeName:Ls,tagName:Ts(Ls),propertyName:Es,attributeName:Ts(Es),className:Ts(Ds),labelName:Ts(Ds),namespace:Ts(Ds),macroName:Ts(Ds),literal:Ns,string:Ps,docString:Ts(Ps),character:Ts(Ps),attributeValue:Ts(Ps),number:Is,integer:Ts(Is),float:Ts(Is),bool:Ts(Ns),regexp:Ts(Ns),escape:Ts(Ns),color:Ts(Ns),url:Ts(Ns),keyword:Ws,self:Ts(Ws),null:Ts(Ws),atom:Ts(Ws),unit:Ts(Ws),modifier:Ts(Ws),operatorKeyword:Ts(Ws),controlKeyword:Ts(Ws),definitionKeyword:Ts(Ws),moduleKeyword:Ts(Ws),operator:Fs,derefOperator:Ts(Fs),arithmeticOperator:Ts(Fs),logicOperator:Ts(Fs),bitwiseOperator:Ts(Fs),compareOperator:Ts(Fs),updateOperator:Ts(Fs),definitionOperator:Ts(Fs),typeOperator:Ts(Fs),controlOperator:Ts(Fs),punctuation:Hs,separator:Ts(Hs),bracket:_s,angleBracket:Ts(_s),squareBracket:Ts(_s),paren:Ts(_s),brace:Ts(_s),content:Rs,heading:Bs,heading1:Ts(Bs),heading2:Ts(Bs),heading3:Ts(Bs),heading4:Ts(Bs),heading5:Ts(Bs),heading6:Ts(Bs),contentSeparator:Ts(Rs),list:Ts(Rs),quote:Ts(Rs),emphasis:Ts(Rs),strong:Ts(Rs),link:Ts(Rs),monospace:Ts(Rs),strikethrough:Ts(Rs),inserted:Ts(),deleted:Ts(),changed:Ts(),invalid:Ts(),meta:zs,documentMeta:Ts(zs),annotation:Ts(zs),processingInstruction:Ts(zs),definition:ys.defineModifier(),constant:ys.defineModifier(),function:ys.defineModifier(),standard:ys.defineModifier(),local:ys.defineModifier(),special:ys.defineModifier()};As([{tag:Vs.link,class:"tok-link"},{tag:Vs.heading,class:"tok-heading"},{tag:Vs.emphasis,class:"tok-emphasis"},{tag:Vs.strong,class:"tok-strong"},{tag:Vs.keyword,class:"tok-keyword"},{tag:Vs.atom,class:"tok-atom"},{tag:Vs.bool,class:"tok-bool"},{tag:Vs.url,class:"tok-url"},{tag:Vs.labelName,class:"tok-labelName"},{tag:Vs.inserted,class:"tok-inserted"},{tag:Vs.deleted,class:"tok-deleted"},{tag:Vs.literal,class:"tok-literal"},{tag:Vs.string,class:"tok-string"},{tag:Vs.number,class:"tok-number"},{tag:[Vs.regexp,Vs.escape,Vs.special(Vs.string)],class:"tok-string2"},{tag:Vs.variableName,class:"tok-variableName"},{tag:Vs.local(Vs.variableName),class:"tok-variableName tok-local"},{tag:Vs.definition(Vs.variableName),class:"tok-variableName tok-definition"},{tag:Vs.special(Vs.variableName),class:"tok-variableName2"},{tag:Vs.definition(Vs.propertyName),class:"tok-propertyName tok-definition"},{tag:Vs.typeName,class:"tok-typeName"},{tag:Vs.namespace,class:"tok-namespace"},{tag:Vs.className,class:"tok-className"},{tag:Vs.macroName,class:"tok-macroName"},{tag:Vs.propertyName,class:"tok-propertyName"},{tag:Vs.operator,class:"tok-operator"},{tag:Vs.comment,class:"tok-comment"},{tag:Vs.meta,class:"tok-meta"},{tag:Vs.invalid,class:"tok-invalid"},{tag:Vs.punctuation,class:"tok-punctuation"}]);var js;const Us=new Ko;class Ks{constructor(t,e,n=[],i=""){this.data=t,this.name=i,Dt.prototype.hasOwnProperty("tree")||Object.defineProperty(Dt.prototype,"tree",{get(){return qs(this)}}),this.parser=e,this.extension=[nl.of(this),Dt.languageData.of((t,e,n)=>t.facet(Gs(t,e,n)))].concat(n)}isActiveAt(t,e,n=-1){return Gs(t,e,n)==this.data}findRegions(t){let e=t.facet(nl);if((null===e||void 0===e?void 0:e.data)==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let n=[],i=(t,e)=>{if(t.prop(Us)==this.data)return void n.push({from:e,to:e+t.length});let r=t.prop(Ko.mounted);if(r){if(r.tree.prop(Us)==this.data){if(r.overlay)for(let t of r.overlay)n.push({from:t.from+e,to:t.to+e});else n.push({from:e,to:e+t.length});return}if(r.overlay){let t=n.length;if(i(r.tree,r.overlay[0].from+e),n.length>t)return}}for(let n=0;n<t.children.length;n++){let r=t.children[n];r instanceof Jo&&i(r,t.positions[n]+e)}};return i(qs(t),0),n}get allowsNesting(){return!0}}function Gs(t,e,n){let i=t.facet(nl);if(!i)return null;let r=i.data;if(i.allowsNesting)for(let o=qs(t).topNode;o;o=o.enter(e,n,Yo.ExcludeBuffers))r=o.type.prop(Us)||r;return r}Ks.setState=pt.define();function qs(t){let e=t.field(Ks.state,!1);return e?e.tree:Jo.empty}class $s{constructor(t,e=t.length){this.doc=t,this.length=e,this.cursorPos=0,this.string="",this.cursor=t.iter()}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let n=this.cursorPos-this.string.length;return t<n||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-n,e-n)}}let Xs=null;class Ys{constructor(t,e,n=[],i,r,o,s,l){this.parser=t,this.state=e,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=o,this.skipped=s,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(t,e,n){return new Ys(t,e,[],Jo.empty,0,n,[],null)}startParse(){return this.parser.startParse(new $s(this.state.doc),this.fragments)}work(t,e){return null!=e&&e>=this.state.doc.length&&(e=void 0),this.tree!=Jo.empty&&this.isDone(null!==e&&void 0!==e?e:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if("number"==typeof t){let e=Date.now()+t;t=()=>Date.now()>e}for(this.parse||(this.parse=this.startParse()),null!=e&&(null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(ps.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(null!==e&&void 0!==e?e:this.state.doc.length)))return!0;this.parse=this.startParse()}if(t())return!1}})}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{while(!(e=this.parse.advance()));}),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(ps.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=Xs;Xs=this;try{return t()}finally{Xs=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=Js(t,e.from,e.to);return t}changes(t,e){let{fragments:n,tree:i,treeLen:r,viewport:o,skipped:s}=this;if(this.takeTree(),!t.empty){let e=[];if(t.iterChangedRanges((t,n,i,r)=>e.push({fromA:t,toA:n,fromB:i,toB:r})),n=ps.applyChanges(n,e),i=Jo.empty,r=0,o={from:t.mapPos(o.from,-1),to:t.mapPos(o.to,1)},this.skipped.length){s=[];for(let e of this.skipped){let n=t.mapPos(e.from,1),i=t.mapPos(e.to,-1);n<i&&s.push({from:n,to:i})}}}return new Ys(this.parser,e,n,i,r,o,s,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:e,to:i}=this.skipped[n];e<t.to&&i>t.from&&(this.fragments=Js(this.fragments,e,i),this.skipped.splice(n--,1))}return!(this.skipped.length>=e)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends gs{createParse(e,n,i){let r=i[0].from,o=i[i.length-1].to,s={parsedPos:r,advance(){let e=Xs;if(e){for(let t of i)e.tempSkipped.push(t);t&&(e.scheduleOn=e.scheduleOn?Promise.all([e.scheduleOn,t]):t)}return this.parsedPos=o,new Jo(qo.none,[],[],o-r)},stoppedAt:null,stopAt(){}};return s}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&0==e[0].from&&e[0].to>=t}static get(){return Xs}}function Js(t,e,n){return ps.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Zs{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),n=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,n)||e.takeTree(),new Zs(e)}static init(t){let e=Math.min(3e3,t.doc.length),n=Ys.create(t.facet(nl).parser,t,{from:0,to:e});return n.work(20,e)||n.takeTree(),new Zs(n)}}Ks.state=q.define({create:Zs.init,update(t,e){for(let n of e.effects)if(n.is(Ks.setState))return n.value;return e.startState.facet(nl)!=e.state.facet(nl)?Zs.init(e.state):t.apply(e)}});let Qs=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};"undefined"!=typeof requestIdleCallback&&(Qs=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const tl="undefined"!=typeof navigator&&(null===(js=navigator.scheduling)||void 0===js?void 0:js.isInputPending)?()=>navigator.scheduling.isInputPending():null,el=Kn.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(Ks.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),t.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(Ks.state);e.tree==e.context.tree&&e.context.isDone(t.doc.length)||(this.working=Qs(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,r=n.field(Ks.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,t&&!tl?Math.max(25,t.timeRemaining()-5):1e9),s=r.context.treeLen<i&&n.doc.length>i+1e3,l=r.context.work(()=>tl&&tl()||Date.now()>o,i+(s?0:1e5));this.chunkBudget-=Date.now()-e,(l||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:Ks.setState.of(new Zs(r.context))})),this.chunkBudget>0&&(!l||s)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(t=>zn(this.view.state,t)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),nl=_.define({combine(t){return t.length?t[0]:null},enables:t=>[Ks.state,el,xo.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});const il=_.define({combine:t=>{if(!t.length)return"  ";if(!/^(?: +|\t+)$/.test(t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return t[0]}});function rl(t){let e=t.facet(il);return 9==e.charCodeAt(0)?t.tabSize*e.length:e.length}function ol(t,e){let n="",i=t.tabSize;if(9==t.facet(il).charCodeAt(0))while(e>=i)n+="\t",e-=i;for(let r=0;r<e;r++)n+=" ";return n}class sl{constructor(t,e){let n;function i(t){let e=Qt.newName();return(n||(n=Object.create(null)))["."+e]=t,e}this.specs=t;const r="string"==typeof e.all?e.all:e.all?i(e.all):void 0,o=e.scope;this.scope=o instanceof Ks?t=>t.prop(Us)==o.data:o?t=>t==o:void 0,this.style=As(t.map(t=>({tag:t.tag,class:t.class||i(Object.assign({},t,{tag:null}))})),{all:r}).style,this.module=n?new Qt(n):null,this.themeType=e.themeType}static define(t,e){return new sl(t,e||{})}}Vs.meta,Vs.link,Vs.heading,Vs.emphasis,Vs.strong,Vs.strikethrough,Vs.keyword,Vs.atom,Vs.bool,Vs.url,Vs.contentSeparator,Vs.labelName,Vs.literal,Vs.inserted,Vs.string,Vs.deleted,Vs.regexp,Vs.escape,Vs.string,Vs.variableName,Vs.variableName,Vs.typeName,Vs.namespace,Vs.className,Vs.variableName,Vs.macroName,Vs.propertyName,Vs.comment,Vs.invalid;const ll=Object.create(null),al=[qo.none],hl=[],cl=Object.create(null);for(let[Yl,Jl]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])cl[Yl]=fl(ll,Jl);function ul(t,e){hl.indexOf(t)>-1||(hl.push(t),console.warn(e))}function fl(t,e){let n=null;for(let o of e.split(".")){let e=t[o]||Vs[o];e?"function"==typeof e?n?n=e(n):ul(o,`Modifier ${o} used at start of tag`):n?ul(o,`Tag ${o} used as modifier`):n=e:ul(o,"Unknown highlighting tag "+o)}if(!n)return 0;let i=e.replace(/ /g,"_"),r=qo.define({id:al.length,name:i,props:[ks({[i]:n})]});return al.push(r),r.id}const dl=ut.define(),pl=_.define();class gl{constructor(t,e,n,i,r){this.changes=t,this.effects=e,this.mapped=n,this.startSelection=i,this.selectionsAfter=r}setSelAfter(t){return new gl(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,e,n;return{changes:null===(t=this.changes)||void 0===t?void 0:t.toJSON(),mapped:null===(e=this.mapped)||void 0===e?void 0:e.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(t=>t.toJSON())}}static fromJSON(t){return new gl(t.changes&&D.fromJSON(t.changes),[],t.mapped&&O.fromJSON(t.mapped),t.startSelection&&W.fromJSON(t.startSelection),t.selectionsAfter.map(W.fromJSON))}static fromTransaction(t,e){let n=wl;for(let i of t.startState.facet(pl)){let e=i(t);e.length&&(n=n.concat(e))}return!n.length&&t.changes.empty?null:new gl(t.changes.invert(t.startState.doc),n,void 0,e||t.startState.selection,wl)}static selection(t){return new gl(void 0,wl,void 0,void 0,t)}}function ml(t,e,n,i){let r=e+1>n+20?e-n-1:0,o=t.slice(r,e);return o.push(i),o}function vl(t,e){let n=[],i=!1;return t.iterChangedRanges((t,e)=>n.push(t,e)),e.iterChangedRanges((t,e,r,o)=>{for(let s=0;s<n.length;){let t=n[s++],e=n[s++];o>=t&&r<=e&&(i=!0)}}),i}function yl(t,e){return t.ranges.length==e.ranges.length&&0===t.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length}function bl(t,e){return t.length?e.length?t.concat(e):t:e}const wl=[],xl=200;function Sl(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-xl));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),ml(t,t.length-1,1e9,n.setSelAfter(i)))}return[gl.selection([e])]}function kl(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Cl(t,e){if(!t.length)return t;let n=t.length,i=wl;while(n){let r=Ml(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let e=t.slice(0,n);return e[n-1]=r,e}e=r.mapped,n--,i=r.selectionsAfter}return i.length?[gl.selection(i)]:wl}function Ml(t,e,n){let i=bl(t.selectionsAfter.length?t.selectionsAfter.map(t=>t.map(e)):wl,n);if(!t.changes)return gl.selection(i);let r=t.changes.map(e),o=e.mapDesc(t.changes,!0),s=t.mapped?t.mapped.composeDesc(o):o;return new gl(r,pt.mapEffects(t.effects,e),s,t.startSelection.map(o),i)}const Al=/^(input\.type|delete)($|\.)/;class Tl{constructor(t,e,n=0,i){this.done=t,this.undone=e,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new Tl(this.done,this.undone):this}addChanges(t,e,n,i,r){let o=this.done,s=o[o.length-1];return o=s&&s.changes&&!s.changes.empty&&t.changes&&(!n||Al.test(n))&&(!s.selectionsAfter.length&&e-this.prevTime<i&&vl(s.changes,t.changes)||"input.type.compose"==n)?ml(o,o.length-1,r,new gl(t.changes.compose(s.changes),bl(t.effects,s.effects),s.mapped,s.startSelection,wl)):ml(o,o.length,r,t),new Tl(o,wl,e,n)}addSelection(t,e,n,i){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:wl;return r.length>0&&e-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&yl(r[r.length-1],t)?this:new Tl(Sl(this.done,t),this.undone,e,n)}addMapping(t){return new Tl(Cl(this.done,t),Cl(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,n){let i=0==t?this.done:this.undone;if(0==i.length)return null;let r=i[i.length-1];if(n&&r.selectionsAfter.length)return e.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:dl.of({side:t,rest:kl(i)}),userEvent:0==t?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let n=1==i.length?wl:i.slice(0,i.length-1);return r.mapped&&(n=Cl(n,r.mapped)),e.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:dl.of({side:t,rest:n}),filter:!1,userEvent:0==t?"undo":"redo",scrollIntoView:!0})}return null}}Tl.empty=new Tl(wl,wl);function Ol(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let s=i.from;s<=i.to;){let o=t.doc.lineAt(s);o.number>n&&(i.empty||i.to>o.from)&&(e(o,r,i),n=o.number),s=o.to+1}let o=t.changes(r);return{changes:r,range:W.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const Dl=({state:t,dispatch:e})=>!t.readOnly&&(e(t.update(Ol(t,(e,n)=>{n.push({from:e.from,insert:t.facet(il)})}),{userEvent:"input.indent"})),!0),Ll=({state:t,dispatch:e})=>!t.readOnly&&(e(t.update(Ol(t,(e,n)=>{let i=/^\s*/.exec(e.text)[0];if(!i)return;let r=qt(i,t.tabSize),o=0,s=ol(t,Math.max(0,r-rl(t)));while(o<i.length&&o<s.length&&i.charCodeAt(o)==s.charCodeAt(o))o++;n.push({from:e.from+o,to:e.from+i.length,insert:s.slice(o)})}),{userEvent:"delete.dedent"})),!0),El={key:"Tab",run:Dl,shift:Ll};n.d(e,"a",(function(){return $l}));
/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/
var Nl,Pl=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[r["basicSetup"]]}),Il=Symbol("vue-codemirror-global-config"),Rl=function(t){var e=t.onUpdate,n=t.onChange,i=t.onFocus,r=t.onBlur,o=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["onUpdate","onChange","onFocus","onBlur"]);return Dt.create({doc:o.doc,selection:o.selection,extensions:(Array.isArray(o.extensions)?o.extensions:[o.extensions]).concat([xo.updateListener.of((function(t){e(t),t.docChanged&&n(t.state.doc.toString(),t),t.focusChanged&&(t.view.hasFocus?i(t):r(t))}))])})},Bl=function(t){var e=new Z;return{compartment:e,run:function(n){e.get(t.state)?t.dispatch({effects:e.reconfigure(n)}):t.dispatch({effects:pt.appendConfig.of(e.of(n))})}}},Wl=function(t,e){var n=Bl(t),i=n.compartment,r=n.run;return function(n){var o=i.get(t.state);r((null!=n?n:o!==e)?e:[])}},Fl={type:Boolean,default:void 0},Hl={autofocus:Fl,disabled:Fl,indentWithTab:Fl,tabSize:Number,placeholder:String,style:Object,autoDestroy:Fl,phrases:Object,root:Object,extensions:Array,selection:Object},_l={modelValue:{type:String,default:""}},zl=Object.assign(Object.assign({},Hl),_l);!function(t){t.Change="change",t.Update="update",t.Focus="focus",t.Blur="blur",t.Ready="ready",t.ModelUpdate="update:modelValue"}(Nl||(Nl={}));var Vl={};Vl[Nl.Change]=function(t,e){return!0},Vl[Nl.Update]=function(t){return!0},Vl[Nl.Focus]=function(t){return!0},Vl[Nl.Blur]=function(t){return!0},Vl[Nl.Ready]=function(t){return!0};var jl={};jl[Nl.ModelUpdate]=Vl[Nl.Change];var Ul=Object.assign(Object.assign({},Vl),jl),Kl=Object(i["defineComponent"])({name:"VueCodemirror",props:Object.assign({},zl),emits:Object.assign({},Ul),setup:function(t,e){var n=Object(i["shallowRef"])(),r=Object(i["shallowRef"])(),o=Object(i["shallowRef"])(),s=Object.assign(Object.assign({},Pl),Object(i["inject"])(Il,{})),l=Object(i["computed"])((function(){var e={};return Object.keys(Object(i["toRaw"])(t)).forEach((function(n){var i;"modelValue"!==n&&(e[n]=null!==(i=t[n])&&void 0!==i?i:s[n])})),e}));return Object(i["onMounted"])((function(){var a;r.value=Rl({doc:t.modelValue,selection:l.value.selection,extensions:null!==(a=s.extensions)&&void 0!==a?a:[],onFocus:function(t){return e.emit(Nl.Focus,t)},onBlur:function(t){return e.emit(Nl.Blur,t)},onUpdate:function(t){return e.emit(Nl.Update,t)},onChange:function(n,i){n!==t.modelValue&&(e.emit(Nl.Change,n,i),e.emit(Nl.ModelUpdate,n,i))}}),o.value=function(t){return new xo(Object.assign({},t))}({state:r.value,parent:n.value,root:l.value.root});var h=function(t){var e=function(){return t.state.doc.toString()},n=Bl(t).run,i=Wl(t,[xo.editable.of(!1),Dt.readOnly.of(!0)]),r=Wl(t,Lo.of([El])),o=Bl(t).run,s=Bl(t).run,l=Bl(t).run,a=Bl(t).run;return{focus:function(){return t.focus()},getDoc:e,setDoc:function(n){n!==e()&&t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n}})},reExtensions:n,toggleDisabled:i,toggleIndentWithTab:r,setTabSize:function(t){o([Dt.tabSize.of(t),il.of(" ".repeat(t))])},setPhrases:function(t){s([Dt.phrases.of(t)])},setPlaceholder:function(t){l(_o(t))},setStyle:function(t){void 0===t&&(t={}),a(xo.theme({"&":Object.assign({},t)}))}}}(o.value);Object(i["watch"])((function(){return t.modelValue}),(function(t){t!==h.getDoc()&&h.setDoc(t)})),Object(i["watch"])((function(){return t.extensions}),(function(t){return h.reExtensions(t||[])}),{immediate:!0}),Object(i["watch"])((function(){return l.value.disabled}),(function(t){return h.toggleDisabled(t)}),{immediate:!0}),Object(i["watch"])((function(){return l.value.indentWithTab}),(function(t){return h.toggleIndentWithTab(t)}),{immediate:!0}),Object(i["watch"])((function(){return l.value.tabSize}),(function(t){return h.setTabSize(t)}),{immediate:!0}),Object(i["watch"])((function(){return l.value.phrases}),(function(t){return h.setPhrases(t||{})}),{immediate:!0}),Object(i["watch"])((function(){return l.value.placeholder}),(function(t){return h.setPlaceholder(t)}),{immediate:!0}),Object(i["watch"])((function(){return l.value.style}),(function(t){return h.setStyle(t)}),{immediate:!0}),l.value.autofocus&&h.focus(),e.emit(Nl.Ready,{state:r.value,view:o.value,container:n.value})})),Object(i["onBeforeUnmount"])((function(){l.value.autoDestroy&&o.value&&function(t){t.destroy()}(o.value)})),function(){return Object(i["h"])("div",{class:"v-codemirror",style:{display:"contents"},ref:n})}}}),Gl=Kl,ql=function(t,e){t.component(Kl.name,Kl),t.component("Codemirror",Kl),function(t,e){t.provide(Il,e)}(t,e)},$l={Codemirror:Gl,install:ql}},"3c65":function(t,e,n){"use strict";var i=n("23e7"),r=n("7b0b"),o=n("07fa"),s=n("3a34"),l=n("083a"),a=n("3511"),h=1!==[].unshift(0),c=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}}();i({target:"Array",proto:!0,arity:1,forced:h||c},{unshift:function(t){var e=r(this),n=o(e),i=arguments.length;if(i){a(n+i);var h=n;while(h--){var c=h+i;h in e?e[c]=e[h]:l(e,c)}for(var u=0;u<i;u++)e[u]=arguments[u]}return s(e,n+i)}})},"3e8f":function(t,e){},4603:function(t,e,n){"use strict";
/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(){return o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o.apply(this,arguments)}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){r(t,e,n[e])}))}return t}function l(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}function a(t,e){if(null==t)return{};var n,i,r=l(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function h(t){return c(t)||u(t)||f()}function c(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function u(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}n.r(e),n.d(e,"MultiDrag",(function(){return Fe})),n.d(e,"Sortable",(function(){return Zt})),n.d(e,"Swap",(function(){return Ae}));var d="1.10.2";function p(t){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var g=p(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),m=p(/Edge/i),v=p(/firefox/i),y=p(/safari/i)&&!p(/chrome/i)&&!p(/android/i),b=p(/iP(ad|od|hone)/i),w=p(/chrome/i)&&p(/android/i),x={capture:!1,passive:!1};function S(t,e,n){t.addEventListener(e,n,!g&&x)}function k(t,e,n){t.removeEventListener(e,n,!g&&x)}function C(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(n){return!1}return!1}}function M(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function A(t,e,n,i){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&C(t,e):C(t,e))||i&&t===n)return t;if(t===n)break}while(t=M(t))}return null}var T,O=/\s+/g;function D(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(O," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(O," ")}}function L(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||-1!==e.indexOf("webkit")||(e="-webkit-"+e),i[e]=n+("string"===typeof n?"":"px")}}function E(t,e){var n="";if("string"===typeof t)n=t;else do{var i=L(t,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function N(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function P(){var t=document.scrollingElement;return t||document.documentElement}function I(t,e,n,i,r){if(t.getBoundingClientRect||t===window){var o,s,l,a,h,c,u;if(t!==window&&t!==P()?(o=t.getBoundingClientRect(),s=o.top,l=o.left,a=o.bottom,h=o.right,c=o.height,u=o.width):(s=0,l=0,a=window.innerHeight,h=window.innerWidth,c=window.innerHeight,u=window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!g))do{if(r&&r.getBoundingClientRect&&("none"!==L(r,"transform")||n&&"static"!==L(r,"position"))){var f=r.getBoundingClientRect();s-=f.top+parseInt(L(r,"border-top-width")),l-=f.left+parseInt(L(r,"border-left-width")),a=s+o.height,h=l+o.width;break}}while(r=r.parentNode);if(i&&t!==window){var d=E(r||t),p=d&&d.a,m=d&&d.d;d&&(s/=m,l/=p,u/=p,c/=m,a=s+c,h=l+u)}return{top:s,left:l,bottom:a,right:h,width:u,height:c}}}function R(t,e,n){var i=z(t,!0),r=I(t)[e];while(i){var o=I(i)[n],s=void 0;if(s="top"===n||"left"===n?r>=o:r<=o,!s)return i;if(i===P())break;i=z(i,!1)}return!1}function B(t,e,n){var i=0,r=0,o=t.children;while(r<o.length){if("none"!==o[r].style.display&&o[r]!==Zt.ghost&&o[r]!==Zt.dragged&&A(o[r],n.draggable,t,!1)){if(i===e)return o[r];i++}r++}return null}function W(t,e){var n=t.lastElementChild;while(n&&(n===Zt.ghost||"none"===L(n,"display")||e&&!C(n,e)))n=n.previousElementSibling;return n||null}function F(t,e){var n=0;if(!t||!t.parentNode)return-1;while(t=t.previousElementSibling)"TEMPLATE"===t.nodeName.toUpperCase()||t===Zt.clone||e&&!C(t,e)||n++;return n}function H(t){var e=0,n=0,i=P();if(t)do{var r=E(t),o=r.a,s=r.d;e+=t.scrollLeft*o,n+=t.scrollTop*s}while(t!==i&&(t=t.parentNode));return[e,n]}function _(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n);return-1}function z(t,e){if(!t||!t.getBoundingClientRect)return P();var n=t,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=L(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return P();if(i||e)return n;i=!0}}}while(n=n.parentNode);return P()}function V(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function j(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function U(t,e){return function(){if(!T){var n=arguments,i=this;1===n.length?t.call(i,n[0]):t.apply(i,n),T=setTimeout((function(){T=void 0}),e)}}}function K(){clearTimeout(T),T=void 0}function G(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function q(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function $(t,e){L(t,"position","absolute"),L(t,"top",e.top),L(t,"left",e.left),L(t,"width",e.width),L(t,"height",e.height)}function X(t){L(t,"position",""),L(t,"top",""),L(t,"left",""),L(t,"width",""),L(t,"height","")}var Y="Sortable"+(new Date).getTime();function J(){var t,e=[];return{captureAnimationState:function(){if(e=[],this.options.animation){var t=[].slice.call(this.el.children);t.forEach((function(t){if("none"!==L(t,"display")&&t!==Zt.ghost){e.push({target:t,rect:I(t)});var n=s({},e[e.length-1].rect);if(t.thisAnimationDuration){var i=E(t,!0);i&&(n.top-=i.f,n.left-=i.e)}t.fromRect=n}}))}},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(_(e,{target:t}),1)},animateAll:function(n){var i=this;if(!this.options.animation)return clearTimeout(t),void("function"===typeof n&&n());var r=!1,o=0;e.forEach((function(t){var e=0,n=t.target,s=n.fromRect,l=I(n),a=n.prevFromRect,h=n.prevToRect,c=t.rect,u=E(n,!0);u&&(l.top-=u.f,l.left-=u.e),n.toRect=l,n.thisAnimationDuration&&j(a,l)&&!j(s,l)&&(c.top-l.top)/(c.left-l.left)===(s.top-l.top)/(s.left-l.left)&&(e=Q(c,a,h,i.options)),j(l,s)||(n.prevFromRect=s,n.prevToRect=l,e||(e=i.options.animation),i.animate(n,c,l,e)),e&&(r=!0,o=Math.max(o,e),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),e),n.thisAnimationDuration=e)})),clearTimeout(t),r?t=setTimeout((function(){"function"===typeof n&&n()}),o):"function"===typeof n&&n(),e=[]},animate:function(t,e,n,i){if(i){L(t,"transition",""),L(t,"transform","");var r=E(this.el),o=r&&r.a,s=r&&r.d,l=(e.left-n.left)/(o||1),a=(e.top-n.top)/(s||1);t.animatingX=!!l,t.animatingY=!!a,L(t,"transform","translate3d("+l+"px,"+a+"px,0)"),Z(t),L(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),L(t,"transform","translate3d(0,0,0)"),"number"===typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){L(t,"transition",""),L(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),i)}}}}function Z(t){return t.offsetWidth}function Q(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var tt=[],et={initializeByDefault:!0},nt={mount:function(t){for(var e in et)et.hasOwnProperty(e)&&!(e in t)&&(t[e]=et[e]);tt.push(t)},pluginEvent:function(t,e,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var r=t+"Global";tt.forEach((function(i){e[i.pluginName]&&(e[i.pluginName][r]&&e[i.pluginName][r](s({sortable:e},n)),e.options[i.pluginName]&&e[i.pluginName][t]&&e[i.pluginName][t](s({sortable:e},n)))}))},initializePlugins:function(t,e,n,i){for(var r in tt.forEach((function(i){var r=i.pluginName;if(t.options[r]||i.initializeByDefault){var s=new i(t,e,t.options);s.sortable=t,s.options=t.options,t[r]=s,o(n,s.defaults)}})),t.options)if(t.options.hasOwnProperty(r)){var s=this.modifyOption(t,r,t.options[r]);"undefined"!==typeof s&&(t.options[r]=s)}},getEventProperties:function(t,e){var n={};return tt.forEach((function(i){"function"===typeof i.eventProperties&&o(n,i.eventProperties.call(e[i.pluginName],t))})),n},modifyOption:function(t,e,n){var i;return tt.forEach((function(r){t[r.pluginName]&&r.optionListeners&&"function"===typeof r.optionListeners[e]&&(i=r.optionListeners[e].call(t[r.pluginName],n))})),i}};function it(t){var e=t.sortable,n=t.rootEl,i=t.name,r=t.targetEl,o=t.cloneEl,l=t.toEl,a=t.fromEl,h=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,f=t.newDraggableIndex,d=t.originalEvent,p=t.putSortable,v=t.extraEventProperties;if(e=e||n&&n[Y],e){var y,b=e.options,w="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||g||m?(y=document.createEvent("Event"),y.initEvent(i,!0,!0)):y=new CustomEvent(i,{bubbles:!0,cancelable:!0}),y.to=l||n,y.from=a||n,y.item=r||n,y.clone=o,y.oldIndex=h,y.newIndex=c,y.oldDraggableIndex=u,y.newDraggableIndex=f,y.originalEvent=d,y.pullMode=p?p.lastPutMode:void 0;var x=s({},v,nt.getEventProperties(i,e));for(var S in x)y[S]=x[S];n&&n.dispatchEvent(y),b[w]&&b[w].call(e,y)}}var rt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,r=a(n,["evt"]);nt.pluginEvent.bind(Zt)(t,e,s({dragEl:st,parentEl:lt,ghostEl:at,rootEl:ht,nextEl:ct,lastDownEl:ut,cloneEl:ft,cloneHidden:dt,dragStarted:At,putSortable:bt,activeSortable:Zt.active,originalEvent:i,oldIndex:pt,oldDraggableIndex:mt,newIndex:gt,newDraggableIndex:vt,hideGhostForTarget:$t,unhideGhostForTarget:Xt,cloneNowHidden:function(){dt=!0},cloneNowShown:function(){dt=!1},dispatchSortableEvent:function(t){ot({sortable:e,name:t,originalEvent:i})}},r))};function ot(t){it(s({putSortable:bt,cloneEl:ft,targetEl:st,rootEl:ht,oldIndex:pt,oldDraggableIndex:mt,newIndex:gt,newDraggableIndex:vt},t))}var st,lt,at,ht,ct,ut,ft,dt,pt,gt,mt,vt,yt,bt,wt,xt,St,kt,Ct,Mt,At,Tt,Ot,Dt,Lt,Et=!1,Nt=!1,Pt=[],It=!1,Rt=!1,Bt=[],Wt=!1,Ft=[],Ht="undefined"!==typeof document,_t=b,zt=m||g?"cssFloat":"float",Vt=Ht&&!w&&!b&&"draggable"in document.createElement("div"),jt=function(){if(Ht){if(g)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Ut=function(t,e){var n=L(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=B(t,0,e),o=B(t,1,e),s=r&&L(r),l=o&&L(o),a=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+I(r).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+I(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s["float"]&&"none"!==s["float"]){var c="left"===s["float"]?"left":"right";return!o||"both"!==l.clear&&l.clear!==c?"horizontal":"vertical"}return r&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||a>=i&&"none"===n[zt]||o&&"none"===n[zt]&&a+h>i)?"vertical":"horizontal"},Kt=function(t,e,n){var i=n?t.left:t.top,r=n?t.right:t.bottom,o=n?t.width:t.height,s=n?e.left:e.top,l=n?e.right:e.bottom,a=n?e.width:e.height;return i===s||r===l||i+o/2===s+a/2},Gt=function(t,e){var n;return Pt.some((function(i){if(!W(i)){var r=I(i),o=i[Y].options.emptyInsertThreshold,s=t>=r.left-o&&t<=r.right+o,l=e>=r.top-o&&e<=r.bottom+o;return o&&s&&l?n=i:void 0}})),n},qt=function(t){function e(t,n){return function(i,r,o,s){var l=i.options.group.name&&r.options.group.name&&i.options.group.name===r.options.group.name;if(null==t&&(n||l))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"===typeof t)return e(t(i,r,o,s),n)(i,r,o,s);var a=(n?i:r).options.group.name;return!0===t||"string"===typeof t&&t===a||t.join&&t.indexOf(a)>-1}}var n={},r=t.group;r&&"object"==i(r)||(r={name:r}),n.name=r.name,n.checkPull=e(r.pull,!0),n.checkPut=e(r.put),n.revertClone=r.revertClone,t.group=n},$t=function(){!jt&&at&&L(at,"display","none")},Xt=function(){!jt&&at&&L(at,"display","")};Ht&&document.addEventListener("click",(function(t){if(Nt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Nt=!1,!1}),!0);var Yt=function(t){if(st){t=t.touches?t.touches[0]:t;var e=Gt(t.clientX,t.clientY);if(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[Y]._onDragOver(n)}}},Jt=function(t){st&&st.parentNode[Y]._isOutsideThisEl(t.target)};function Zt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=o({},e),t[Y]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ut(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Zt.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var i in nt.initializePlugins(this,t,n),n)!(i in e)&&(e[i]=n[i]);for(var r in qt(e),this)"_"===r.charAt(0)&&"function"===typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&Vt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?S(t,"pointerdown",this._onTapStart):(S(t,"mousedown",this._onTapStart),S(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(S(t,"dragover",this),S(t,"dragenter",this)),Pt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),o(this,J())}function Qt(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function te(t,e,n,i,r,o,s,l){var a,h,c=t[Y],u=c.options.onMove;return!window.CustomEvent||g||m?(a=document.createEvent("Event"),a.initEvent("move",!0,!0)):a=new CustomEvent("move",{bubbles:!0,cancelable:!0}),a.to=e,a.from=t,a.dragged=n,a.draggedRect=i,a.related=r||e,a.relatedRect=o||I(e),a.willInsertAfter=l,a.originalEvent=s,t.dispatchEvent(a),u&&(h=u.call(c,a,s)),h}function ee(t){t.draggable=!1}function ne(){Wt=!1}function ie(t,e,n){var i=I(W(n.el,n.options.draggable)),r=10;return e?t.clientX>i.right+r||t.clientX<=i.right&&t.clientY>i.bottom&&t.clientX>=i.left:t.clientX>i.right&&t.clientY>i.top||t.clientX<=i.right&&t.clientY>i.bottom+r}function re(t,e,n,i,r,o,s,l){var a=i?t.clientY:t.clientX,h=i?n.height:n.width,c=i?n.top:n.left,u=i?n.bottom:n.right,f=!1;if(!s)if(l&&Dt<h*r){if(!It&&(1===Ot?a>c+h*o/2:a<u-h*o/2)&&(It=!0),It)f=!0;else if(1===Ot?a<c+Dt:a>u-Dt)return-Ot}else if(a>c+h*(1-r)/2&&a<u-h*(1-r)/2)return oe(e);return f=f||s,f&&(a<c+h*o/2||a>u-h*o/2)?a>c+h/2?1:-1:0}function oe(t){return F(st)<F(t)?1:-1}function se(t){var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;while(n--)i+=e.charCodeAt(n);return i.toString(36)}function le(t){Ft.length=0;var e=t.getElementsByTagName("input"),n=e.length;while(n--){var i=e[n];i.checked&&Ft.push(i)}}function ae(t){return setTimeout(t,0)}function he(t){return clearTimeout(t)}Zt.prototype={constructor:Zt,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(Tt=null)},_getDirection:function(t,e){return"function"===typeof this.options.direction?this.options.direction.call(this,t,e,st):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,i=this.options,r=i.preventOnFilter,o=t.type,s=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,l=(s||t).target,a=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,h=i.filter;if(le(n),!st&&!(/mousedown|pointerdown/.test(o)&&0!==t.button||i.disabled)&&!a.isContentEditable&&(l=A(l,i.draggable,n,!1),(!l||!l.animated)&&ut!==l)){if(pt=F(l),mt=F(l,i.draggable),"function"===typeof h){if(h.call(this,t,l,this))return ot({sortable:e,rootEl:a,name:"filter",targetEl:l,toEl:n,fromEl:n}),rt("filter",e,{evt:t}),void(r&&t.cancelable&&t.preventDefault())}else if(h&&(h=h.split(",").some((function(i){if(i=A(a,i.trim(),n,!1),i)return ot({sortable:e,rootEl:i,name:"filter",targetEl:l,fromEl:n,toEl:n}),rt("filter",e,{evt:t}),!0})),h))return void(r&&t.cancelable&&t.preventDefault());i.handle&&!A(a,i.handle,n,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,e,n){var i,r=this,o=r.el,s=r.options,l=o.ownerDocument;if(n&&!st&&n.parentNode===o){var a=I(n);if(ht=o,st=n,lt=st.parentNode,ct=st.nextSibling,ut=n,yt=s.group,Zt.dragged=st,wt={target:st,clientX:(e||t).clientX,clientY:(e||t).clientY},Ct=wt.clientX-a.left,Mt=wt.clientY-a.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,st.style["will-change"]="all",i=function(){rt("delayEnded",r,{evt:t}),Zt.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!v&&r.nativeDraggable&&(st.draggable=!0),r._triggerDragStart(t,e),ot({sortable:r,name:"choose",originalEvent:t}),D(st,s.chosenClass,!0))},s.ignore.split(",").forEach((function(t){N(st,t.trim(),ee)})),S(l,"dragover",Yt),S(l,"mousemove",Yt),S(l,"touchmove",Yt),S(l,"mouseup",r._onDrop),S(l,"touchend",r._onDrop),S(l,"touchcancel",r._onDrop),v&&this.nativeDraggable&&(this.options.touchStartThreshold=4,st.draggable=!0),rt("delayStart",this,{evt:t}),!s.delay||s.delayOnTouchOnly&&!e||this.nativeDraggable&&(m||g))i();else{if(Zt.eventCanceled)return void this._onDrop();S(l,"mouseup",r._disableDelayedDrag),S(l,"touchend",r._disableDelayedDrag),S(l,"touchcancel",r._disableDelayedDrag),S(l,"mousemove",r._delayedDragTouchMoveHandler),S(l,"touchmove",r._delayedDragTouchMoveHandler),s.supportPointer&&S(l,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,s.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){st&&ee(st),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;k(t,"mouseup",this._disableDelayedDrag),k(t,"touchend",this._disableDelayedDrag),k(t,"touchcancel",this._disableDelayedDrag),k(t,"mousemove",this._delayedDragTouchMoveHandler),k(t,"touchmove",this._delayedDragTouchMoveHandler),k(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?S(document,"pointermove",this._onTouchMove):S(document,e?"touchmove":"mousemove",this._onTouchMove):(S(st,"dragend",this),S(ht,"dragstart",this._onDragStart));try{document.selection?ae((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(t,e){if(Et=!1,ht&&st){rt("dragStarted",this,{evt:e}),this.nativeDraggable&&S(document,"dragover",Jt);var n=this.options;!t&&D(st,n.dragClass,!1),D(st,n.ghostClass,!0),Zt.active=this,t&&this._appendGhost(),ot({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(xt){this._lastX=xt.clientX,this._lastY=xt.clientY,$t();var t=document.elementFromPoint(xt.clientX,xt.clientY),e=t;while(t&&t.shadowRoot){if(t=t.shadowRoot.elementFromPoint(xt.clientX,xt.clientY),t===e)break;e=t}if(st.parentNode[Y]._isOutsideThisEl(t),e)do{if(e[Y]){var n=void 0;if(n=e[Y]._onDragOver({clientX:xt.clientX,clientY:xt.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);Xt()}},_onTouchMove:function(t){if(wt){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,r=t.touches?t.touches[0]:t,o=at&&E(at,!0),s=at&&o&&o.a,l=at&&o&&o.d,a=_t&&Lt&&H(Lt),h=(r.clientX-wt.clientX+i.x)/(s||1)+(a?a[0]-Bt[0]:0)/(s||1),c=(r.clientY-wt.clientY+i.y)/(l||1)+(a?a[1]-Bt[1]:0)/(l||1);if(!Zt.active&&!Et){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(at){o?(o.e+=h-(St||0),o.f+=c-(kt||0)):o={a:1,b:0,c:0,d:1,e:h,f:c};var u="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");L(at,"webkitTransform",u),L(at,"mozTransform",u),L(at,"msTransform",u),L(at,"transform",u),St=h,kt=c,xt=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!at){var t=this.options.fallbackOnBody?document.body:ht,e=I(st,!0,_t,!0,t),n=this.options;if(_t){Lt=t;while("static"===L(Lt,"position")&&"none"===L(Lt,"transform")&&Lt!==document)Lt=Lt.parentNode;Lt!==document.body&&Lt!==document.documentElement?(Lt===document&&(Lt=P()),e.top+=Lt.scrollTop,e.left+=Lt.scrollLeft):Lt=P(),Bt=H(Lt)}at=st.cloneNode(!0),D(at,n.ghostClass,!1),D(at,n.fallbackClass,!0),D(at,n.dragClass,!0),L(at,"transition",""),L(at,"transform",""),L(at,"box-sizing","border-box"),L(at,"margin",0),L(at,"top",e.top),L(at,"left",e.left),L(at,"width",e.width),L(at,"height",e.height),L(at,"opacity","0.8"),L(at,"position",_t?"absolute":"fixed"),L(at,"zIndex","100000"),L(at,"pointerEvents","none"),Zt.ghost=at,t.appendChild(at),L(at,"transform-origin",Ct/parseInt(at.style.width)*100+"% "+Mt/parseInt(at.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,r=n.options;rt("dragStart",this,{evt:t}),Zt.eventCanceled?this._onDrop():(rt("setupClone",this),Zt.eventCanceled||(ft=q(st),ft.draggable=!1,ft.style["will-change"]="",this._hideClone(),D(ft,this.options.chosenClass,!1),Zt.clone=ft),n.cloneId=ae((function(){rt("clone",n),Zt.eventCanceled||(n.options.removeCloneOnHide||ht.insertBefore(ft,st),n._hideClone(),ot({sortable:n,name:"clone"}))})),!e&&D(st,r.dragClass,!0),e?(Nt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(k(document,"mouseup",n._onDrop),k(document,"touchend",n._onDrop),k(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,st)),S(document,"drop",n),L(st,"transform","translateZ(0)")),Et=!0,n._dragStartId=ae(n._dragStarted.bind(n,e,t)),S(document,"selectstart",n),At=!0,y&&L(document.body,"user-select","none"))},_onDragOver:function(t){var e,n,i,r,o=this.el,l=t.target,a=this.options,h=a.group,c=Zt.active,u=yt===h,f=a.sort,d=bt||c,p=this,g=!1;if(!Wt){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),l=A(l,a.draggable,o,!0),N("dragOver"),Zt.eventCanceled)return g;if(st.contains(t.target)||l.animated&&l.animatingX&&l.animatingY||p._ignoreWhileAnimating===l)return B(!1);if(Nt=!1,c&&!a.disabled&&(u?f||(i=!ht.contains(st)):bt===this||(this.lastPutMode=yt.checkPull(this,c,st,t))&&h.checkPut(this,c,st,t))){if(r="vertical"===this._getDirection(t,l),e=I(st),N("dragOverValid"),Zt.eventCanceled)return g;if(i)return lt=ht,P(),this._hideClone(),N("revert"),Zt.eventCanceled||(ct?ht.insertBefore(st,ct):ht.appendChild(st)),B(!0);var m=W(o,a.draggable);if(!m||ie(t,r,this)&&!m.animated){if(m===st)return B(!1);if(m&&o===t.target&&(l=m),l&&(n=I(l)),!1!==te(ht,o,st,e,l,n,t,!!l))return P(),o.appendChild(st),lt=o,H(),B(!0)}else if(l.parentNode===o){n=I(l);var v,y,b=0,w=st.parentNode!==o,x=!Kt(st.animated&&st.toRect||e,l.animated&&l.toRect||n,r),S=r?"top":"left",k=R(l,"top","top")||R(st,"top","top"),C=k?k.scrollTop:void 0;if(Tt!==l&&(v=n[S],It=!1,Rt=!x&&a.invertSwap||w),b=re(t,l,n,r,x?1:a.swapThreshold,null==a.invertedSwapThreshold?a.swapThreshold:a.invertedSwapThreshold,Rt,Tt===l),0!==b){var M=F(st);do{M-=b,y=lt.children[M]}while(y&&("none"===L(y,"display")||y===at))}if(0===b||y===l)return B(!1);Tt=l,Ot=b;var T=l.nextElementSibling,O=!1;O=1===b;var E=te(ht,o,st,e,l,n,t,O);if(!1!==E)return 1!==E&&-1!==E||(O=1===E),Wt=!0,setTimeout(ne,30),P(),O&&!T?o.appendChild(st):l.parentNode.insertBefore(st,O?T:l),k&&G(k,0,C-k.scrollTop),lt=st.parentNode,void 0===v||Rt||(Dt=Math.abs(v-I(l)[S])),H(),B(!0)}if(o.contains(st))return B(!1)}return!1}function N(a,h){rt(a,p,s({evt:t,isOwner:u,axis:r?"vertical":"horizontal",revert:i,dragRect:e,targetRect:n,canSort:f,fromSortable:d,target:l,completed:B,onMove:function(n,i){return te(ht,o,st,e,n,I(n),t,i)},changed:H},h))}function P(){N("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function B(e){return N("dragOverCompleted",{insertion:e}),e&&(u?c._hideClone():c._showClone(p),p!==d&&(D(st,bt?bt.options.ghostClass:c.options.ghostClass,!1),D(st,a.ghostClass,!0)),bt!==p&&p!==Zt.active?bt=p:p===Zt.active&&bt&&(bt=null),d===p&&(p._ignoreWhileAnimating=l),p.animateAll((function(){N("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(l===st&&!st.animated||l===o&&!l.animated)&&(Tt=null),a.dragoverBubble||t.rootEl||l===document||(st.parentNode[Y]._isOutsideThisEl(t.target),!e&&Yt(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function H(){gt=F(st),vt=F(st,a.draggable),ot({sortable:p,name:"change",toEl:o,newIndex:gt,newDraggableIndex:vt,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){k(document,"mousemove",this._onTouchMove),k(document,"touchmove",this._onTouchMove),k(document,"pointermove",this._onTouchMove),k(document,"dragover",Yt),k(document,"mousemove",Yt),k(document,"touchmove",Yt)},_offUpEvents:function(){var t=this.el.ownerDocument;k(t,"mouseup",this._onDrop),k(t,"touchend",this._onDrop),k(t,"pointerup",this._onDrop),k(t,"touchcancel",this._onDrop),k(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;gt=F(st),vt=F(st,n.draggable),rt("drop",this,{evt:t}),lt=st&&st.parentNode,gt=F(st),vt=F(st,n.draggable),Zt.eventCanceled||(Et=!1,Rt=!1,It=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),he(this.cloneId),he(this._dragStartId),this.nativeDraggable&&(k(document,"drop",this),k(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),y&&L(document.body,"user-select",""),L(st,"transform",""),t&&(At&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),at&&at.parentNode&&at.parentNode.removeChild(at),(ht===lt||bt&&"clone"!==bt.lastPutMode)&&ft&&ft.parentNode&&ft.parentNode.removeChild(ft),st&&(this.nativeDraggable&&k(st,"dragend",this),ee(st),st.style["will-change"]="",At&&!Et&&D(st,bt?bt.options.ghostClass:this.options.ghostClass,!1),D(st,this.options.chosenClass,!1),ot({sortable:this,name:"unchoose",toEl:lt,newIndex:null,newDraggableIndex:null,originalEvent:t}),ht!==lt?(gt>=0&&(ot({rootEl:lt,name:"add",toEl:lt,fromEl:ht,originalEvent:t}),ot({sortable:this,name:"remove",toEl:lt,originalEvent:t}),ot({rootEl:lt,name:"sort",toEl:lt,fromEl:ht,originalEvent:t}),ot({sortable:this,name:"sort",toEl:lt,originalEvent:t})),bt&&bt.save()):gt!==pt&&gt>=0&&(ot({sortable:this,name:"update",toEl:lt,originalEvent:t}),ot({sortable:this,name:"sort",toEl:lt,originalEvent:t})),Zt.active&&(null!=gt&&-1!==gt||(gt=pt,vt=mt),ot({sortable:this,name:"end",toEl:lt,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){rt("nulling",this),ht=st=lt=at=ct=ft=ut=dt=wt=xt=At=gt=vt=pt=mt=Tt=Ot=bt=yt=Zt.dragged=Zt.ghost=Zt.clone=Zt.active=null,Ft.forEach((function(t){t.checked=!0})),Ft.length=St=kt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":st&&(this._onDragOver(t),Qt(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,r=n.length,o=this.options;i<r;i++)t=n[i],A(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||se(t));return e},sort:function(t){var e={},n=this.el;this.toArray().forEach((function(t,i){var r=n.children[i];A(r,this.options.draggable,n,!1)&&(e[t]=r)}),this),t.forEach((function(t){e[t]&&(n.removeChild(e[t]),n.appendChild(e[t]))}))},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return A(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var i=nt.modifyOption(this,t,e);n[t]="undefined"!==typeof i?i:e,"group"===t&&qt(n)},destroy:function(){rt("destroy",this);var t=this.el;t[Y]=null,k(t,"mousedown",this._onTapStart),k(t,"touchstart",this._onTapStart),k(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(k(t,"dragover",this),k(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Pt.splice(Pt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!dt){if(rt("hideClone",this),Zt.eventCanceled)return;L(ft,"display","none"),this.options.removeCloneOnHide&&ft.parentNode&&ft.parentNode.removeChild(ft),dt=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(dt){if(rt("showClone",this),Zt.eventCanceled)return;ht.contains(st)&&!this.options.group.revertClone?ht.insertBefore(ft,st):ct?ht.insertBefore(ft,ct):ht.appendChild(ft),this.options.group.revertClone&&this.animate(st,ft),L(ft,"display",""),dt=!1}}else this._hideClone()}},Ht&&S(document,"touchmove",(function(t){(Zt.active||Et)&&t.cancelable&&t.preventDefault()})),Zt.utils={on:S,off:k,css:L,find:N,is:function(t,e){return!!A(t,e,t,!1)},extend:V,throttle:U,closest:A,toggleClass:D,clone:q,index:F,nextTick:ae,cancelNextTick:he,detectDirection:Ut,getChild:B},Zt.get=function(t){return t[Y]},Zt.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Zt.utils=s({},Zt.utils,t.utils)),nt.mount(t)}))},Zt.create=function(t,e){return new Zt(t,e)},Zt.version=d;var ce,ue,fe,de,pe,ge,me=[],ve=!1;function ye(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"===typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?S(document,"dragover",this._handleAutoScroll):this.options.supportPointer?S(document,"pointermove",this._handleFallbackAutoScroll):e.touches?S(document,"touchmove",this._handleFallbackAutoScroll):S(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?k(document,"dragover",this._handleAutoScroll):(k(document,"pointermove",this._handleFallbackAutoScroll),k(document,"touchmove",this._handleFallbackAutoScroll),k(document,"mousemove",this._handleFallbackAutoScroll)),we(),be(),K()},nulling:function(){pe=ue=ce=ve=ge=fe=de=null,me.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n=this,i=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(i,r);if(pe=t,e||m||g||y){Se(t,this.options,o,e);var s=z(o,!0);!ve||ge&&i===fe&&r===de||(ge&&we(),ge=setInterval((function(){var o=z(document.elementFromPoint(i,r),!0);o!==s&&(s=o,be()),Se(t,n.options,o,e)}),10),fe=i,de=r)}else{if(!this.options.bubbleScroll||z(o,!0)===P())return void be();Se(t,this.options,z(o,!1),!1)}}},o(t,{pluginName:"scroll",initializeByDefault:!0})}function be(){me.forEach((function(t){clearInterval(t.pid)})),me=[]}function we(){clearInterval(ge)}var xe,Se=U((function(t,e,n,i){if(e.scroll){var r,o=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,l=e.scrollSensitivity,a=e.scrollSpeed,h=P(),c=!1;ue!==n&&(ue=n,be(),ce=e.scroll,r=e.scrollFn,!0===ce&&(ce=z(n,!0)));var u=0,f=ce;do{var d=f,p=I(d),g=p.top,m=p.bottom,v=p.left,y=p.right,b=p.width,w=p.height,x=void 0,S=void 0,k=d.scrollWidth,C=d.scrollHeight,M=L(d),A=d.scrollLeft,T=d.scrollTop;d===h?(x=b<k&&("auto"===M.overflowX||"scroll"===M.overflowX||"visible"===M.overflowX),S=w<C&&("auto"===M.overflowY||"scroll"===M.overflowY||"visible"===M.overflowY)):(x=b<k&&("auto"===M.overflowX||"scroll"===M.overflowX),S=w<C&&("auto"===M.overflowY||"scroll"===M.overflowY));var O=x&&(Math.abs(y-o)<=l&&A+b<k)-(Math.abs(v-o)<=l&&!!A),D=S&&(Math.abs(m-s)<=l&&T+w<C)-(Math.abs(g-s)<=l&&!!T);if(!me[u])for(var E=0;E<=u;E++)me[E]||(me[E]={});me[u].vx==O&&me[u].vy==D&&me[u].el===d||(me[u].el=d,me[u].vx=O,me[u].vy=D,clearInterval(me[u].pid),0==O&&0==D||(c=!0,me[u].pid=setInterval(function(){i&&0===this.layer&&Zt.active._onTouchMove(pe);var e=me[this.layer].vy?me[this.layer].vy*a:0,n=me[this.layer].vx?me[this.layer].vx*a:0;"function"===typeof r&&"continue"!==r.call(Zt.dragged.parentNode[Y],n,e,t,pe,me[this.layer].el)||G(me[this.layer].el,n,e)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&f!==h&&(f=z(f,!1)));ve=c}}),30),ke=function(t){var e=t.originalEvent,n=t.putSortable,i=t.dragEl,r=t.activeSortable,o=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var a=n||r;s();var h=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,c=document.elementFromPoint(h.clientX,h.clientY);l(),a&&!a.el.contains(c)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function Ce(){}function Me(){}function Ae(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(t){var e=t.dragEl;xe=e},dragOverValid:function(t){var e=t.completed,n=t.target,i=t.onMove,r=t.activeSortable,o=t.changed,s=t.cancel;if(r.options.swap){var l=this.sortable.el,a=this.options;if(n&&n!==l){var h=xe;!1!==i(n)?(D(n,a.swapClass,!0),xe=n):xe=null,h&&h!==xe&&D(h,a.swapClass,!1)}o(),e(!0),s()}},drop:function(t){var e=t.activeSortable,n=t.putSortable,i=t.dragEl,r=n||this.sortable,o=this.options;xe&&D(xe,o.swapClass,!1),xe&&(o.swap||n&&n.options.swap)&&i!==xe&&(r.captureAnimationState(),r!==e&&e.captureAnimationState(),Te(i,xe),r.animateAll(),r!==e&&e.animateAll())},nulling:function(){xe=null}},o(t,{pluginName:"swap",eventProperties:function(){return{swapItem:xe}}})}function Te(t,e){var n,i,r=t.parentNode,o=e.parentNode;r&&o&&!r.isEqualNode(e)&&!o.isEqualNode(t)&&(n=F(t),i=F(e),r.isEqualNode(o)&&n<i&&i++,r.insertBefore(e,r.children[n]),o.insertBefore(t,o.children[i]))}Ce.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=B(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:ke},o(Ce,{pluginName:"revertOnSpill"}),Me.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,i=n||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:ke},o(Me,{pluginName:"removeOnSpill"});var Oe,De,Le,Ee,Ne,Pe=[],Ie=[],Re=!1,Be=!1,We=!1;function Fe(){function t(t){for(var e in this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this));t.options.supportPointer?S(document,"pointerup",this._deselectMultiDrag):(S(document,"mouseup",this._deselectMultiDrag),S(document,"touchend",this._deselectMultiDrag)),S(document,"keydown",this._checkKeyDown),S(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(e,n){var i="";Pe.length&&De===t?Pe.forEach((function(t,e){i+=(e?", ":"")+t.textContent})):i=n.textContent,e.setData("Text",i)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var e=t.dragEl;Le=e},delayEnded:function(){this.isMultiDrag=~Pe.indexOf(Le)},setupClone:function(t){var e=t.sortable,n=t.cancel;if(this.isMultiDrag){for(var i=0;i<Pe.length;i++)Ie.push(q(Pe[i])),Ie[i].sortableIndex=Pe[i].sortableIndex,Ie[i].draggable=!1,Ie[i].style["will-change"]="",D(Ie[i],this.options.selectedClass,!1),Pe[i]===Le&&D(Ie[i],this.options.chosenClass,!1);e._hideClone(),n()}},clone:function(t){var e=t.sortable,n=t.rootEl,i=t.dispatchSortableEvent,r=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Pe.length&&De===e&&(_e(!0,n),i("clone"),r()))},showClone:function(t){var e=t.cloneNowShown,n=t.rootEl,i=t.cancel;this.isMultiDrag&&(_e(!1,n),Ie.forEach((function(t){L(t,"display","")})),e(),Ne=!1,i())},hideClone:function(t){var e=this,n=(t.sortable,t.cloneNowHidden),i=t.cancel;this.isMultiDrag&&(Ie.forEach((function(t){L(t,"display","none"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)})),n(),Ne=!0,i())},dragStartGlobal:function(t){t.sortable;!this.isMultiDrag&&De&&De.multiDrag._deselectMultiDrag(),Pe.forEach((function(t){t.sortableIndex=F(t)})),Pe=Pe.sort((function(t,e){return t.sortableIndex-e.sortableIndex})),We=!0},dragStarted:function(t){var e=this,n=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){Pe.forEach((function(t){t!==Le&&L(t,"position","absolute")}));var i=I(Le,!1,!0,!0);Pe.forEach((function(t){t!==Le&&$(t,i)})),Be=!0,Re=!0}n.animateAll((function(){Be=!1,Re=!1,e.options.animation&&Pe.forEach((function(t){X(t)})),e.options.sort&&ze()}))}},dragOver:function(t){var e=t.target,n=t.completed,i=t.cancel;Be&&~Pe.indexOf(e)&&(n(!1),i())},revert:function(t){var e=t.fromSortable,n=t.rootEl,i=t.sortable,r=t.dragRect;Pe.length>1&&(Pe.forEach((function(t){i.addAnimationState({target:t,rect:Be?I(t):r}),X(t),t.fromRect=r,e.removeAnimationState(t)})),Be=!1,He(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(t){var e=t.sortable,n=t.isOwner,i=t.insertion,r=t.activeSortable,o=t.parentEl,s=t.putSortable,l=this.options;if(i){if(n&&r._hideClone(),Re=!1,l.animation&&Pe.length>1&&(Be||!n&&!r.options.sort&&!s)){var a=I(Le,!1,!0,!0);Pe.forEach((function(t){t!==Le&&($(t,a),o.appendChild(t))})),Be=!0}if(!n)if(Be||ze(),Pe.length>1){var h=Ne;r._showClone(e),r.options.animation&&!Ne&&h&&Ie.forEach((function(t){r.addAnimationState({target:t,rect:Ee}),t.fromRect=Ee,t.thisAnimationDuration=null}))}else r._showClone(e)}},dragOverAnimationCapture:function(t){var e=t.dragRect,n=t.isOwner,i=t.activeSortable;if(Pe.forEach((function(t){t.thisAnimationDuration=null})),i.options.animation&&!n&&i.multiDrag.isMultiDrag){Ee=o({},e);var r=E(Le,!0);Ee.top-=r.f,Ee.left-=r.e}},dragOverAnimationComplete:function(){Be&&(Be=!1,ze())},drop:function(t){var e=t.originalEvent,n=t.rootEl,i=t.parentEl,r=t.sortable,o=t.dispatchSortableEvent,s=t.oldIndex,l=t.putSortable,a=l||this.sortable;if(e){var h=this.options,c=i.children;if(!We)if(h.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),D(Le,h.selectedClass,!~Pe.indexOf(Le)),~Pe.indexOf(Le))Pe.splice(Pe.indexOf(Le),1),Oe=null,it({sortable:r,rootEl:n,name:"deselect",targetEl:Le,originalEvt:e});else{if(Pe.push(Le),it({sortable:r,rootEl:n,name:"select",targetEl:Le,originalEvt:e}),e.shiftKey&&Oe&&r.el.contains(Oe)){var u,f,d=F(Oe),p=F(Le);if(~d&&~p&&d!==p)for(p>d?(f=d,u=p):(f=p,u=d+1);f<u;f++)~Pe.indexOf(c[f])||(D(c[f],h.selectedClass,!0),Pe.push(c[f]),it({sortable:r,rootEl:n,name:"select",targetEl:c[f],originalEvt:e}))}else Oe=Le;De=a}if(We&&this.isMultiDrag){if((i[Y].options.sort||i!==n)&&Pe.length>1){var g=I(Le),m=F(Le,":not(."+this.options.selectedClass+")");if(!Re&&h.animation&&(Le.thisAnimationDuration=null),a.captureAnimationState(),!Re&&(h.animation&&(Le.fromRect=g,Pe.forEach((function(t){if(t.thisAnimationDuration=null,t!==Le){var e=Be?I(t):g;t.fromRect=e,a.addAnimationState({target:t,rect:e})}}))),ze(),Pe.forEach((function(t){c[m]?i.insertBefore(t,c[m]):i.appendChild(t),m++})),s===F(Le))){var v=!1;Pe.forEach((function(t){t.sortableIndex===F(t)||(v=!0)})),v&&o("update")}Pe.forEach((function(t){X(t)})),a.animateAll()}De=a}(n===i||l&&"clone"!==l.lastPutMode)&&Ie.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))}},nullingGlobal:function(){this.isMultiDrag=We=!1,Ie.length=0},destroyGlobal:function(){this._deselectMultiDrag(),k(document,"pointerup",this._deselectMultiDrag),k(document,"mouseup",this._deselectMultiDrag),k(document,"touchend",this._deselectMultiDrag),k(document,"keydown",this._checkKeyDown),k(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(("undefined"===typeof We||!We)&&De===this.sortable&&(!t||!A(t.target,this.options.draggable,this.sortable.el,!1))&&(!t||0===t.button))while(Pe.length){var e=Pe[0];D(e,this.options.selectedClass,!1),Pe.shift(),it({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvt:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},o(t,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[Y];e&&e.options.multiDrag&&!~Pe.indexOf(t)&&(De&&De!==e&&(De.multiDrag._deselectMultiDrag(),De=e),D(t,e.options.selectedClass,!0),Pe.push(t))},deselect:function(t){var e=t.parentNode[Y],n=Pe.indexOf(t);e&&e.options.multiDrag&&~n&&(D(t,e.options.selectedClass,!1),Pe.splice(n,1))}},eventProperties:function(){var t=this,e=[],n=[];return Pe.forEach((function(i){var r;e.push({multiDragElement:i,index:i.sortableIndex}),r=Be&&i!==Le?-1:Be?F(i,":not(."+t.options.selectedClass+")"):F(i),n.push({multiDragElement:i,index:r})})),{items:h(Pe),clones:[].concat(Ie),oldIndicies:e,newIndicies:n}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),"ctrl"===t?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function He(t,e){Pe.forEach((function(n,i){var r=e.children[n.sortableIndex+(t?Number(i):0)];r?e.insertBefore(n,r):e.appendChild(n)}))}function _e(t,e){Ie.forEach((function(n,i){var r=e.children[n.sortableIndex+(t?Number(i):0)];r?e.insertBefore(n,r):e.appendChild(n)}))}function ze(){Pe.forEach((function(t){t!==Le&&t.parentNode&&t.parentNode.removeChild(t)}))}Zt.mount(new ye),Zt.mount(Me,Ce),e["default"]=Zt},"56b3":function(t,e,n){(function(e,n){t.exports=n()})(0,(function(){"use strict";var t=navigator.userAgent,e=navigator.platform,n=/gecko\/\d/i.test(t),i=/MSIE \d/.test(t),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),s=i||r||o,l=s&&(i?document.documentMode||6:+(o||r)[1]),a=!o&&/WebKit\//.test(t),h=a&&/Qt\/\d+\.\d+/.test(t),c=!o&&/Chrome\/(\d+)/.exec(t),u=c&&+c[1],f=/Opera\//.test(t),d=/Apple Computer/.test(navigator.vendor),p=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),g=/PhantomJS/.test(t),m=d&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),v=/Android/.test(t),y=m||v||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),b=m||/Mac/.test(e),w=/\bCrOS\b/.test(t),x=/win/i.test(e),S=f&&t.match(/Version\/(\d*\.\d*)/);S&&(S=Number(S[1])),S&&S>=15&&(f=!1,a=!0);var k=b&&(h||f&&(null==S||S<12.11)),C=n||s&&l>=9;function M(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var A,T=function(t,e){var n=t.className,i=M(e).exec(n);if(i){var r=n.slice(i.index+i[0].length);t.className=n.slice(0,i.index)+(r?i[1]+r:"")}};function O(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function D(t,e){return O(t).appendChild(e)}function L(t,e,n,i){var r=document.createElement(t);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof e)r.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)r.appendChild(e[o]);return r}function E(t,e,n,i){var r=L(t,e,n,i);return r.setAttribute("role","presentation"),r}function N(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function P(t){var e;try{e=t.activeElement}catch(n){e=t.body||null}while(e&&e.shadowRoot&&e.shadowRoot.activeElement)e=e.shadowRoot.activeElement;return e}function I(t,e){var n=t.className;M(e).test(n)||(t.className+=(n?" ":"")+e)}function R(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)n[i]&&!M(n[i]).test(e)&&(e+=" "+n[i]);return e}A=document.createRange?function(t,e,n,i){var r=document.createRange();return r.setEnd(i||t,n),r.setStart(t,e),r}:function(t,e,n){var i=document.body.createTextRange();try{i.moveToElementText(t.parentNode)}catch(r){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i};var B=function(t){t.select()};function W(t){return t.display.wrapper.ownerDocument}function F(t){return W(t).defaultView}function H(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function _(t,e,n){for(var i in e||(e={}),t)!t.hasOwnProperty(i)||!1===n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e}function z(t,e,n,i,r){null==e&&(e=t.search(/[^\s\u00a0]/),-1==e&&(e=t.length));for(var o=i||0,s=r||0;;){var l=t.indexOf("\t",o);if(l<0||l>=e)return s+(e-o);s+=l-o,s+=n-s%n,o=l+1}}m?B=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:s&&(B=function(t){try{t.select()}catch(e){}});var V=function(){this.id=null,this.f=null,this.time=0,this.handler=H(this.onTimeout,this)};function j(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}V.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},V.prototype.set=function(t,e){this.f=e;var n=+new Date+t;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=n)};var U=50,K={toString:function(){return"CodeMirror.Pass"}},G={scroll:!1},q={origin:"*mouse"},$={origin:"+move"};function X(t,e,n){for(var i=0,r=0;;){var o=t.indexOf("\t",i);-1==o&&(o=t.length);var s=o-i;if(o==t.length||r+s>=e)return i+Math.min(s,e-r);if(r+=o-i,r+=n-r%n,i=o+1,r>=e)return i}}var Y=[""];function J(t){while(Y.length<=t)Y.push(Z(Y)+" ");return Y[t]}function Z(t){return t[t.length-1]}function Q(t,e){for(var n=[],i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function tt(t,e,n){var i=0,r=n(e);while(i<t.length&&n(t[i])<=r)i++;t.splice(i,0,e)}function et(){}function nt(t,e){var n;return Object.create?n=Object.create(t):(et.prototype=t,n=new et),e&&_(e,n),n}var it=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function rt(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||it.test(t))}function ot(t,e){return e?!!(e.source.indexOf("\\w")>-1&&rt(t))||e.test(t):rt(t)}function st(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var lt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function at(t){return t.charCodeAt(0)>=768&&lt.test(t)}function ht(t,e,n){while((n<0?e>0:e<t.length)&&at(t.charAt(e)))e+=n;return e}function ct(t,e,n){for(var i=e>n?-1:1;;){if(e==n)return e;var r=(e+n)/2,o=i<0?Math.ceil(r):Math.floor(r);if(o==e)return t(o)?e:n;t(o)?n=o:e=o+i}}function ut(t,e,n,i){if(!t)return i(e,n,"ltr",0);for(var r=!1,o=0;o<t.length;++o){var s=t[o];(s.from<n&&s.to>e||e==n&&s.to==e)&&(i(Math.max(s.from,e),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),r=!0)}r||i(e,n,"ltr")}var ft=null;function dt(t,e,n){var i;ft=null;for(var r=0;r<t.length;++r){var o=t[r];if(o.from<e&&o.to>e)return r;o.to==e&&(o.from!=o.to&&"before"==n?i=r:ft=r),o.from==e&&(o.from!=o.to&&"before"!=n?i=r:ft=r)}return null!=i?i:ft}var pt=function(){var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",e="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function n(n){return n<=247?t.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1785?e.charAt(n-1536):1774<=n&&n<=2220?"r":8192<=n&&n<=8203?"w":8204==n?"b":"L"}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,o=/[LRr]/,s=/[Lb1n]/,l=/[1n]/;function a(t,e,n){this.level=t,this.from=e,this.to=n}return function(t,e){var h="ltr"==e?"L":"R";if(0==t.length||"ltr"==e&&!i.test(t))return!1;for(var c=t.length,u=[],f=0;f<c;++f)u.push(n(t.charCodeAt(f)));for(var d=0,p=h;d<c;++d){var g=u[d];"m"==g?u[d]=p:p=g}for(var m=0,v=h;m<c;++m){var y=u[m];"1"==y&&"r"==v?u[m]="n":o.test(y)&&(v=y,"r"==y&&(u[m]="R"))}for(var b=1,w=u[0];b<c-1;++b){var x=u[b];"+"==x&&"1"==w&&"1"==u[b+1]?u[b]="1":","!=x||w!=u[b+1]||"1"!=w&&"n"!=w||(u[b]=w),w=x}for(var S=0;S<c;++S){var k=u[S];if(","==k)u[S]="N";else if("%"==k){var C=void 0;for(C=S+1;C<c&&"%"==u[C];++C);for(var M=S&&"!"==u[S-1]||C<c&&"1"==u[C]?"1":"N",A=S;A<C;++A)u[A]=M;S=C-1}}for(var T=0,O=h;T<c;++T){var D=u[T];"L"==O&&"1"==D?u[T]="L":o.test(D)&&(O=D)}for(var L=0;L<c;++L)if(r.test(u[L])){var E=void 0;for(E=L+1;E<c&&r.test(u[E]);++E);for(var N="L"==(L?u[L-1]:h),P="L"==(E<c?u[E]:h),I=N==P?N?"L":"R":h,R=L;R<E;++R)u[R]=I;L=E-1}for(var B,W=[],F=0;F<c;)if(s.test(u[F])){var H=F;for(++F;F<c&&s.test(u[F]);++F);W.push(new a(0,H,F))}else{var _=F,z=W.length,V="rtl"==e?1:0;for(++F;F<c&&"L"!=u[F];++F);for(var j=_;j<F;)if(l.test(u[j])){_<j&&(W.splice(z,0,new a(1,_,j)),z+=V);var U=j;for(++j;j<F&&l.test(u[j]);++j);W.splice(z,0,new a(2,U,j)),z+=V,_=j}else++j;_<F&&W.splice(z,0,new a(1,_,F))}return"ltr"==e&&(1==W[0].level&&(B=t.match(/^\s+/))&&(W[0].from=B[0].length,W.unshift(new a(0,0,B[0].length))),1==Z(W).level&&(B=t.match(/\s+$/))&&(Z(W).to-=B[0].length,W.push(new a(0,c-B[0].length,c)))),"rtl"==e?W.reverse():W}}();function gt(t,e){var n=t.order;return null==n&&(n=t.order=pt(t.text,e)),n}var mt=[],vt=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={});i[e]=(i[e]||mt).concat(n)}};function yt(t,e){return t._handlers&&t._handlers[e]||mt}function bt(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers,r=i&&i[e];if(r){var o=j(r,n);o>-1&&(i[e]=r.slice(0,o).concat(r.slice(o+1)))}}}function wt(t,e){var n=yt(t,e);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function xt(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),wt(t,n||e.type,t,e),Tt(e)||e.codemirrorIgnore}function St(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),i=0;i<e.length;++i)-1==j(n,e[i])&&n.push(e[i])}function kt(t,e){return yt(t,e).length>0}function Ct(t){t.prototype.on=function(t,e){vt(this,t,e)},t.prototype.off=function(t,e){bt(this,t,e)}}function Mt(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function At(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function Tt(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function Ot(t){Mt(t),At(t)}function Dt(t){return t.target||t.srcElement}function Lt(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),b&&t.ctrlKey&&1==e&&(e=3),e}var Et,Nt,Pt=function(){if(s&&l<9)return!1;var t=L("div");return"draggable"in t||"dragDrop"in t}();function It(t){if(null==Et){var e=L("span","​");D(t,L("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Et=e.offsetWidth<=1&&e.offsetHeight>2&&!(s&&l<8))}var n=Et?L("span","​"):L("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Rt(t){if(null!=Nt)return Nt;var e=D(t,document.createTextNode("AخA")),n=A(e,0,1).getBoundingClientRect(),i=A(e,1,2).getBoundingClientRect();return O(t),!(!n||n.left==n.right)&&(Nt=i.right-n.right<3)}var Bt=3!="\n\nb".split(/\n/).length?function(t){var e=0,n=[],i=t.length;while(e<=i){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var o=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),e+=s+1):(n.push(o),e=r+1)}return n}:function(t){return t.split(/\r\n?|\n/)},Wt=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(e){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(n){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Ft=function(){var t=L("div");return"oncopy"in t||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),Ht=null;function _t(t){if(null!=Ht)return Ht;var e=D(t,L("span","x")),n=e.getBoundingClientRect(),i=A(e,0,1).getBoundingClientRect();return Ht=Math.abs(n.left-i.left)>1}var zt={},Vt={};function jt(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),zt[t]=e}function Ut(t,e){Vt[t]=e}function Kt(t){if("string"==typeof t&&Vt.hasOwnProperty(t))t=Vt[t];else if(t&&"string"==typeof t.name&&Vt.hasOwnProperty(t.name)){var e=Vt[t.name];"string"==typeof e&&(e={name:e}),t=nt(e,t),t.name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Kt("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Kt("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Gt(t,e){e=Kt(e);var n=zt[e.name];if(!n)return Gt(t,"text/plain");var i=n(t,e);if(qt.hasOwnProperty(e.name)){var r=qt[e.name];for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=r[o])}if(i.name=e.name,e.helperType&&(i.helperType=e.helperType),e.modeProps)for(var s in e.modeProps)i[s]=e.modeProps[s];return i}var qt={};function $t(t,e){var n=qt.hasOwnProperty(t)?qt[t]:qt[t]={};_(e,n)}function Xt(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var r=e[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function Yt(t,e){var n;while(t.innerMode){if(n=t.innerMode(e),!n||n.mode==t)break;e=n.state,t=n.mode}return n||{mode:t,state:e}}function Jt(t,e,n){return!t.startState||t.startState(e,n)}var Zt=function(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Qt(t,e){if(e-=t.first,e<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");var n=t;while(!n.lines)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(e<o){n=r;break}e-=o}return n.lines[e]}function te(t,e,n){var i=[],r=e.line;return t.iter(e.line,n.line+1,(function(t){var o=t.text;r==n.line&&(o=o.slice(0,n.ch)),r==e.line&&(o=o.slice(e.ch)),i.push(o),++r})),i}function ee(t,e,n){var i=[];return t.iter(e,n,(function(t){i.push(t.text)})),i}function ne(t,e){var n=e-t.height;if(n)for(var i=t;i;i=i.parent)i.height+=n}function ie(t){if(null==t.parent)return null;for(var e=t.parent,n=j(e.lines,t),i=e.parent;i;e=i,i=i.parent)for(var r=0;;++r){if(i.children[r]==e)break;n+=i.children[r].chunkSize()}return n+e.first}function re(t,e){var n=t.first;t:do{for(var i=0;i<t.children.length;++i){var r=t.children[i],o=r.height;if(e<o){t=r;continue t}e-=o,n+=r.chunkSize()}return n}while(!t.lines);for(var s=0;s<t.lines.length;++s){var l=t.lines[s],a=l.height;if(e<a)break;e-=a}return n+s}function oe(t,e){return e>=t.first&&e<t.first+t.size}function se(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function le(t,e,n){if(void 0===n&&(n=null),!(this instanceof le))return new le(t,e,n);this.line=t,this.ch=e,this.sticky=n}function ae(t,e){return t.line-e.line||t.ch-e.ch}function he(t,e){return t.sticky==e.sticky&&0==ae(t,e)}function ce(t){return le(t.line,t.ch)}function ue(t,e){return ae(t,e)<0?e:t}function fe(t,e){return ae(t,e)<0?t:e}function de(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function pe(t,e){if(e.line<t.first)return le(t.first,0);var n=t.first+t.size-1;return e.line>n?le(n,Qt(t,n).text.length):ge(e,Qt(t,e.line).text.length)}function ge(t,e){var n=t.ch;return null==n||n>e?le(t.line,e):n<0?le(t.line,0):t}function me(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=pe(t,e[i]);return n}Zt.prototype.eol=function(){return this.pos>=this.string.length},Zt.prototype.sol=function(){return this.pos==this.lineStart},Zt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Zt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Zt.prototype.eat=function(t){var e,n=this.string.charAt(this.pos);if(e="string"==typeof t?n==t:n&&(t.test?t.test(n):t(n)),e)return++this.pos,n},Zt.prototype.eatWhile=function(t){var e=this.pos;while(this.eat(t));return this.pos>e},Zt.prototype.eatSpace=function(){var t=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>t},Zt.prototype.skipToEnd=function(){this.pos=this.string.length},Zt.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},Zt.prototype.backUp=function(t){this.pos-=t},Zt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=z(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?z(this.string,this.lineStart,this.tabSize):0)},Zt.prototype.indentation=function(){return z(this.string,null,this.tabSize)-(this.lineStart?z(this.string,this.lineStart,this.tabSize):0)},Zt.prototype.match=function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&!1!==e&&(this.pos+=i[0].length),i)}var r=function(t){return n?t.toLowerCase():t},o=this.string.substr(this.pos,t.length);if(r(o)==r(t))return!1!==e&&(this.pos+=t.length),!0},Zt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Zt.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},Zt.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},Zt.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var ve=function(t,e){this.state=t,this.lookAhead=e},ye=function(t,e,n,i){this.state=e,this.doc=t,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function be(t,e,n,i){var r=[t.state.modeGen],o={};Oe(t,e.text,t.doc.mode,n,(function(t,e){return r.push(t,e)}),o,i);for(var s=n.state,l=function(i){n.baseTokens=r;var l=t.state.overlays[i],a=1,h=0;n.state=!0,Oe(t,e.text,l.mode,n,(function(t,e){var n=a;while(h<t){var i=r[a];i>t&&r.splice(a,1,t,r[a+1],i),a+=2,h=Math.min(t,i)}if(e)if(l.opaque)r.splice(n,a-n,t,"overlay "+e),a=n+2;else for(;n<a;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"overlay "+e}}),o),n.state=s,n.baseTokens=null,n.baseTokenPos=1},a=0;a<t.state.overlays.length;++a)l(a);return{styles:r,classes:o.bgClass||o.textClass?o:null}}function we(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var i=xe(t,ie(e)),r=e.text.length>t.options.maxHighlightLength&&Xt(t.doc.mode,i.state),o=be(t,e,i);r&&(i.state=r),e.stateAfter=i.save(!r),e.styles=o.styles,o.classes?e.styleClasses=o.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function xe(t,e,n){var i=t.doc,r=t.display;if(!i.mode.startState)return new ye(i,!0,e);var o=De(t,e,n),s=o>i.first&&Qt(i,o-1).stateAfter,l=s?ye.fromSaved(i,s,o):new ye(i,Jt(i.mode),o);return i.iter(o,e,(function(n){Se(t,n.text,l);var i=l.line;n.stateAfter=i==e-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?l.save():null,l.nextLine()})),n&&(i.modeFrontier=l.line),l}function Se(t,e,n,i){var r=t.doc.mode,o=new Zt(e,t.options.tabSize,n);o.start=o.pos=i||0,""==e&&ke(r,n.state);while(!o.eol())Ce(r,o,n.state),o.start=o.pos}function ke(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=Yt(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Ce(t,e,n,i){for(var r=0;r<10;r++){i&&(i[0]=Yt(t,n).mode);var o=t.token(e,n);if(e.pos>e.start)return o}throw new Error("Mode "+t.name+" failed to advance stream.")}ye.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},ye.prototype.baseToken=function(t){if(!this.baseTokens)return null;while(this.baseTokens[this.baseTokenPos]<=t)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},ye.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ye.fromSaved=function(t,e,n){return e instanceof ve?new ye(t,Xt(t.mode,e.state),n,e.lookAhead):new ye(t,Xt(t.mode,e),n)},ye.prototype.save=function(t){var e=!1!==t?Xt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ve(e,this.maxLookAhead):e};var Me=function(t,e,n){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=n};function Ae(t,e,n,i){var r,o=t.doc,s=o.mode;e=pe(o,e);var l,a=Qt(o,e.line),h=xe(t,e.line,n),c=new Zt(a.text,t.options.tabSize,h);i&&(l=[]);while((i||c.pos<e.ch)&&!c.eol())c.start=c.pos,r=Ce(s,c,h.state),i&&l.push(new Me(c,r,Xt(o.mode,h.state)));return i?l:new Me(c,r,h.state)}function Te(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==e[i]?e[i]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(e[i])||(e[i]+=" "+n[2])}return t}function Oe(t,e,n,i,r,o,s){var l=n.flattenSpans;null==l&&(l=t.options.flattenSpans);var a,h=0,c=null,u=new Zt(e,t.options.tabSize,i),f=t.options.addModeClass&&[null];""==e&&Te(ke(n,i.state),o);while(!u.eol()){if(u.pos>t.options.maxHighlightLength?(l=!1,s&&Se(t,e,i,u.pos),u.pos=e.length,a=null):a=Te(Ce(n,u,i.state,f),o),f){var d=f[0].name;d&&(a="m-"+(a?d+" "+a:d))}if(!l||c!=a){while(h<u.start)h=Math.min(u.start,h+5e3),r(h,c);c=a}u.start=u.pos}while(h<u.pos){var p=Math.min(u.pos,h+5e3);r(p,c),h=p}}function De(t,e,n){for(var i,r,o=t.doc,s=n?-1:e-(t.doc.mode.innerMode?1e3:100),l=e;l>s;--l){if(l<=o.first)return o.first;var a=Qt(o,l-1),h=a.stateAfter;if(h&&(!n||l+(h instanceof ve?h.lookAhead:0)<=o.modeFrontier))return l;var c=z(a.text,null,t.options.tabSize);(null==r||i>c)&&(r=l-1,i=c)}return r}function Le(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var n=t.first,i=e-1;i>n;i--){var r=Qt(t,i).stateAfter;if(r&&(!(r instanceof ve)||i+r.lookAhead<e)){n=i+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,n)}}var Ee=!1,Ne=!1;function Pe(){Ee=!0}function Ie(){Ne=!0}function Re(t,e,n){this.marker=t,this.from=e,this.to=n}function Be(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function We(t,e){for(var n,i=0;i<t.length;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function Fe(t,e,n){var i=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));i&&t.markedSpans&&i.has(t.markedSpans)?t.markedSpans.push(e):(t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],i&&i.add(t.markedSpans)),e.marker.attachLine(t)}function He(t,e,n){var i;if(t)for(var r=0;r<t.length;++r){var o=t[r],s=o.marker,l=null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e);if(l||o.from==e&&"bookmark"==s.type&&(!n||!o.marker.insertLeft)){var a=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);(i||(i=[])).push(new Re(s,o.from,a?null:o.to))}}return i}function _e(t,e,n){var i;if(t)for(var r=0;r<t.length;++r){var o=t[r],s=o.marker,l=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);if(l||o.from==e&&"bookmark"==s.type&&(!n||o.marker.insertLeft)){var a=null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e);(i||(i=[])).push(new Re(s,a?null:o.from-e,null==o.to?null:o.to-e))}}return i}function ze(t,e){if(e.full)return null;var n=oe(t,e.from.line)&&Qt(t,e.from.line).markedSpans,i=oe(t,e.to.line)&&Qt(t,e.to.line).markedSpans;if(!n&&!i)return null;var r=e.from.ch,o=e.to.ch,s=0==ae(e.from,e.to),l=He(n,r,s),a=_e(i,o,s),h=1==e.text.length,c=Z(e.text).length+(h?r:0);if(l)for(var u=0;u<l.length;++u){var f=l[u];if(null==f.to){var d=Be(a,f.marker);d?h&&(f.to=null==d.to?null:d.to+c):f.to=r}}if(a)for(var p=0;p<a.length;++p){var g=a[p];if(null!=g.to&&(g.to+=c),null==g.from){var m=Be(l,g.marker);m||(g.from=c,h&&(l||(l=[])).push(g))}else g.from+=c,h&&(l||(l=[])).push(g)}l&&(l=Ve(l)),a&&a!=l&&(a=Ve(a));var v=[l];if(!h){var y,b=e.text.length-2;if(b>0&&l)for(var w=0;w<l.length;++w)null==l[w].to&&(y||(y=[])).push(new Re(l[w].marker,null,null));for(var x=0;x<b;++x)v.push(y);v.push(a)}return v}function Ve(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function je(t,e,n){var i=null;if(t.iter(e.line,n.line+1,(function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=j(i,n)||(i||(i=[])).push(n)}})),!i)return null;for(var r=[{from:e,to:n}],o=0;o<i.length;++o)for(var s=i[o],l=s.find(0),a=0;a<r.length;++a){var h=r[a];if(!(ae(h.to,l.from)<0||ae(h.from,l.to)>0)){var c=[a,1],u=ae(h.from,l.from),f=ae(h.to,l.to);(u<0||!s.inclusiveLeft&&!u)&&c.push({from:h.from,to:l.from}),(f>0||!s.inclusiveRight&&!f)&&c.push({from:l.to,to:h.to}),r.splice.apply(r,c),a+=c.length-3}}return r}function Ue(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function Ke(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Ge(t){return t.inclusiveLeft?-1:0}function qe(t){return t.inclusiveRight?1:0}function $e(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var i=t.find(),r=e.find(),o=ae(i.from,r.from)||Ge(t)-Ge(e);if(o)return-o;var s=ae(i.to,r.to)||qe(t)-qe(e);return s||e.id-t.id}function Xe(t,e){var n,i=Ne&&t.markedSpans;if(i)for(var r=void 0,o=0;o<i.length;++o)r=i[o],r.marker.collapsed&&null==(e?r.from:r.to)&&(!n||$e(n,r.marker)<0)&&(n=r.marker);return n}function Ye(t){return Xe(t,!0)}function Je(t){return Xe(t,!1)}function Ze(t,e){var n,i=Ne&&t.markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];o.marker.collapsed&&(null==o.from||o.from<e)&&(null==o.to||o.to>e)&&(!n||$e(n,o.marker)<0)&&(n=o.marker)}return n}function Qe(t,e,n,i,r){var o=Qt(t,e),s=Ne&&o.markedSpans;if(s)for(var l=0;l<s.length;++l){var a=s[l];if(a.marker.collapsed){var h=a.marker.find(0),c=ae(h.from,n)||Ge(a.marker)-Ge(r),u=ae(h.to,i)||qe(a.marker)-qe(r);if(!(c>=0&&u<=0||c<=0&&u>=0)&&(c<=0&&(a.marker.inclusiveRight&&r.inclusiveLeft?ae(h.to,n)>=0:ae(h.to,n)>0)||c>=0&&(a.marker.inclusiveRight&&r.inclusiveLeft?ae(h.from,i)<=0:ae(h.from,i)<0)))return!0}}}function tn(t){var e;while(e=Ye(t))t=e.find(-1,!0).line;return t}function en(t){var e;while(e=Je(t))t=e.find(1,!0).line;return t}function nn(t){var e,n;while(e=Je(t))t=e.find(1,!0).line,(n||(n=[])).push(t);return n}function rn(t,e){var n=Qt(t,e),i=tn(n);return n==i?e:ie(i)}function on(t,e){if(e>t.lastLine())return e;var n,i=Qt(t,e);if(!sn(t,i))return e;while(n=Je(i))i=n.find(1,!0).line;return ie(i)+1}function sn(t,e){var n=Ne&&e.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if(i=n[r],i.marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&ln(t,e,i))return!0}}function ln(t,e,n){if(null==n.to){var i=n.marker.find(1,!0);return ln(t,i.line,Be(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var r=void 0,o=0;o<e.markedSpans.length;++o)if(r=e.markedSpans[o],r.marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&ln(t,e,r))return!0}function an(t){t=tn(t);for(var e=0,n=t.parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==t)break;e+=r.height}for(var o=n.parent;o;n=o,o=n.parent)for(var s=0;s<o.children.length;++s){var l=o.children[s];if(l==n)break;e+=l.height}return e}function hn(t){if(0==t.height)return 0;var e,n=t.text.length,i=t;while(e=Ye(i)){var r=e.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}i=t;while(e=Je(i)){var o=e.find(0,!0);n-=i.text.length-o.from.ch,i=o.to.line,n+=i.text.length-o.to.ch}return n}function cn(t){var e=t.display,n=t.doc;e.maxLine=Qt(n,n.first),e.maxLineLength=hn(e.maxLine),e.maxLineChanged=!0,n.iter((function(t){var n=hn(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)}))}var un=function(t,e,n){this.text=t,Ke(this,e),this.height=n?n(this):1};function fn(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Ue(t),Ke(t,n);var r=i?i(t):1;r!=t.height&&ne(t,r)}function dn(t){t.parent=null,Ue(t)}un.prototype.lineNo=function(){return ie(this)},Ct(un);var pn={},gn={};function mn(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?gn:pn;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function vn(t,e){var n=E("span",null,null,a?"padding-right: .1px":null),i={pre:E("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};e.measure={};for(var r=0;r<=(e.rest?e.rest.length:0);r++){var o=r?e.rest[r-1]:e.line,s=void 0;i.pos=0,i.addToken=bn,Rt(t.display.measure)&&(s=gt(o,t.doc.direction))&&(i.addToken=xn(i.addToken,s)),i.map=[];var l=e!=t.display.externalMeasured&&ie(o);kn(o,i,we(t,o,l)),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=R(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=R(o.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(It(t.display.measure))),0==r?(e.measure.map=i.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(i.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(a){var h=i.content.lastChild;(/\bcm-tab\b/.test(h.className)||h.querySelector&&h.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return wt(t,"renderLine",t,e.line,i.pre),i.pre.className&&(i.textClass=R(i.pre.className,i.textClass||"")),i}function yn(t){var e=L("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function bn(t,e,n,i,r,o,a){if(e){var h,c=t.splitSpaces?wn(e,t.trailingSpace):e,u=t.cm.state.specialChars,f=!1;if(u.test(e)){h=document.createDocumentFragment();var d=0;while(1){u.lastIndex=d;var p=u.exec(e),g=p?p.index-d:e.length-d;if(g){var m=document.createTextNode(c.slice(d,d+g));s&&l<9?h.appendChild(L("span",[m])):h.appendChild(m),t.map.push(t.pos,t.pos+g,m),t.col+=g,t.pos+=g}if(!p)break;d+=g+1;var v=void 0;if("\t"==p[0]){var y=t.cm.options.tabSize,b=y-t.col%y;v=h.appendChild(L("span",J(b),"cm-tab")),v.setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),t.col+=b}else"\r"==p[0]||"\n"==p[0]?(v=h.appendChild(L("span","\r"==p[0]?"␍":"␤","cm-invalidchar")),v.setAttribute("cm-text",p[0]),t.col+=1):(v=t.cm.options.specialCharPlaceholder(p[0]),v.setAttribute("cm-text",p[0]),s&&l<9?h.appendChild(L("span",[v])):h.appendChild(v),t.col+=1);t.map.push(t.pos,t.pos+1,v),t.pos++}}else t.col+=e.length,h=document.createTextNode(c),t.map.push(t.pos,t.pos+e.length,h),s&&l<9&&(f=!0),t.pos+=e.length;if(t.trailingSpace=32==c.charCodeAt(e.length-1),n||i||r||f||o||a){var w=n||"";i&&(w+=i),r&&(w+=r);var x=L("span",[h],w,o);if(a)for(var S in a)a.hasOwnProperty(S)&&"style"!=S&&"class"!=S&&x.setAttribute(S,a[S]);return t.content.appendChild(x)}t.content.appendChild(h)}}function wn(t,e){if(t.length>1&&!/  /.test(t))return t;for(var n=e,i="",r=0;r<t.length;r++){var o=t.charAt(r);" "!=o||!n||r!=t.length-1&&32!=t.charCodeAt(r+1)||(o=" "),i+=o,n=" "==o}return i}function xn(t,e){return function(n,i,r,o,s,l,a){r=r?r+" cm-force-border":"cm-force-border";for(var h=n.pos,c=h+i.length;;){for(var u=void 0,f=0;f<e.length;f++)if(u=e[f],u.to>h&&u.from<=h)break;if(u.to>=c)return t(n,i,r,o,s,l,a);t(n,i.slice(0,u.to-h),r,o,null,l,a),o=null,i=i.slice(u.to-h),h=u.to}}}function Sn(t,e,n,i){var r=!i&&n.widgetNode;r&&t.map.push(t.pos,t.pos+e,r),!i&&t.cm.display.input.needsContentAttribute&&(r||(r=t.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(t.cm.display.input.setUneditable(r),t.content.appendChild(r)),t.pos+=e,t.trailingSpace=!1}function kn(t,e,n){var i=t.markedSpans,r=t.text,o=0;if(i)for(var s,l,a,h,c,u,f,d=r.length,p=0,g=1,m="",v=0;;){if(v==p){a=h=c=l="",f=null,u=null,v=1/0;for(var y=[],b=void 0,w=0;w<i.length;++w){var x=i[w],S=x.marker;if("bookmark"==S.type&&x.from==p&&S.widgetNode)y.push(S);else if(x.from<=p&&(null==x.to||x.to>p||S.collapsed&&x.to==p&&x.from==p)){if(null!=x.to&&x.to!=p&&v>x.to&&(v=x.to,h=""),S.className&&(a+=" "+S.className),S.css&&(l=(l?l+";":"")+S.css),S.startStyle&&x.from==p&&(c+=" "+S.startStyle),S.endStyle&&x.to==v&&(b||(b=[])).push(S.endStyle,x.to),S.title&&((f||(f={})).title=S.title),S.attributes)for(var k in S.attributes)(f||(f={}))[k]=S.attributes[k];S.collapsed&&(!u||$e(u.marker,S)<0)&&(u=x)}else x.from>p&&v>x.from&&(v=x.from)}if(b)for(var C=0;C<b.length;C+=2)b[C+1]==v&&(h+=" "+b[C]);if(!u||u.from==p)for(var M=0;M<y.length;++M)Sn(e,0,y[M]);if(u&&(u.from||0)==p){if(Sn(e,(null==u.to?d+1:u.to)-p,u.marker,null==u.from),null==u.to)return;u.to==p&&(u=!1)}}if(p>=d)break;var A=Math.min(d,v);while(1){if(m){var T=p+m.length;if(!u){var O=T>A?m.slice(0,A-p):m;e.addToken(e,O,s?s+a:a,c,p+O.length==v?h:"",l,f)}if(T>=A){m=m.slice(A-p),p=A;break}p=T,c=""}m=r.slice(o,o=n[g++]),s=mn(n[g++],e.cm.options)}}else for(var D=1;D<n.length;D+=2)e.addToken(e,r.slice(o,o=n[D]),mn(n[D+1],e.cm.options))}function Cn(t,e,n){this.line=e,this.rest=nn(e),this.size=this.rest?ie(Z(this.rest))-n+1:1,this.node=this.text=null,this.hidden=sn(t,e)}function Mn(t,e,n){for(var i,r=[],o=e;o<n;o=i){var s=new Cn(t.doc,Qt(t.doc,o),o);i=o+s.size,r.push(s)}return r}var An=null;function Tn(t){An?An.ops.push(t):t.ownsGroup=An={ops:[t],delayedCallbacks:[]}}function On(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n].call(null);for(var i=0;i<t.ops.length;i++){var r=t.ops[i];if(r.cursorActivityHandlers)while(r.cursorActivityCalled<r.cursorActivityHandlers.length)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<e.length)}function Dn(t,e){var n=t.ownsGroup;if(n)try{On(n)}finally{An=null,e(n)}}var Ln=null;function En(t,e){var n=yt(t,e);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);An?i=An.delayedCallbacks:Ln?i=Ln:(i=Ln=[],setTimeout(Nn,0));for(var o=function(t){i.push((function(){return n[t].apply(null,r)}))},s=0;s<n.length;++s)o(s)}}function Nn(){var t=Ln;Ln=null;for(var e=0;e<t.length;++e)t[e]()}function Pn(t,e,n,i){for(var r=0;r<e.changes.length;r++){var o=e.changes[r];"text"==o?Wn(t,e):"gutter"==o?Hn(t,e,n,i):"class"==o?Fn(t,e):"widget"==o&&_n(t,e,i)}e.changes=null}function In(t){return t.node==t.text&&(t.node=L("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),s&&l<8&&(t.node.style.zIndex=2)),t.node}function Rn(t,e){var n=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),e.background)n?e.background.className=n:(e.background.parentNode.removeChild(e.background),e.background=null);else if(n){var i=In(e);e.background=i.insertBefore(L("div",null,n),i.firstChild),t.display.input.setUneditable(e.background)}}function Bn(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):vn(t,e)}function Wn(t,e){var n=e.text.className,i=Bn(t,e);e.text==e.node&&(e.node=i.pre),e.text.parentNode.replaceChild(i.pre,e.text),e.text=i.pre,i.bgClass!=e.bgClass||i.textClass!=e.textClass?(e.bgClass=i.bgClass,e.textClass=i.textClass,Fn(t,e)):n&&(e.text.className=n)}function Fn(t,e){Rn(t,e),e.line.wrapClass?In(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var n=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=n||""}function Hn(t,e,n,i){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var r=In(e);e.gutterBackground=L("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),r.insertBefore(e.gutterBackground,e.text)}var o=e.line.gutterMarkers;if(t.options.lineNumbers||o){var s=In(e),l=e.gutter=L("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(l.setAttribute("aria-hidden","true"),t.display.input.setUneditable(l),s.insertBefore(l,e.text),e.line.gutterClass&&(l.className+=" "+e.line.gutterClass),!t.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(e.lineNumber=l.appendChild(L("div",se(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),o)for(var a=0;a<t.display.gutterSpecs.length;++a){var h=t.display.gutterSpecs[a].className,c=o.hasOwnProperty(h)&&o[h];c&&l.appendChild(L("div",[c],"CodeMirror-gutter-elt","left: "+i.gutterLeft[h]+"px; width: "+i.gutterWidth[h]+"px"))}}}function _n(t,e,n){e.alignable&&(e.alignable=null);for(var i=M("CodeMirror-linewidget"),r=e.node.firstChild,o=void 0;r;r=o)o=r.nextSibling,i.test(r.className)&&e.node.removeChild(r);Vn(t,e,n)}function zn(t,e,n,i){var r=Bn(t,e);return e.text=e.node=r.pre,r.bgClass&&(e.bgClass=r.bgClass),r.textClass&&(e.textClass=r.textClass),Fn(t,e),Hn(t,e,n,i),Vn(t,e,i),e.node}function Vn(t,e,n){if(jn(t,e.line,e,n,!0),e.rest)for(var i=0;i<e.rest.length;i++)jn(t,e.rest[i],e,n,!1)}function jn(t,e,n,i,r){if(e.widgets)for(var o=In(n),s=0,l=e.widgets;s<l.length;++s){var a=l[s],h=L("div",[a.node],"CodeMirror-linewidget"+(a.className?" "+a.className:""));a.handleMouseEvents||h.setAttribute("cm-ignore-events","true"),Un(a,h,n,i),t.display.input.setUneditable(h),r&&a.above?o.insertBefore(h,n.gutter||n.text):o.appendChild(h),En(a,"redraw")}}function Un(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var r=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(r-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function Kn(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!N(document.body,t.node)){var n="position: relative;";t.coverGutter&&(n+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(n+="width: "+e.display.wrapper.clientWidth+"px;"),D(e.display.measure,L("div",[t.node],null,n))}return t.height=t.node.parentNode.offsetHeight}function Gn(t,e){for(var n=Dt(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function qn(t){return t.lineSpace.offsetTop}function $n(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Xn(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=D(t.measure,L("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(t.cachedPaddingH=i),i}function Yn(t){return U-t.display.nativeBarWidth}function Jn(t){return t.display.scroller.clientWidth-Yn(t)-t.display.barWidth}function Zn(t){return t.display.scroller.clientHeight-Yn(t)-t.display.barHeight}function Qn(t,e,n){var i=t.options.lineWrapping,r=i&&Jn(t);if(!e.measure.heights||i&&e.measure.width!=r){var o=e.measure.heights=[];if(i){e.measure.width=r;for(var s=e.text.firstChild.getClientRects(),l=0;l<s.length-1;l++){var a=s[l],h=s[l+1];Math.abs(a.bottom-h.bottom)>2&&o.push((a.bottom+h.top)/2-n.top)}}o.push(n.bottom-n.top)}}function ti(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};if(t.rest){for(var i=0;i<t.rest.length;i++)if(t.rest[i]==e)return{map:t.measure.maps[i],cache:t.measure.caches[i]};for(var r=0;r<t.rest.length;r++)if(ie(t.rest[r])>n)return{map:t.measure.maps[r],cache:t.measure.caches[r],before:!0}}}function ei(t,e){e=tn(e);var n=ie(e),i=t.display.externalMeasured=new Cn(t.doc,e,n);i.lineN=n;var r=i.built=vn(t,i);return i.text=r.pre,D(t.display.lineMeasure,r.pre),i}function ni(t,e,n,i){return oi(t,ri(t,e),n,i)}function ii(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[Fi(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function ri(t,e){var n=ie(e),i=ii(t,n);i&&!i.text?i=null:i&&i.changes&&(Pn(t,i,n,Pi(t)),t.curOp.forceUpdate=!0),i||(i=ei(t,e));var r=ti(i,e,n);return{line:e,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function oi(t,e,n,i,r){e.before&&(n=-1);var o,s=n+(i||"");return e.cache.hasOwnProperty(s)?o=e.cache[s]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(Qn(t,e.view,e.rect),e.hasHeights=!0),o=ci(t,e,n,i),o.bogus||(e.cache[s]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}var si,li={left:0,right:0,top:0,bottom:0};function ai(t,e,n){for(var i,r,o,s,l,a,h=0;h<t.length;h+=3)if(l=t[h],a=t[h+1],e<l?(r=0,o=1,s="left"):e<a?(r=e-l,o=r+1):(h==t.length-3||e==a&&t[h+3]>e)&&(o=a-l,r=o-1,e>=a&&(s="right")),null!=r){if(i=t[h+2],l==a&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==r)while(h&&t[h-2]==t[h-3]&&t[h-1].insertLeft)i=t[2+(h-=3)],s="left";if("right"==n&&r==a-l)while(h<t.length-3&&t[h+3]==t[h+4]&&!t[h+5].insertLeft)i=t[(h+=3)+2],s="right";break}return{node:i,start:r,end:o,collapse:s,coverStart:l,coverEnd:a}}function hi(t,e){var n=li;if("left"==e){for(var i=0;i<t.length;i++)if((n=t[i]).left!=n.right)break}else for(var r=t.length-1;r>=0;r--)if((n=t[r]).left!=n.right)break;return n}function ci(t,e,n,i){var r,o=ai(e.map,n,i),a=o.node,h=o.start,c=o.end,u=o.collapse;if(3==a.nodeType){for(var f=0;f<4;f++){while(h&&at(e.line.text.charAt(o.coverStart+h)))--h;while(o.coverStart+c<o.coverEnd&&at(e.line.text.charAt(o.coverStart+c)))++c;if(r=s&&l<9&&0==h&&c==o.coverEnd-o.coverStart?a.parentNode.getBoundingClientRect():hi(A(a,h,c).getClientRects(),i),r.left||r.right||0==h)break;c=h,h-=1,u="right"}s&&l<11&&(r=ui(t.display.measure,r))}else{var d;h>0&&(u=i="right"),r=t.options.lineWrapping&&(d=a.getClientRects()).length>1?d["right"==i?d.length-1:0]:a.getBoundingClientRect()}if(s&&l<9&&!h&&(!r||!r.left&&!r.right)){var p=a.parentNode.getClientRects()[0];r=p?{left:p.left,right:p.left+Ni(t.display),top:p.top,bottom:p.bottom}:li}for(var g=r.top-e.rect.top,m=r.bottom-e.rect.top,v=(g+m)/2,y=e.view.measure.heights,b=0;b<y.length-1;b++)if(v<y[b])break;var w=b?y[b-1]:0,x=y[b],S={left:("right"==u?r.right:r.left)-e.rect.left,right:("left"==u?r.left:r.right)-e.rect.left,top:w,bottom:x};return r.left||r.right||(S.bogus=!0),t.options.singleCursorHeightPerLine||(S.rtop=g,S.rbottom=m),S}function ui(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!_t(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*i,bottom:e.bottom*i}}function fi(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function di(t){t.display.externalMeasure=null,O(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)fi(t.display.view[e])}function pi(t){di(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function gi(t){return c&&v?-(t.body.getBoundingClientRect().left-parseInt(getComputedStyle(t.body).marginLeft)):t.defaultView.pageXOffset||(t.documentElement||t.body).scrollLeft}function mi(t){return c&&v?-(t.body.getBoundingClientRect().top-parseInt(getComputedStyle(t.body).marginTop)):t.defaultView.pageYOffset||(t.documentElement||t.body).scrollTop}function vi(t){var e=tn(t),n=e.widgets,i=0;if(n)for(var r=0;r<n.length;++r)n[r].above&&(i+=Kn(n[r]));return i}function yi(t,e,n,i,r){if(!r){var o=vi(e);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var s=an(e);if("local"==i?s+=qn(t.display):s-=t.display.viewOffset,"page"==i||"window"==i){var l=t.display.lineSpace.getBoundingClientRect();s+=l.top+("window"==i?0:mi(W(t)));var a=l.left+("window"==i?0:gi(W(t)));n.left+=a,n.right+=a}return n.top+=s,n.bottom+=s,n}function bi(t,e,n){if("div"==n)return e;var i=e.left,r=e.top;if("page"==n)i-=gi(W(t)),r-=mi(W(t));else if("local"==n||!n){var o=t.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var s=t.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:r-s.top}}function wi(t,e,n,i,r){return i||(i=Qt(t.doc,e.line)),yi(t,i,ni(t,i,e.ch,r),n)}function xi(t,e,n,i,r,o){function s(e,s){var l=oi(t,r,e,s?"right":"left",o);return s?l.left=l.right:l.right=l.left,yi(t,i,l,n)}i=i||Qt(t.doc,e.line),r||(r=ri(t,i));var l=gt(i,t.doc.direction),a=e.ch,h=e.sticky;if(a>=i.text.length?(a=i.text.length,h="before"):a<=0&&(a=0,h="after"),!l)return s("before"==h?a-1:a,"before"==h);function c(t,e,n){var i=l[e],r=1==i.level;return s(n?t-1:t,r!=n)}var u=dt(l,a,h),f=ft,d=c(a,u,"before"==h);return null!=f&&(d.other=c(a,f,"before"!=h)),d}function Si(t,e){var n=0;e=pe(t.doc,e),t.options.lineWrapping||(n=Ni(t.display)*e.ch);var i=Qt(t.doc,e.line),r=an(i)+qn(t.display);return{left:n,right:n,top:r,bottom:r+i.height}}function ki(t,e,n,i,r){var o=le(t,e,n);return o.xRel=r,i&&(o.outside=i),o}function Ci(t,e,n){var i=t.doc;if(n+=t.display.viewOffset,n<0)return ki(i.first,0,null,-1,-1);var r=re(i,n),o=i.first+i.size-1;if(r>o)return ki(i.first+i.size-1,Qt(i,o).text.length,null,1,1);e<0&&(e=0);for(var s=Qt(i,r);;){var l=Oi(t,s,r,e,n),a=Ze(s,l.ch+(l.xRel>0||l.outside>0?1:0));if(!a)return l;var h=a.find(1);if(h.line==r)return h;s=Qt(i,r=h.line)}}function Mi(t,e,n,i){i-=vi(e);var r=e.text.length,o=ct((function(e){return oi(t,n,e-1).bottom<=i}),r,0);return r=ct((function(e){return oi(t,n,e).top>i}),o,r),{begin:o,end:r}}function Ai(t,e,n,i){n||(n=ri(t,e));var r=yi(t,e,oi(t,n,i),"line").top;return Mi(t,e,n,r)}function Ti(t,e,n,i){return!(t.bottom<=n)&&(t.top>n||(i?t.left:t.right)>e)}function Oi(t,e,n,i,r){r-=an(e);var o=ri(t,e),s=vi(e),l=0,a=e.text.length,h=!0,c=gt(e,t.doc.direction);if(c){var u=(t.options.lineWrapping?Li:Di)(t,e,n,o,c,i,r);h=1!=u.level,l=h?u.from:u.to-1,a=h?u.to:u.from-1}var f,d,p=null,g=null,m=ct((function(e){var n=oi(t,o,e);return n.top+=s,n.bottom+=s,!!Ti(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(p=e,g=n),!0)}),l,a),v=!1;if(g){var y=i-g.left<g.right-i,b=y==h;m=p+(b?0:1),d=b?"after":"before",f=y?g.left:g.right}else{h||m!=a&&m!=l||m++,d=0==m?"after":m==e.text.length?"before":oi(t,o,m-(h?1:0)).bottom+s<=r==h?"after":"before";var w=xi(t,le(n,m,d),"line",e,o);f=w.left,v=r<w.top?-1:r>=w.bottom?1:0}return m=ht(e.text,m,1),ki(n,m,d,v,i-f)}function Di(t,e,n,i,r,o,s){var l=ct((function(l){var a=r[l],h=1!=a.level;return Ti(xi(t,le(n,h?a.to:a.from,h?"before":"after"),"line",e,i),o,s,!0)}),0,r.length-1),a=r[l];if(l>0){var h=1!=a.level,c=xi(t,le(n,h?a.from:a.to,h?"after":"before"),"line",e,i);Ti(c,o,s,!0)&&c.top>s&&(a=r[l-1])}return a}function Li(t,e,n,i,r,o,s){var l=Mi(t,e,i,s),a=l.begin,h=l.end;/\s/.test(e.text.charAt(h-1))&&h--;for(var c=null,u=null,f=0;f<r.length;f++){var d=r[f];if(!(d.from>=h||d.to<=a)){var p=1!=d.level,g=oi(t,i,p?Math.min(h,d.to)-1:Math.max(a,d.from)).right,m=g<o?o-g+1e9:g-o;(!c||u>m)&&(c=d,u=m)}}return c||(c=r[r.length-1]),c.from<a&&(c={from:a,to:c.to,level:c.level}),c.to>h&&(c={from:c.from,to:h,level:c.level}),c}function Ei(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==si){si=L("pre",null,"CodeMirror-line-like");for(var e=0;e<49;++e)si.appendChild(document.createTextNode("x")),si.appendChild(L("br"));si.appendChild(document.createTextNode("x"))}D(t.measure,si);var n=si.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),O(t.measure),n||1}function Ni(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=L("span","xxxxxxxxxx"),n=L("pre",[e],"CodeMirror-line-like");D(t.measure,n);var i=e.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(t.cachedCharWidth=r),r||10}function Pi(t){for(var e=t.display,n={},i={},r=e.gutters.clientLeft,o=e.gutters.firstChild,s=0;o;o=o.nextSibling,++s){var l=t.display.gutterSpecs[s].className;n[l]=o.offsetLeft+o.clientLeft+r,i[l]=o.clientWidth}return{fixedPos:Ii(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function Ii(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function Ri(t){var e=Ei(t.display),n=t.options.lineWrapping,i=n&&Math.max(5,t.display.scroller.clientWidth/Ni(t.display)-3);return function(r){if(sn(t.doc,r))return 0;var o=0;if(r.widgets)for(var s=0;s<r.widgets.length;s++)r.widgets[s].height&&(o+=r.widgets[s].height);return n?o+(Math.ceil(r.text.length/i)||1)*e:o+e}}function Bi(t){var e=t.doc,n=Ri(t);e.iter((function(t){var e=n(t);e!=t.height&&ne(t,e)}))}function Wi(t,e,n,i){var r=t.display;if(!n&&"true"==Dt(e).getAttribute("cm-not-content"))return null;var o,s,l=r.lineSpace.getBoundingClientRect();try{o=e.clientX-l.left,s=e.clientY-l.top}catch(u){return null}var a,h=Ci(t,o,s);if(i&&h.xRel>0&&(a=Qt(t.doc,h.line).text).length==h.ch){var c=z(a,a.length,t.options.tabSize)-a.length;h=le(h.line,Math.max(0,Math.round((o-Xn(t.display).left)/Ni(t.display))-c))}return h}function Fi(t,e){if(e>=t.display.viewTo)return null;if(e-=t.display.viewFrom,e<0)return null;for(var n=t.display.view,i=0;i<n.length;i++)if(e-=n[i].size,e<0)return i}function Hi(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),i||(i=0);var r=t.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>e)&&(r.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=r.viewTo)Ne&&rn(t.doc,e)<r.viewTo&&zi(t);else if(n<=r.viewFrom)Ne&&on(t.doc,n+i)>r.viewFrom?zi(t):(r.viewFrom+=i,r.viewTo+=i);else if(e<=r.viewFrom&&n>=r.viewTo)zi(t);else if(e<=r.viewFrom){var o=Vi(t,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):zi(t)}else if(n>=r.viewTo){var s=Vi(t,e,e,-1);s?(r.view=r.view.slice(0,s.index),r.viewTo=s.lineN):zi(t)}else{var l=Vi(t,e,e,-1),a=Vi(t,n,n+i,1);l&&a?(r.view=r.view.slice(0,l.index).concat(Mn(t,l.lineN,a.lineN)).concat(r.view.slice(a.index)),r.viewTo+=i):zi(t)}var h=r.externalMeasured;h&&(n<h.lineN?h.lineN+=i:e<h.lineN+h.size&&(r.externalMeasured=null))}function _i(t,e,n){t.curOp.viewChanged=!0;var i=t.display,r=t.display.externalMeasured;if(r&&e>=r.lineN&&e<r.lineN+r.size&&(i.externalMeasured=null),!(e<i.viewFrom||e>=i.viewTo)){var o=i.view[Fi(t,e)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==j(s,n)&&s.push(n)}}}function zi(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function Vi(t,e,n,i){var r,o=Fi(t,e),s=t.display.view;if(!Ne||n==t.doc.first+t.doc.size)return{index:o,lineN:n};for(var l=t.display.viewFrom,a=0;a<o;a++)l+=s[a].size;if(l!=e){if(i>0){if(o==s.length-1)return null;r=l+s[o].size-e,o++}else r=l-e;e+=r,n+=r}while(rn(t.doc,n)!=n){if(o==(i<0?0:s.length-1))return null;n+=i*s[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function ji(t,e,n){var i=t.display,r=i.view;0==r.length||e>=i.viewTo||n<=i.viewFrom?(i.view=Mn(t,e,n),i.viewFrom=e):(i.viewFrom>e?i.view=Mn(t,e,i.viewFrom).concat(i.view):i.viewFrom<e&&(i.view=i.view.slice(Fi(t,e))),i.viewFrom=e,i.viewTo<n?i.view=i.view.concat(Mn(t,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,Fi(t,n)))),i.viewTo=n}function Ui(t){for(var e=t.display.view,n=0,i=0;i<e.length;i++){var r=e[i];r.hidden||r.node&&!r.changes||++n}return n}function Ki(t){t.display.input.showSelection(t.display.input.prepareSelection())}function Gi(t,e){void 0===e&&(e=!0);var n=t.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),s=t.options.$customCursor;s&&(e=!0);for(var l=0;l<n.sel.ranges.length;l++)if(e||l!=n.sel.primIndex){var a=n.sel.ranges[l];if(!(a.from().line>=t.display.viewTo||a.to().line<t.display.viewFrom)){var h=a.empty();if(s){var c=s(t,a);c&&qi(t,c,r)}else(h||t.options.showCursorWhenSelecting)&&qi(t,a.head,r);h||Xi(t,a,o)}}return i}function qi(t,e,n){var i=xi(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),r=n.appendChild(L("div"," ","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*t.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(t.getWrapperElement().className)){var o=wi(t,e,"div",null,null),s=o.right-o.left;r.style.width=(s>0?s:t.defaultCharWidth())+"px"}if(i.other){var l=n.appendChild(L("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));l.style.display="",l.style.left=i.other.left+"px",l.style.top=i.other.top+"px",l.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function $i(t,e){return t.top-e.top||t.left-e.left}function Xi(t,e,n){var i=t.display,r=t.doc,o=document.createDocumentFragment(),s=Xn(t.display),l=s.left,a=Math.max(i.sizerWidth,Jn(t)-i.sizer.offsetLeft)-s.right,h="ltr"==r.direction;function c(t,e,n,i){e<0&&(e=0),e=Math.round(e),i=Math.round(i),o.appendChild(L("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?a-t:n)+"px;\n                             height: "+(i-e)+"px"))}function u(e,n,i){var o,s,u=Qt(r,e),f=u.text.length;function d(n,i){return wi(t,le(e,n),"div",u,i)}function p(e,n,i){var r=Ai(t,u,null,e),o="ltr"==n==("after"==i)?"left":"right",s="after"==i?r.begin:r.end-(/\s/.test(u.text.charAt(r.end-1))?2:1);return d(s,o)[o]}var g=gt(u,r.direction);return ut(g,n||0,null==i?f:i,(function(t,e,r,u){var m="ltr"==r,v=d(t,m?"left":"right"),y=d(e-1,m?"right":"left"),b=null==n&&0==t,w=null==i&&e==f,x=0==u,S=!g||u==g.length-1;if(y.top-v.top<=3){var k=(h?b:w)&&x,C=(h?w:b)&&S,M=k?l:(m?v:y).left,A=C?a:(m?y:v).right;c(M,v.top,A-M,v.bottom)}else{var T,O,D,L;m?(T=h&&b&&x?l:v.left,O=h?a:p(t,r,"before"),D=h?l:p(e,r,"after"),L=h&&w&&S?a:y.right):(T=h?p(t,r,"before"):l,O=!h&&b&&x?a:v.right,D=!h&&w&&S?l:y.left,L=h?p(e,r,"after"):a),c(T,v.top,O-T,v.bottom),v.bottom<y.top&&c(l,v.bottom,null,y.top),c(D,y.top,L-D,y.bottom)}(!o||$i(v,o)<0)&&(o=v),$i(y,o)<0&&(o=y),(!s||$i(v,s)<0)&&(s=v),$i(y,s)<0&&(s=y)})),{start:o,end:s}}var f=e.from(),d=e.to();if(f.line==d.line)u(f.line,f.ch,d.ch);else{var p=Qt(r,f.line),g=Qt(r,d.line),m=tn(p)==tn(g),v=u(f.line,f.ch,m?p.text.length+1:null).end,y=u(d.line,m?0:null,d.ch).start;m&&(v.top<y.top-2?(c(v.right,v.top,null,v.bottom),c(l,y.top,y.left,y.bottom)):c(v.right,v.top,y.left-v.right,v.bottom)),v.bottom<y.top&&c(l,v.bottom,null,y.top)}n.appendChild(o)}function Yi(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval((function(){t.hasFocus()||tr(t),e.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function Ji(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||Qi(t))}function Zi(t){t.state.delayingBlurEvent=!0,setTimeout((function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&tr(t))}),100)}function Qi(t,e){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(wt(t,"focus",t,e),t.state.focused=!0,I(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),a&&setTimeout((function(){return t.display.input.reset(!0)}),20)),t.display.input.receivedFocus()),Yi(t))}function tr(t,e){t.state.delayingBlurEvent||(t.state.focused&&(wt(t,"blur",t,e),t.state.focused=!1,T(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout((function(){t.state.focused||(t.display.shift=!1)}),150))}function er(t){for(var e=t.display,n=e.lineDiv.offsetTop,i=Math.max(0,e.scroller.getBoundingClientRect().top),r=e.lineDiv.getBoundingClientRect().top,o=0,a=0;a<e.view.length;a++){var h=e.view[a],c=t.options.lineWrapping,u=void 0,f=0;if(!h.hidden){if(r+=h.line.height,s&&l<8){var d=h.node.offsetTop+h.node.offsetHeight;u=d-n,n=d}else{var p=h.node.getBoundingClientRect();u=p.bottom-p.top,!c&&h.text.firstChild&&(f=h.text.firstChild.getBoundingClientRect().right-p.left-1)}var g=h.line.height-u;if((g>.005||g<-.005)&&(r<i&&(o-=g),ne(h.line,u),nr(h.line),h.rest))for(var m=0;m<h.rest.length;m++)nr(h.rest[m]);if(f>t.display.sizerWidth){var v=Math.ceil(f/Ni(t.display));v>t.display.maxLineLength&&(t.display.maxLineLength=v,t.display.maxLine=h.line,t.display.maxLineChanged=!0)}}}Math.abs(o)>2&&(e.scroller.scrollTop+=o)}function nr(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var n=t.widgets[e],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function ir(t,e,n){var i=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;i=Math.floor(i-qn(t));var r=n&&null!=n.bottom?n.bottom:i+t.wrapper.clientHeight,o=re(e,i),s=re(e,r);if(n&&n.ensure){var l=n.ensure.from.line,a=n.ensure.to.line;l<o?(o=l,s=re(e,an(Qt(e,l))+t.wrapper.clientHeight)):Math.min(a,e.lastLine())>=s&&(o=re(e,an(Qt(e,a))-t.wrapper.clientHeight),s=a)}return{from:o,to:Math.max(s,o+1)}}function rr(t,e){if(!xt(t,"scrollCursorIntoView")){var n=t.display,i=n.sizer.getBoundingClientRect(),r=null,o=n.wrapper.ownerDocument;if(e.top+i.top<0?r=!0:e.bottom+i.top>(o.defaultView.innerHeight||o.documentElement.clientHeight)&&(r=!1),null!=r&&!g){var s=L("div","​",null,"position: absolute;\n                         top: "+(e.top-n.viewOffset-qn(t.display))+"px;\n                         height: "+(e.bottom-e.top+Yn(t)+n.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(s),s.scrollIntoView(r),t.display.lineSpace.removeChild(s)}}}function or(t,e,n,i){var r;null==i&&(i=0),t.options.lineWrapping||e!=n||(n="before"==e.sticky?le(e.line,e.ch+1,"before"):e,e=e.ch?le(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e);for(var o=0;o<5;o++){var s=!1,l=xi(t,e),a=n&&n!=e?xi(t,n):l;r={left:Math.min(l.left,a.left),top:Math.min(l.top,a.top)-i,right:Math.max(l.left,a.left),bottom:Math.max(l.bottom,a.bottom)+i};var h=lr(t,r),c=t.doc.scrollTop,u=t.doc.scrollLeft;if(null!=h.scrollTop&&(pr(t,h.scrollTop),Math.abs(t.doc.scrollTop-c)>1&&(s=!0)),null!=h.scrollLeft&&(mr(t,h.scrollLeft),Math.abs(t.doc.scrollLeft-u)>1&&(s=!0)),!s)break}return r}function sr(t,e){var n=lr(t,e);null!=n.scrollTop&&pr(t,n.scrollTop),null!=n.scrollLeft&&mr(t,n.scrollLeft)}function lr(t,e){var n=t.display,i=Ei(t.display);e.top<0&&(e.top=0);var r=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:n.scroller.scrollTop,o=Zn(t),s={};e.bottom-e.top>o&&(e.bottom=e.top+o);var l=t.doc.height+$n(n),a=e.top<i,h=e.bottom>l-i;if(e.top<r)s.scrollTop=a?0:e.top;else if(e.bottom>r+o){var c=Math.min(e.top,(h?l:e.bottom)-o);c!=r&&(s.scrollTop=c)}var u=t.options.fixedGutter?0:n.gutters.offsetWidth,f=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:n.scroller.scrollLeft-u,d=Jn(t)-n.gutters.offsetWidth,p=e.right-e.left>d;return p&&(e.right=e.left+d),e.left<10?s.scrollLeft=0:e.left<f?s.scrollLeft=Math.max(0,e.left+u-(p?0:10)):e.right>d+f-3&&(s.scrollLeft=e.right+(p?0:10)-d),s}function ar(t,e){null!=e&&(fr(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function hr(t){fr(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function cr(t,e,n){null==e&&null==n||fr(t),null!=e&&(t.curOp.scrollLeft=e),null!=n&&(t.curOp.scrollTop=n)}function ur(t,e){fr(t),t.curOp.scrollToPos=e}function fr(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;var n=Si(t,e.from),i=Si(t,e.to);dr(t,n,i,e.margin)}}function dr(t,e,n,i){var r=lr(t,{left:Math.min(e.left,n.left),top:Math.min(e.top,n.top)-i,right:Math.max(e.right,n.right),bottom:Math.max(e.bottom,n.bottom)+i});cr(t,r.scrollLeft,r.scrollTop)}function pr(t,e){Math.abs(t.doc.scrollTop-e)<2||(n||Kr(t,{top:e}),gr(t,e,!0),n&&Kr(t),Wr(t,100))}function gr(t,e,n){e=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e)),(t.display.scroller.scrollTop!=e||n)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function mr(t,e,n,i){e=Math.max(0,Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!i||(t.doc.scrollLeft=e,Xr(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function vr(t){var e=t.display,n=e.gutters.offsetWidth,i=Math.round(t.doc.height+$n(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Yn(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}var yr=function(t,e,n){this.cm=n;var i=this.vert=L("div",[L("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=L("div",[L("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=r.tabIndex=-1,t(i),t(r),vt(i,"scroll",(function(){i.clientHeight&&e(i.scrollTop,"vertical")})),vt(r,"scroll",(function(){r.clientWidth&&e(r.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,s&&l<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};yr.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,i=t.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=e?i+"px":"0";var r=t.viewHeight-(e?i:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+r)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=t.barLeft+"px";var o=t.viewWidth-t.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:e?i:0}},yr.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},yr.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},yr.prototype.zeroWidthHack=function(){var t=b&&!p?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new V,this.disableVert=new V},yr.prototype.enableZeroWidthBar=function(t,e,n){function i(){var r=t.getBoundingClientRect(),o="vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1);o!=t?t.style.visibility="hidden":e.set(1e3,i)}t.style.visibility="",e.set(1e3,i)},yr.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var br=function(){};function wr(t,e){e||(e=vr(t));var n=t.display.barWidth,i=t.display.barHeight;xr(t,e);for(var r=0;r<4&&n!=t.display.barWidth||i!=t.display.barHeight;r++)n!=t.display.barWidth&&t.options.lineWrapping&&er(t),xr(t,vr(t)),n=t.display.barWidth,i=t.display.barHeight}function xr(t,e){var n=t.display,i=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}br.prototype.update=function(){return{bottom:0,right:0}},br.prototype.setScrollLeft=function(){},br.prototype.setScrollTop=function(){},br.prototype.clear=function(){};var Sr={native:yr,null:br};function kr(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&T(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Sr[t.options.scrollbarStyle]((function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),vt(e,"mousedown",(function(){t.state.focused&&setTimeout((function(){return t.display.input.focus()}),0)})),e.setAttribute("cm-not-content","true")}),(function(e,n){"horizontal"==n?mr(t,e):pr(t,e)}),t),t.display.scrollbars.addClass&&I(t.display.wrapper,t.display.scrollbars.addClass)}var Cr=0;function Mr(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Cr,markArrays:null},Tn(t.curOp)}function Ar(t){var e=t.curOp;e&&Dn(e,(function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;Tr(t)}))}function Tr(t){for(var e=t.ops,n=0;n<e.length;n++)Or(e[n]);for(var i=0;i<e.length;i++)Dr(e[i]);for(var r=0;r<e.length;r++)Lr(e[r]);for(var o=0;o<e.length;o++)Er(e[o]);for(var s=0;s<e.length;s++)Nr(e[s])}function Or(t){var e=t.cm,n=e.display;_r(e),t.updateMaxLine&&cn(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new Hr(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function Dr(t){t.updatedDisplay=t.mustUpdate&&jr(t.cm,t.update)}function Lr(t){var e=t.cm,n=e.display;t.updatedDisplay&&er(e),t.barMeasure=vr(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=ni(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+Yn(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-Jn(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection())}function Er(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&mr(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var n=t.focus&&t.focus==P(W(e));t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,n),(t.updatedDisplay||t.startHeight!=e.doc.height)&&wr(e,t.barMeasure),t.updatedDisplay&&$r(e,t.barMeasure),t.selectionChanged&&Yi(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),n&&Ji(t.cm)}function Nr(t){var e=t.cm,n=e.display,i=e.doc;if(t.updatedDisplay&&Ur(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=t.scrollTop&&gr(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&mr(e,t.scrollLeft,!0,!0),t.scrollToPos){var r=or(e,pe(i,t.scrollToPos.from),pe(i,t.scrollToPos.to),t.scrollToPos.margin);rr(e,r)}var o=t.maybeHiddenMarkers,s=t.maybeUnhiddenMarkers;if(o)for(var l=0;l<o.length;++l)o[l].lines.length||wt(o[l],"hide");if(s)for(var a=0;a<s.length;++a)s[a].lines.length&&wt(s[a],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&wt(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function Pr(t,e){if(t.curOp)return e();Mr(t);try{return e()}finally{Ar(t)}}function Ir(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Mr(t);try{return e.apply(t,arguments)}finally{Ar(t)}}}function Rr(t){return function(){if(this.curOp)return t.apply(this,arguments);Mr(this);try{return t.apply(this,arguments)}finally{Ar(this)}}}function Br(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Mr(e);try{return t.apply(this,arguments)}finally{Ar(e)}}}function Wr(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,H(Fr,t))}function Fr(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,i=xe(t,e.highlightFrontier),r=[];e.iter(i.line,Math.min(e.first+e.size,t.display.viewTo+500),(function(o){if(i.line>=t.display.viewFrom){var s=o.styles,l=o.text.length>t.options.maxHighlightLength?Xt(e.mode,i.state):null,a=be(t,o,i,!0);l&&(i.state=l),o.styles=a.styles;var h=o.styleClasses,c=a.classes;c?o.styleClasses=c:h&&(o.styleClasses=null);for(var u=!s||s.length!=o.styles.length||h!=c&&(!h||!c||h.bgClass!=c.bgClass||h.textClass!=c.textClass),f=0;!u&&f<s.length;++f)u=s[f]!=o.styles[f];u&&r.push(i.line),o.stateAfter=i.save(),i.nextLine()}else o.text.length<=t.options.maxHighlightLength&&Se(t,o.text,i),o.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return Wr(t,t.options.workDelay),!0})),e.highlightFrontier=i.line,e.modeFrontier=Math.max(e.modeFrontier,i.line),r.length&&Pr(t,(function(){for(var e=0;e<r.length;e++)_i(t,r[e],"text")}))}}var Hr=function(t,e,n){var i=t.display;this.viewport=e,this.visible=ir(i,t.doc,e),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Jn(t),this.force=n,this.dims=Pi(t),this.events=[]};function _r(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=Yn(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=Yn(t)+"px",e.scrollbarsClipped=!0)}function zr(t){if(t.hasFocus())return null;var e=P(W(t));if(!e||!N(t.display.lineDiv,e))return null;var n={activeElt:e};if(window.getSelection){var i=F(t).getSelection();i.anchorNode&&i.extend&&N(t.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}function Vr(t){if(t&&t.activeElt&&t.activeElt!=P(t.activeElt.ownerDocument)&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&N(document.body,t.anchorNode)&&N(document.body,t.focusNode))){var e=t.activeElt.ownerDocument,n=e.defaultView.getSelection(),i=e.createRange();i.setEnd(t.anchorNode,t.anchorOffset),i.collapse(!1),n.removeAllRanges(),n.addRange(i),n.extend(t.focusNode,t.focusOffset)}}function jr(t,e){var n=t.display,i=t.doc;if(e.editorIsHidden)return zi(t),!1;if(!e.force&&e.visible.from>=n.viewFrom&&e.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Ui(t))return!1;Yr(t)&&(zi(t),e.dims=Pi(t));var r=i.first+i.size,o=Math.max(e.visible.from-t.options.viewportMargin,i.first),s=Math.min(r,e.visible.to+t.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(r,n.viewTo)),Ne&&(o=rn(t.doc,o),s=on(t.doc,s));var l=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=e.wrapperHeight||n.lastWrapWidth!=e.wrapperWidth;ji(t,o,s),n.viewOffset=an(Qt(t.doc,n.viewFrom)),t.display.mover.style.top=n.viewOffset+"px";var a=Ui(t);if(!l&&0==a&&!e.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var h=zr(t);return a>4&&(n.lineDiv.style.display="none"),Gr(t,n.updateLineNumbers,e.dims),a>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,Vr(h),O(n.cursorDiv),O(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,l&&(n.lastWrapHeight=e.wrapperHeight,n.lastWrapWidth=e.wrapperWidth,Wr(t,400)),n.updateLineNumbers=null,!0}function Ur(t,e){for(var n=e.viewport,i=!0;;i=!1){if(i&&t.options.lineWrapping&&e.oldDisplayWidth!=Jn(t))i&&(e.visible=ir(t.display,t.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(t.doc.height+$n(t.display)-Zn(t),n.top)}),e.visible=ir(t.display,t.doc,n),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break;if(!jr(t,e))break;er(t);var r=vr(t);Ki(t),wr(t,r),$r(t,r),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function Kr(t,e){var n=new Hr(t,e);if(jr(t,n)){er(t),Ur(t,n);var i=vr(t);Ki(t),wr(t,i),$r(t,i),n.finish()}}function Gr(t,e,n){var i=t.display,r=t.options.lineNumbers,o=i.lineDiv,s=o.firstChild;function l(e){var n=e.nextSibling;return a&&b&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var h=i.view,c=i.viewFrom,u=0;u<h.length;u++){var f=h[u];if(f.hidden);else if(f.node&&f.node.parentNode==o){while(s!=f.node)s=l(s);var d=r&&null!=e&&e<=c&&f.lineNumber;f.changes&&(j(f.changes,"gutter")>-1&&(d=!1),Pn(t,f,c,n)),d&&(O(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(se(t.options,c)))),s=f.node.nextSibling}else{var p=zn(t,f,c,n);o.insertBefore(p,s)}c+=f.size}while(s)s=l(s)}function qr(t){var e=t.gutters.offsetWidth;t.sizer.style.marginLeft=e+"px",En(t,"gutterChanged",t)}function $r(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+Yn(t)+"px"}function Xr(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var i=Ii(e)-e.scroller.scrollLeft+t.doc.scrollLeft,r=e.gutters.offsetWidth,o=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){t.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var l=n[s].alignable;if(l)for(var a=0;a<l.length;a++)l[a].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=i+r+"px")}}function Yr(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=se(t.options,e.first+e.size-1),i=t.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(L("div",[L("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,s=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",qr(t.display),!0}return!1}function Jr(t,e){for(var n=[],i=!1,r=0;r<t.length;r++){var o=t[r],s=null;if("string"!=typeof o&&(s=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!e)continue;i=!0}n.push({className:o,style:s})}return e&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function Zr(t){var e=t.gutters,n=t.gutterSpecs;O(e),t.lineGutter=null;for(var i=0;i<n.length;++i){var r=n[i],o=r.className,s=r.style,l=e.appendChild(L("div",null,"CodeMirror-gutter "+o));s&&(l.style.cssText=s),"CodeMirror-linenumbers"==o&&(t.lineGutter=l,l.style.width=(t.lineNumWidth||1)+"px")}e.style.display=n.length?"":"none",qr(t)}function Qr(t){Zr(t.display),Hi(t),Xr(t)}function to(t,e,i,r){var o=this;this.input=i,o.scrollbarFiller=L("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=L("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=E("div",null,"CodeMirror-code"),o.selectionDiv=L("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=L("div",null,"CodeMirror-cursors"),o.measure=L("div",null,"CodeMirror-measure"),o.lineMeasure=L("div",null,"CodeMirror-measure"),o.lineSpace=E("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var h=E("div",[o.lineSpace],"CodeMirror-lines");o.mover=L("div",[h],null,"position: relative"),o.sizer=L("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=L("div",null,null,"position: absolute; height: "+U+"px; width: 1px;"),o.gutters=L("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=L("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=L("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),c&&u>=105&&(o.wrapper.style.clipPath="inset(0px)"),o.wrapper.setAttribute("translate","no"),s&&l<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),a||n&&y||(o.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(o.wrapper):t(o.wrapper)),o.viewFrom=o.viewTo=e.first,o.reportedViewFrom=o.reportedViewTo=e.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=Jr(r.gutters,r.lineNumbers),Zr(o),i.init(o)}Hr.prototype.signal=function(t,e){kt(t,e)&&this.events.push(arguments)},Hr.prototype.finish=function(){for(var t=0;t<this.events.length;t++)wt.apply(null,this.events[t])};var eo=0,no=null;function io(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function ro(t){var e=io(t);return e.x*=no,e.y*=no,e}function oo(t,e){c&&102==u&&(null==t.display.chromeScrollHack?t.display.sizer.style.pointerEvents="none":clearTimeout(t.display.chromeScrollHack),t.display.chromeScrollHack=setTimeout((function(){t.display.chromeScrollHack=null,t.display.sizer.style.pointerEvents=""}),100));var i=io(e),r=i.x,o=i.y,s=no;0===e.deltaMode&&(r=e.deltaX,o=e.deltaY,s=1);var l=t.display,h=l.scroller,d=h.scrollWidth>h.clientWidth,p=h.scrollHeight>h.clientHeight;if(r&&d||o&&p){if(o&&b&&a)t:for(var g=e.target,m=l.view;g!=h;g=g.parentNode)for(var v=0;v<m.length;v++)if(m[v].node==g){t.display.currentWheelTarget=g;break t}if(r&&!n&&!f&&null!=s)return o&&p&&pr(t,Math.max(0,h.scrollTop+o*s)),mr(t,Math.max(0,h.scrollLeft+r*s)),(!o||o&&p)&&Mt(e),void(l.wheelStartX=null);if(o&&null!=s){var y=o*s,w=t.doc.scrollTop,x=w+l.wrapper.clientHeight;y<0?w=Math.max(0,w+y-50):x=Math.min(t.doc.height,x+y+50),Kr(t,{top:w,bottom:x})}eo<20&&0!==e.deltaMode&&(null==l.wheelStartX?(l.wheelStartX=h.scrollLeft,l.wheelStartY=h.scrollTop,l.wheelDX=r,l.wheelDY=o,setTimeout((function(){if(null!=l.wheelStartX){var t=h.scrollLeft-l.wheelStartX,e=h.scrollTop-l.wheelStartY,n=e&&l.wheelDY&&e/l.wheelDY||t&&l.wheelDX&&t/l.wheelDX;l.wheelStartX=l.wheelStartY=null,n&&(no=(no*eo+n)/(eo+1),++eo)}}),200)):(l.wheelDX+=r,l.wheelDY+=o))}}s?no=-.53:n?no=15:c?no=-.7:d&&(no=-1/3);var so=function(t,e){this.ranges=t,this.primIndex=e};so.prototype.primary=function(){return this.ranges[this.primIndex]},so.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],i=t.ranges[e];if(!he(n.anchor,i.anchor)||!he(n.head,i.head))return!1}return!0},so.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new lo(ce(this.ranges[e].anchor),ce(this.ranges[e].head));return new so(t,this.primIndex)},so.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},so.prototype.contains=function(t,e){e||(e=t);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(ae(e,i.from())>=0&&ae(t,i.to())<=0)return n}return-1};var lo=function(t,e){this.anchor=t,this.head=e};function ao(t,e,n){var i=t&&t.options.selectionsMayTouch,r=e[n];e.sort((function(t,e){return ae(t.from(),e.from())})),n=j(e,r);for(var o=1;o<e.length;o++){var s=e[o],l=e[o-1],a=ae(l.to(),s.from());if(i&&!s.empty()?a>0:a>=0){var h=fe(l.from(),s.from()),c=ue(l.to(),s.to()),u=l.empty()?s.from()==s.head:l.from()==l.head;o<=n&&--n,e.splice(--o,2,new lo(u?c:h,u?h:c))}}return new so(e,n)}function ho(t,e){return new so([new lo(t,e||t)],0)}function co(t){return t.text?le(t.from.line+t.text.length-1,Z(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function uo(t,e){if(ae(t,e.from)<0)return t;if(ae(t,e.to)<=0)return co(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,i=t.ch;return t.line==e.to.line&&(i+=co(e).ch-e.to.ch),le(n,i)}function fo(t,e){for(var n=[],i=0;i<t.sel.ranges.length;i++){var r=t.sel.ranges[i];n.push(new lo(uo(r.anchor,e),uo(r.head,e)))}return ao(t.cm,n,t.sel.primIndex)}function po(t,e,n){return t.line==e.line?le(n.line,t.ch-e.ch+n.ch):le(n.line+(t.line-e.line),t.ch)}function go(t,e,n){for(var i=[],r=le(t.first,0),o=r,s=0;s<e.length;s++){var l=e[s],a=po(l.from,r,o),h=po(co(l),r,o);if(r=l.to,o=h,"around"==n){var c=t.sel.ranges[s],u=ae(c.head,c.anchor)<0;i[s]=new lo(u?h:a,u?a:h)}else i[s]=new lo(a,a)}return new so(i,t.sel.primIndex)}function mo(t){t.doc.mode=Gt(t.options,t.doc.modeOption),vo(t)}function vo(t){t.doc.iter((function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)})),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,Wr(t,100),t.state.modeGen++,t.curOp&&Hi(t)}function yo(t,e){return 0==e.from.ch&&0==e.to.ch&&""==Z(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function bo(t,e,n,i){function r(t){return n?n[t]:null}function o(t,n,r){fn(t,n,r,i),En(t,"change",t,e)}function s(t,e){for(var n=[],o=t;o<e;++o)n.push(new un(h[o],r(o),i));return n}var l=e.from,a=e.to,h=e.text,c=Qt(t,l.line),u=Qt(t,a.line),f=Z(h),d=r(h.length-1),p=a.line-l.line;if(e.full)t.insert(0,s(0,h.length)),t.remove(h.length,t.size-h.length);else if(yo(t,e)){var g=s(0,h.length-1);o(u,u.text,d),p&&t.remove(l.line,p),g.length&&t.insert(l.line,g)}else if(c==u)if(1==h.length)o(c,c.text.slice(0,l.ch)+f+c.text.slice(a.ch),d);else{var m=s(1,h.length-1);m.push(new un(f+c.text.slice(a.ch),d,i)),o(c,c.text.slice(0,l.ch)+h[0],r(0)),t.insert(l.line+1,m)}else if(1==h.length)o(c,c.text.slice(0,l.ch)+h[0]+u.text.slice(a.ch),r(0)),t.remove(l.line+1,p);else{o(c,c.text.slice(0,l.ch)+h[0],r(0)),o(u,f+u.text.slice(a.ch),d);var v=s(1,h.length-1);p>1&&t.remove(l.line+1,p-1),t.insert(l.line+1,v)}En(t,"change",t,e)}function wo(t,e,n){function i(t,r,o){if(t.linked)for(var s=0;s<t.linked.length;++s){var l=t.linked[s];if(l.doc!=r){var a=o&&l.sharedHist;n&&!a||(e(l.doc,a),i(l.doc,t,a))}}}i(t,null,!0)}function xo(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,Bi(t),mo(t),So(t),t.options.direction=e.direction,t.options.lineWrapping||cn(t),t.options.mode=e.modeOption,Hi(t)}function So(t){("rtl"==t.doc.direction?I:T)(t.display.lineDiv,"CodeMirror-rtl")}function ko(t){Pr(t,(function(){So(t),Hi(t)}))}function Co(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function Mo(t,e){var n={from:ce(e.from),to:co(e),text:te(t,e.from,e.to)};return No(t,n,e.from.line,e.to.line+1),wo(t,(function(t){return No(t,n,e.from.line,e.to.line+1)}),!0),n}function Ao(t){while(t.length){var e=Z(t);if(!e.ranges)break;t.pop()}}function To(t,e){return e?(Ao(t.done),Z(t.done)):t.done.length&&!Z(t.done).ranges?Z(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),Z(t.done)):void 0}function Oo(t,e,n,i){var r=t.history;r.undone.length=0;var o,s,l=+new Date;if((r.lastOp==i||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&r.lastModTime>l-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0)))&&(o=To(r,r.lastOp==i)))s=Z(o.changes),0==ae(e.from,e.to)&&0==ae(e.from,s.to)?s.to=co(e):o.changes.push(Mo(t,e));else{var a=Z(r.done);a&&a.ranges||Eo(t.sel,r.done),o={changes:[Mo(t,e)],generation:r.generation},r.done.push(o);while(r.done.length>r.undoDepth)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=l,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=e.origin,s||wt(t,"historyAdded")}function Do(t,e,n,i){var r=e.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function Lo(t,e,n,i){var r=t.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||Do(t,o,Z(r.done),e))?r.done[r.done.length-1]=e:Eo(e,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&!1!==i.clearRedo&&Ao(r.undone)}function Eo(t,e){var n=Z(e);n&&n.ranges&&n.equals(t)||e.push(t)}function No(t,e,n,i){var r=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,i),(function(n){n.markedSpans&&((r||(r=e["spans_"+t.id]={}))[o]=n.markedSpans),++o}))}function Po(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function Io(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=[],r=0;r<e.text.length;++r)i.push(Po(n[r]));return i}function Ro(t,e){var n=Io(t,e),i=ze(t,e);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],s=i[r];if(o&&s)t:for(var l=0;l<s.length;++l){for(var a=s[l],h=0;h<o.length;++h)if(o[h].marker==a.marker)continue t;o.push(a)}else s&&(n[r]=s)}return n}function Bo(t,e,n){for(var i=[],r=0;r<t.length;++r){var o=t[r];if(o.ranges)i.push(n?so.prototype.deepCopy.call(o):o);else{var s=o.changes,l=[];i.push({changes:l});for(var a=0;a<s.length;++a){var h=s[a],c=void 0;if(l.push({from:h.from,to:h.to,text:h.text}),e)for(var u in h)(c=u.match(/^spans_(\d+)$/))&&j(e,Number(c[1]))>-1&&(Z(l)[u]=h[u],delete h[u])}}}return i}function Wo(t,e,n,i){if(i){var r=t.anchor;if(n){var o=ae(e,r)<0;o!=ae(n,r)<0?(r=e,e=n):o!=ae(e,n)<0&&(e=n)}return new lo(r,e)}return new lo(n||e,e)}function Fo(t,e,n,i,r){null==r&&(r=t.cm&&(t.cm.display.shift||t.extend)),Uo(t,new so([Wo(t.sel.primary(),e,n,r)],0),i)}function Ho(t,e,n){for(var i=[],r=t.cm&&(t.cm.display.shift||t.extend),o=0;o<t.sel.ranges.length;o++)i[o]=Wo(t.sel.ranges[o],e[o],null,r);var s=ao(t.cm,i,t.sel.primIndex);Uo(t,s,n)}function _o(t,e,n,i){var r=t.sel.ranges.slice(0);r[e]=n,Uo(t,ao(t.cm,r,t.sel.primIndex),i)}function zo(t,e,n,i){Uo(t,ho(e,n),i)}function Vo(t,e,n){var i={ranges:e.ranges,update:function(e){this.ranges=[];for(var n=0;n<e.length;n++)this.ranges[n]=new lo(pe(t,e[n].anchor),pe(t,e[n].head))},origin:n&&n.origin};return wt(t,"beforeSelectionChange",t,i),t.cm&&wt(t.cm,"beforeSelectionChange",t.cm,i),i.ranges!=e.ranges?ao(t.cm,i.ranges,i.ranges.length-1):e}function jo(t,e,n){var i=t.history.done,r=Z(i);r&&r.ranges?(i[i.length-1]=e,Ko(t,e,n)):Uo(t,e,n)}function Uo(t,e,n){Ko(t,e,n),Lo(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function Ko(t,e,n){(kt(t,"beforeSelectionChange")||t.cm&&kt(t.cm,"beforeSelectionChange"))&&(e=Vo(t,e,n));var i=n&&n.bias||(ae(e.primary().head,t.sel.primary().head)<0?-1:1);Go(t,$o(t,e,i,!0)),n&&!1===n.scroll||!t.cm||"nocursor"==t.cm.getOption("readOnly")||hr(t.cm)}function Go(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,St(t.cm)),En(t,"cursorActivity",t))}function qo(t){Go(t,$o(t,t.sel,null,!1))}function $o(t,e,n,i){for(var r,o=0;o<e.ranges.length;o++){var s=e.ranges[o],l=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[o],a=Yo(t,s.anchor,l&&l.anchor,n,i),h=s.head==s.anchor?a:Yo(t,s.head,l&&l.head,n,i);(r||a!=s.anchor||h!=s.head)&&(r||(r=e.ranges.slice(0,o)),r[o]=new lo(a,h))}return r?ao(t.cm,r,e.primIndex):e}function Xo(t,e,n,i,r){var o=Qt(t,e.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var l=o.markedSpans[s],a=l.marker,h="selectLeft"in a?!a.selectLeft:a.inclusiveLeft,c="selectRight"in a?!a.selectRight:a.inclusiveRight;if((null==l.from||(h?l.from<=e.ch:l.from<e.ch))&&(null==l.to||(c?l.to>=e.ch:l.to>e.ch))){if(r&&(wt(a,"beforeCursorEnter"),a.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!a.atomic)continue;if(n){var u=a.find(i<0?1:-1),f=void 0;if((i<0?c:h)&&(u=Jo(t,u,-i,u&&u.line==e.line?o:null)),u&&u.line==e.line&&(f=ae(u,n))&&(i<0?f<0:f>0))return Xo(t,u,e,i,r)}var d=a.find(i<0?-1:1);return(i<0?h:c)&&(d=Jo(t,d,i,d.line==e.line?o:null)),d?Xo(t,d,e,i,r):null}}return e}function Yo(t,e,n,i,r){var o=i||1,s=Xo(t,e,n,o,r)||!r&&Xo(t,e,n,o,!0)||Xo(t,e,n,-o,r)||!r&&Xo(t,e,n,-o,!0);return s||(t.cantEdit=!0,le(t.first,0))}function Jo(t,e,n,i){return n<0&&0==e.ch?e.line>t.first?pe(t,le(e.line-1)):null:n>0&&e.ch==(i||Qt(t,e.line)).text.length?e.line<t.first+t.size-1?le(e.line+1,0):null:new le(e.line,e.ch+n)}function Zo(t){t.setSelection(le(t.firstLine(),0),le(t.lastLine()),G)}function Qo(t,e,n){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(e,n,r,o){e&&(i.from=pe(t,e)),n&&(i.to=pe(t,n)),r&&(i.text=r),void 0!==o&&(i.origin=o)}),wt(t,"beforeChange",t,i),t.cm&&wt(t.cm,"beforeChange",t.cm,i),i.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function ts(t,e,n){if(t.cm){if(!t.cm.curOp)return Ir(t.cm,ts)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(kt(t,"beforeChange")||t.cm&&kt(t.cm,"beforeChange"))||(e=Qo(t,e,!0),e)){var i=Ee&&!n&&je(t,e.from,e.to);if(i)for(var r=i.length-1;r>=0;--r)es(t,{from:i[r].from,to:i[r].to,text:r?[""]:e.text,origin:e.origin});else es(t,e)}}function es(t,e){if(1!=e.text.length||""!=e.text[0]||0!=ae(e.from,e.to)){var n=fo(t,e);Oo(t,e,n,t.cm?t.cm.curOp.id:NaN),rs(t,e,n,ze(t,e));var i=[];wo(t,(function(t,n){n||-1!=j(i,t.history)||(hs(t.history,e),i.push(t.history)),rs(t,e,null,ze(t,e))}))}}function ns(t,e,n){var i=t.cm&&t.cm.state.suppressEdits;if(!i||n){for(var r,o=t.history,s=t.sel,l="undo"==e?o.done:o.undone,a="undo"==e?o.undone:o.done,h=0;h<l.length;h++)if(r=l[h],n?r.ranges&&!r.equals(t.sel):!r.ranges)break;if(h!=l.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(r=l.pop(),!r.ranges){if(i)return void l.push(r);break}if(Eo(r,a),n&&!r.equals(t.sel))return void Uo(t,r,{clearRedo:!1});s=r}var c=[];Eo(s,a),a.push({changes:c,generation:o.generation}),o.generation=r.generation||++o.maxGeneration;for(var u=kt(t,"beforeChange")||t.cm&&kt(t.cm,"beforeChange"),f=function(n){var i=r.changes[n];if(i.origin=e,u&&!Qo(t,i,!1))return l.length=0,{};c.push(Mo(t,i));var o=n?fo(t,i):Z(l);rs(t,i,o,Ro(t,i)),!n&&t.cm&&t.cm.scrollIntoView({from:i.from,to:co(i)});var s=[];wo(t,(function(t,e){e||-1!=j(s,t.history)||(hs(t.history,i),s.push(t.history)),rs(t,i,null,Ro(t,i))}))},d=r.changes.length-1;d>=0;--d){var p=f(d);if(p)return p.v}}}}function is(t,e){if(0!=e&&(t.first+=e,t.sel=new so(Q(t.sel.ranges,(function(t){return new lo(le(t.anchor.line+e,t.anchor.ch),le(t.head.line+e,t.head.ch))})),t.sel.primIndex),t.cm)){Hi(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,i=n.viewFrom;i<n.viewTo;i++)_i(t.cm,i,"gutter")}}function rs(t,e,n,i){if(t.cm&&!t.cm.curOp)return Ir(t.cm,rs)(t,e,n,i);if(e.to.line<t.first)is(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);is(t,r),e={from:le(t.first,0),to:le(e.to.line+r,e.to.ch),text:[Z(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:le(o,Qt(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=te(t,e.from,e.to),n||(n=fo(t,e)),t.cm?os(t.cm,e,i):bo(t,e,i),Ko(t,n,G),t.cantEdit&&Yo(t,le(t.firstLine(),0))&&(t.cantEdit=!1)}}function os(t,e,n){var i=t.doc,r=t.display,o=e.from,s=e.to,l=!1,a=o.line;t.options.lineWrapping||(a=ie(tn(Qt(i,o.line))),i.iter(a,s.line+1,(function(t){if(t==r.maxLine)return l=!0,!0}))),i.sel.contains(e.from,e.to)>-1&&St(t),bo(i,e,n,Ri(t)),t.options.lineWrapping||(i.iter(a,o.line+e.text.length,(function(t){var e=hn(t);e>r.maxLineLength&&(r.maxLine=t,r.maxLineLength=e,r.maxLineChanged=!0,l=!1)})),l&&(t.curOp.updateMaxLine=!0)),Le(i,o.line),Wr(t,400);var h=e.text.length-(s.line-o.line)-1;e.full?Hi(t):o.line!=s.line||1!=e.text.length||yo(t.doc,e)?Hi(t,o.line,s.line+1,h):_i(t,o.line,"text");var c=kt(t,"changes"),u=kt(t,"change");if(u||c){var f={from:o,to:s,text:e.text,removed:e.removed,origin:e.origin};u&&En(t,"change",t,f),c&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(f)}t.display.selForContextMenu=null}function ss(t,e,n,i,r){var o;i||(i=n),ae(i,n)<0&&(o=[i,n],n=o[0],i=o[1]),"string"==typeof e&&(e=t.splitLines(e)),ts(t,{from:n,to:i,text:e,origin:r})}function ls(t,e,n,i){n<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function as(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r],s=!0;if(o.ranges){o.copied||(o=t[r]=o.deepCopy(),o.copied=!0);for(var l=0;l<o.ranges.length;l++)ls(o.ranges[l].anchor,e,n,i),ls(o.ranges[l].head,e,n,i)}else{for(var a=0;a<o.changes.length;++a){var h=o.changes[a];if(n<h.from.line)h.from=le(h.from.line+i,h.from.ch),h.to=le(h.to.line+i,h.to.ch);else if(e<=h.to.line){s=!1;break}}s||(t.splice(0,r+1),r=0)}}}function hs(t,e){var n=e.from.line,i=e.to.line,r=e.text.length-(i-n)-1;as(t.done,n,i,r),as(t.undone,n,i,r)}function cs(t,e,n,i){var r=e,o=e;return"number"==typeof e?o=Qt(t,de(t,e)):r=ie(e),null==r?null:(i(o,r)&&t.cm&&_i(t.cm,r,n),o)}function us(t){this.lines=t,this.parent=null;for(var e=0,n=0;n<t.length;++n)t[n].parent=this,e+=t[n].height;this.height=e}function fs(t){this.children=t;for(var e=0,n=0,i=0;i<t.length;++i){var r=t[i];e+=r.chunkSize(),n+=r.height,r.parent=this}this.size=e,this.height=n,this.parent=null}lo.prototype.from=function(){return fe(this.anchor,this.head)},lo.prototype.to=function(){return ue(this.anchor,this.head)},lo.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},us.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,i=t+e;n<i;++n){var r=this.lines[n];this.height-=r.height,dn(r),En(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0;i<e.length;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;t<i;++t)if(n(this.lines[t]))return!0}},fs.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(t<r){var o=Math.min(e,r-t),s=i.height;if(i.removeInner(t,o),this.height-=s-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(e-=o))break;t=0}else t-=r}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof us))){var l=[];this.collapse(l),this.children=[new us(l)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(t<=o){if(r.insertInner(t,e,n),r.lines&&r.lines.length>50){for(var s=r.lines.length%25+25,l=s;l<r.lines.length;){var a=new us(r.lines.slice(l,l+=25));r.height-=a.height,this.children.splice(++i,0,a),a.parent=this}r.lines=r.lines.slice(0,s),this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new fs(e);if(t.parent){t.size-=n.size,t.height-=n.height;var i=j(t.parent.children,t);t.parent.children.splice(i+1,0,n)}else{var r=new fs(t.children);r.parent=t,t.children=[r,n],t=r}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(t<o){var s=Math.min(e,o-t);if(r.iterN(t,s,n))return!0;if(0==(e-=s))break;t=0}else t-=o}}};var ds=function(t,e,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=t,this.node=e};function ps(t,e,n){an(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&ar(t,n)}function gs(t,e,n,i){var r=new ds(t,n,i),o=t.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),cs(t,e,"widget",(function(e){var n=e.widgets||(e.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length,Math.max(0,r.insertAt)),0,r),r.line=e,o&&!sn(t,e)){var i=an(e)<t.scrollTop;ne(e,e.height+Kn(r)),i&&ar(o,r.height),o.curOp.forceUpdate=!0}return!0})),o&&En(o,"lineWidgetAdded",o,r,"number"==typeof e?e:ie(e)),r}ds.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,n=this.line,i=ie(n);if(null!=i&&e){for(var r=0;r<e.length;++r)e[r]==this&&e.splice(r--,1);e.length||(n.widgets=null);var o=Kn(this);ne(n,Math.max(0,n.height-o)),t&&(Pr(t,(function(){ps(t,n,-o),_i(t,i,"widget")})),En(t,"lineWidgetCleared",t,this,i))}},ds.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=Kn(this)-e;r&&(sn(this.doc,i)||ne(i,i.height+r),n&&Pr(n,(function(){n.curOp.forceUpdate=!0,ps(n,i,r),En(n,"lineWidgetChanged",n,t,ie(i))})))},Ct(ds);var ms=0,vs=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++ms};function ys(t,e,n,i,r){if(i&&i.shared)return ws(t,e,n,i,r);if(t.cm&&!t.cm.curOp)return Ir(t.cm,ys)(t,e,n,i,r);var o=new vs(t,r),s=ae(e,n);if(i&&_(i,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=E("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Qe(t,e.line,e,n,o)||e.line!=n.line&&Qe(t,n.line,e,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ie()}o.addToHistory&&Oo(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var l,a=e.line,h=t.cm;if(t.iter(a,n.line+1,(function(i){h&&o.collapsed&&!h.options.lineWrapping&&tn(i)==h.display.maxLine&&(l=!0),o.collapsed&&a!=e.line&&ne(i,0),Fe(i,new Re(o,a==e.line?e.ch:null,a==n.line?n.ch:null),t.cm&&t.cm.curOp),++a})),o.collapsed&&t.iter(e.line,n.line+1,(function(e){sn(t,e)&&ne(e,0)})),o.clearOnEnter&&vt(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(Pe(),(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++ms,o.atomic=!0),h){if(l&&(h.curOp.updateMaxLine=!0),o.collapsed)Hi(h,e.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=e.line;c<=n.line;c++)_i(h,c,"text");o.atomic&&qo(h.doc),En(h,"markerAdded",h,o)}return o}vs.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Mr(t),kt(this,"clear")){var n=this.find();n&&En(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var s=this.lines[o],l=Be(s.markedSpans,this);t&&!this.collapsed?_i(t,ie(s),"text"):t&&(null!=l.to&&(r=ie(s)),null!=l.from&&(i=ie(s))),s.markedSpans=We(s.markedSpans,l),null==l.from&&this.collapsed&&!sn(this.doc,s)&&t&&ne(s,Ei(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var a=0;a<this.lines.length;++a){var h=tn(this.lines[a]),c=hn(h);c>t.display.maxLineLength&&(t.display.maxLine=h,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&Hi(t,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&qo(t.doc)),t&&En(t,"markerCleared",t,this,i,r),e&&Ar(t),this.parent&&this.parent.clear()}},vs.prototype.find=function(t,e){var n,i;null==t&&"bookmark"==this.type&&(t=1);for(var r=0;r<this.lines.length;++r){var o=this.lines[r],s=Be(o.markedSpans,this);if(null!=s.from&&(n=le(e?o:ie(o),s.from),-1==t))return n;if(null!=s.to&&(i=le(e?o:ie(o),s.to),1==t))return i}return n&&{from:n,to:i}},vs.prototype.changed=function(){var t=this,e=this.find(-1,!0),n=this,i=this.doc.cm;e&&i&&Pr(i,(function(){var r=e.line,o=ie(e.line),s=ii(i,o);if(s&&(fi(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!sn(n.doc,r)&&null!=n.height){var l=n.height;n.height=null;var a=Kn(n)-l;a&&ne(r,r.height+a)}En(i,"markerChanged",i,t)}))},vs.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=j(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},vs.prototype.detachLine=function(t){if(this.lines.splice(j(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},Ct(vs);var bs=function(t,e){this.markers=t,this.primary=e;for(var n=0;n<t.length;++n)t[n].parent=this};function ws(t,e,n,i,r){i=_(i),i.shared=!1;var o=[ys(t,e,n,i,r)],s=o[0],l=i.widgetNode;return wo(t,(function(t){l&&(i.widgetNode=l.cloneNode(!0)),o.push(ys(t,pe(t,e),pe(t,n),i,r));for(var a=0;a<t.linked.length;++a)if(t.linked[a].isParent)return;s=Z(o)})),new bs(o,s)}function xs(t){return t.findMarks(le(t.first,0),t.clipPos(le(t.lastLine())),(function(t){return t.parent}))}function Ss(t,e){for(var n=0;n<e.length;n++){var i=e[n],r=i.find(),o=t.clipPos(r.from),s=t.clipPos(r.to);if(ae(o,s)){var l=ys(t,o,s,i.primary,i.primary.type);i.markers.push(l),l.parent=i}}}function ks(t){for(var e=function(e){var n=t[e],i=[n.primary.doc];wo(n.primary.doc,(function(t){return i.push(t)}));for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==j(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}},n=0;n<t.length;n++)e(n)}bs.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();En(this,"clear")}},bs.prototype.find=function(t,e){return this.primary.find(t,e)},Ct(bs);var Cs=0,Ms=function(t,e,n,i,r){if(!(this instanceof Ms))return new Ms(t,e,n,i,r);null==n&&(n=0),fs.call(this,[new us([new un("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=le(n,0);this.sel=ho(o),this.history=new Co(null),this.id=++Cs,this.modeOption=e,this.lineSep=i,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),bo(this,{from:o,to:o,text:t}),Uo(this,ho(o),G)};Ms.prototype=nt(fs.prototype,{constructor:Ms,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0;i<e.length;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=ee(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:Br((function(t){var e=le(this.first,0),n=this.first+this.size-1;ts(this,{from:e,to:le(n,Qt(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&cr(this.cm,0,0),Uo(this,ho(e),G)})),replaceRange:function(t,e,n,i){e=pe(this,e),n=n?pe(this,n):e,ss(this,t,e,n,i)},getRange:function(t,e,n){var i=te(this,pe(this,t),pe(this,e));return!1===n?i:""===n?i.join(""):i.join(n||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(oe(this,t))return Qt(this,t)},getLineNumber:function(t){return ie(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=Qt(this,t)),tn(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return pe(this,t)},getCursor:function(t){var e,n=this.sel.primary();return e=null==t||"head"==t?n.head:"anchor"==t?n.anchor:"end"==t||"to"==t||!1===t?n.to():n.from(),e},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Br((function(t,e,n){zo(this,pe(this,"number"==typeof t?le(t,e||0):t),null,n)})),setSelection:Br((function(t,e,n){zo(this,pe(this,t),pe(this,e||t),n)})),extendSelection:Br((function(t,e,n){Fo(this,pe(this,t),e&&pe(this,e),n)})),extendSelections:Br((function(t,e){Ho(this,me(this,t),e)})),extendSelectionsBy:Br((function(t,e){var n=Q(this.sel.ranges,t);Ho(this,me(this,n),e)})),setSelections:Br((function(t,e,n){if(t.length){for(var i=[],r=0;r<t.length;r++)i[r]=new lo(pe(this,t[r].anchor),pe(this,t[r].head||t[r].anchor));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),Uo(this,ao(this.cm,i,e),n)}})),addSelection:Br((function(t,e,n){var i=this.sel.ranges.slice(0);i.push(new lo(pe(this,t),pe(this,e||t))),Uo(this,ao(this.cm,i,i.length-1),n)})),getSelection:function(t){for(var e,n=this.sel.ranges,i=0;i<n.length;i++){var r=te(this,n[i].from(),n[i].to());e=e?e.concat(r):r}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=te(this,n[i].from(),n[i].to());!1!==t&&(r=r.join(t||this.lineSeparator())),e[i]=r}return e},replaceSelection:function(t,e,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=t;this.replaceSelections(i,e,n||"+input")},replaceSelections:Br((function(t,e,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var s=r.ranges[o];i[o]={from:s.from(),to:s.to(),text:this.splitLines(t[o]),origin:n}}for(var l=e&&"end"!=e&&go(this,i,e),a=i.length-1;a>=0;a--)ts(this,i[a]);l?jo(this,l):this.cm&&hr(this.cm)})),undo:Br((function(){ns(this,"undo")})),redo:Br((function(){ns(this,"redo")})),undoSelection:Br((function(){ns(this,"undo",!0)})),redoSelection:Br((function(){ns(this,"redo",!0)})),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,i=0;i<t.done.length;i++)t.done[i].ranges||++e;for(var r=0;r<t.undone.length;r++)t.undone[r].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){var t=this;this.history=new Co(this.history),wo(this,(function(e){return e.history=t.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Bo(this.history.done),undone:Bo(this.history.undone)}},setHistory:function(t){var e=this.history=new Co(this.history);e.done=Bo(t.done.slice(0),null,!0),e.undone=Bo(t.undone.slice(0),null,!0)},setGutterMarker:Br((function(t,e,n){return cs(this,t,"gutter",(function(t){var i=t.gutterMarkers||(t.gutterMarkers={});return i[e]=n,!n&&st(i)&&(t.gutterMarkers=null),!0}))})),clearGutter:Br((function(t){var e=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[t]&&cs(e,n,"gutter",(function(){return n.gutterMarkers[t]=null,st(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(t){var e;if("number"==typeof t){if(!oe(this,t))return null;if(e=t,t=Qt(this,t),!t)return null}else if(e=ie(t),null==e)return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:Br((function(t,e,n){return cs(this,t,"gutter"==e?"gutter":"class",(function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass";if(t[i]){if(M(n).test(t[i]))return!1;t[i]+=" "+n}else t[i]=n;return!0}))})),removeLineClass:Br((function(t,e,n){return cs(this,t,"gutter"==e?"gutter":"class",(function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass",r=t[i];if(!r)return!1;if(null==n)t[i]=null;else{var o=r.match(M(n));if(!o)return!1;var s=o.index+o[0].length;t[i]=r.slice(0,o.index)+(o.index&&s!=r.length?" ":"")+r.slice(s)||null}return!0}))})),addLineWidget:Br((function(t,e,n){return gs(this,t,e,n)})),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return ys(this,pe(this,t),pe(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return t=pe(this,t),ys(this,t,t,n,"bookmark")},findMarksAt:function(t){t=pe(this,t);var e=[],n=Qt(this,t.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},findMarks:function(t,e,n){t=pe(this,t),e=pe(this,e);var i=[],r=t.line;return this.iter(t.line,e.line+1,(function(o){var s=o.markedSpans;if(s)for(var l=0;l<s.length;l++){var a=s[l];null!=a.to&&r==t.line&&t.ch>=a.to||null==a.from&&r!=t.line||null!=a.from&&r==e.line&&a.from>=e.ch||n&&!n(a.marker)||i.push(a.marker.parent||a.marker)}++r})),i},getAllMarks:function(){var t=[];return this.iter((function(e){var n=e.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&t.push(n[i].marker)})),t},posFromIndex:function(t){var e,n=this.first,i=this.lineSeparator().length;return this.iter((function(r){var o=r.text.length+i;if(o>t)return e=t,!0;t-=o,++n})),pe(this,le(n,e))},indexFromPos:function(t){t=pe(this,t);var e=t.ch;if(t.line<this.first||t.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,(function(t){e+=t.text.length+n})),e},copy:function(t){var e=new Ms(ee(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var i=new Ms(ee(this,e,n),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],Ss(i,xs(this)),i},unlinkDoc:function(t){if(t instanceof Hl&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e){var n=this.linked[e];if(n.doc==t){this.linked.splice(e,1),t.unlinkDoc(this),ks(xs(this));break}}if(t.history==this.history){var i=[t.id];wo(t,(function(t){return i.push(t.id)}),!0),t.history=new Co(null),t.history.done=Bo(this.history.done,i),t.history.undone=Bo(this.history.undone,i)}},iterLinkedDocs:function(t){wo(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Bt(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Br((function(t){"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter((function(t){return t.order=null})),this.cm&&ko(this.cm))}))}),Ms.prototype.eachLine=Ms.prototype.iter;var As=0;function Ts(t){var e=this;if(Ls(e),!xt(e,t)&&!Gn(e.display,t)){Mt(t),s&&(As=+new Date);var n=Wi(e,t,!0),i=t.dataTransfer.files;if(n&&!e.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),l=0,a=function(){++l==r&&Ir(e,(function(){n=pe(e.doc,n);var t={from:n,to:n,text:e.doc.splitLines(o.filter((function(t){return null!=t})).join(e.doc.lineSeparator())),origin:"paste"};ts(e.doc,t),jo(e.doc,ho(pe(e.doc,n),pe(e.doc,co(t))))}))()},h=function(t,n){if(e.options.allowDropFileTypes&&-1==j(e.options.allowDropFileTypes,t.type))a();else{var i=new FileReader;i.onerror=function(){return a()},i.onload=function(){var t=i.result;/[\x00-\x08\x0e-\x1f]{2}/.test(t)||(o[n]=t),a()},i.readAsText(t)}},c=0;c<i.length;c++)h(i[c],c);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout((function(){return e.display.input.focus()}),20);try{var u=t.dataTransfer.getData("Text");if(u){var f;if(e.state.draggingText&&!e.state.draggingText.copy&&(f=e.listSelections()),Ko(e.doc,ho(n,n)),f)for(var d=0;d<f.length;++d)ss(e.doc,"",f[d].anchor,f[d].head,"drag");e.replaceSelection(u,"around","paste"),e.display.input.focus()}}catch(p){}}}}function Os(t,e){if(s&&(!t.state.draggingText||+new Date-As<100))Ot(e);else if(!xt(t,e)&&!Gn(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!d)){var n=L("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",f&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),f&&n.parentNode.removeChild(n)}}function Ds(t,e){var n=Wi(t,e);if(n){var i=document.createDocumentFragment();qi(t,n,i),t.display.dragCursor||(t.display.dragCursor=L("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),D(t.display.dragCursor,i)}}function Ls(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Es(t){if(document.getElementsByClassName){for(var e=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<e.length;i++){var r=e[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation((function(){for(var e=0;e<n.length;e++)t(n[e])}))}}var Ns=!1;function Ps(){Ns||(Is(),Ns=!0)}function Is(){var t;vt(window,"resize",(function(){null==t&&(t=setTimeout((function(){t=null,Es(Rs)}),100))})),vt(window,"blur",(function(){return Es(tr)}))}function Rs(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}for(var Bs={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ws=0;Ws<10;Ws++)Bs[Ws+48]=Bs[Ws+96]=String(Ws);for(var Fs=65;Fs<=90;Fs++)Bs[Fs]=String.fromCharCode(Fs);for(var Hs=1;Hs<=12;Hs++)Bs[Hs+111]=Bs[Hs+63235]="F"+Hs;var _s={};function zs(t){var e,n,i,r,o=t.split(/-(?!$)/);t=o[o.length-1];for(var s=0;s<o.length-1;s++){var l=o[s];if(/^(cmd|meta|m)$/i.test(l))r=!0;else if(/^a(lt)?$/i.test(l))e=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else{if(!/^s(hift)?$/i.test(l))throw new Error("Unrecognized modifier name: "+l);i=!0}}return e&&(t="Alt-"+t),n&&(t="Ctrl-"+t),r&&(t="Cmd-"+t),i&&(t="Shift-"+t),t}function Vs(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete t[n];continue}for(var r=Q(n.split(" "),zs),o=0;o<r.length;o++){var s=void 0,l=void 0;o==r.length-1?(l=r.join(" "),s=i):(l=r.slice(0,o+1).join(" "),s="...");var a=e[l];if(a){if(a!=s)throw new Error("Inconsistent bindings for "+l)}else e[l]=s}delete t[n]}for(var h in e)t[h]=e[h];return t}function js(t,e,n,i){e=qs(e);var r=e.call?e.call(t,i):e[t];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return js(t,e.fallthrough,n,i);for(var o=0;o<e.fallthrough.length;o++){var s=js(t,e.fallthrough[o],n,i);if(s)return s}}}function Us(t){var e="string"==typeof t?t:Bs[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Ks(t,e,n){var i=t;return e.altKey&&"Alt"!=i&&(t="Alt-"+t),(k?e.metaKey:e.ctrlKey)&&"Ctrl"!=i&&(t="Ctrl-"+t),(k?e.ctrlKey:e.metaKey)&&"Mod"!=i&&(t="Cmd-"+t),!n&&e.shiftKey&&"Shift"!=i&&(t="Shift-"+t),t}function Gs(t,e){if(f&&34==t.keyCode&&t["char"])return!1;var n=Bs[t.keyCode];return null!=n&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(n=t.code),Ks(n,t,e))}function qs(t){return"string"==typeof t?_s[t]:t}function $s(t,e){for(var n=t.doc.sel.ranges,i=[],r=0;r<n.length;r++){var o=e(n[r]);while(i.length&&ae(o.from,Z(i).to)<=0){var s=i.pop();if(ae(s.from,o.from)<0){o.from=s.from;break}}i.push(o)}Pr(t,(function(){for(var e=i.length-1;e>=0;e--)ss(t.doc,"",i[e].from,i[e].to,"+delete");hr(t)}))}function Xs(t,e,n){var i=ht(t.text,e+n,n);return i<0||i>t.text.length?null:i}function Ys(t,e,n){var i=Xs(t,e.ch,n);return null==i?null:new le(e.line,i,n<0?"after":"before")}function Js(t,e,n,i,r){if(t){"rtl"==e.doc.direction&&(r=-r);var o=gt(n,e.doc.direction);if(o){var s,l=r<0?Z(o):o[0],a=r<0==(1==l.level),h=a?"after":"before";if(l.level>0||"rtl"==e.doc.direction){var c=ri(e,n);s=r<0?n.text.length-1:0;var u=oi(e,c,s).top;s=ct((function(t){return oi(e,c,t).top==u}),r<0==(1==l.level)?l.from:l.to-1,s),"before"==h&&(s=Xs(n,s,1))}else s=r<0?l.to:l.from;return new le(i,s,h)}}return new le(i,r<0?n.text.length:0,r<0?"before":"after")}function Zs(t,e,n,i){var r=gt(e,t.doc.direction);if(!r)return Ys(e,n,i);n.ch>=e.text.length?(n.ch=e.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=dt(r,n.ch,n.sticky),s=r[o];if("ltr"==t.doc.direction&&s.level%2==0&&(i>0?s.to>n.ch:s.from<n.ch))return Ys(e,n,i);var l,a=function(t,n){return Xs(e,t instanceof le?t.ch:t,n)},h=function(n){return t.options.lineWrapping?(l=l||ri(t,e),Ai(t,e,l,n)):{begin:0,end:e.text.length}},c=h("before"==n.sticky?a(n,-1):n.ch);if("rtl"==t.doc.direction||1==s.level){var u=1==s.level==i<0,f=a(n,u?1:-1);if(null!=f&&(u?f<=s.to&&f<=c.end:f>=s.from&&f>=c.begin)){var d=u?"before":"after";return new le(n.line,f,d)}}var p=function(t,e,i){for(var o=function(t,e){return e?new le(n.line,a(t,1),"before"):new le(n.line,t,"after")};t>=0&&t<r.length;t+=e){var s=r[t],l=e>0==(1!=s.level),h=l?i.begin:a(i.end,-1);if(s.from<=h&&h<s.to)return o(h,l);if(h=l?s.from:a(s.to,-1),i.begin<=h&&h<i.end)return o(h,l)}},g=p(o+i,i,c);if(g)return g;var m=i>0?c.end:a(c.begin,-1);return null==m||i>0&&m==e.text.length||(g=p(i>0?0:r.length-1,i,h(m)),!g)?null:g}_s.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},_s.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},_s.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},_s.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},_s["default"]=b?_s.macDefault:_s.pcDefault;var Qs={selectAll:Zo,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),G)},killLine:function(t){return $s(t,(function(e){if(e.empty()){var n=Qt(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:le(e.head.line+1,0)}:{from:e.head,to:le(e.head.line,n)}}return{from:e.from(),to:e.to()}}))},deleteLine:function(t){return $s(t,(function(e){return{from:le(e.from().line,0),to:pe(t.doc,le(e.to().line+1,0))}}))},delLineLeft:function(t){return $s(t,(function(t){return{from:le(t.from().line,0),to:t.from()}}))},delWrappedLineLeft:function(t){return $s(t,(function(e){var n=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:0,top:n},"div");return{from:i,to:e.from()}}))},delWrappedLineRight:function(t){return $s(t,(function(e){var n=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:i}}))},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(le(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(le(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy((function(e){return tl(t,e.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy((function(e){return nl(t,e.head)}),{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy((function(e){return el(t,e.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")}),$)},goLineLeft:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")}),$)},goLineLeftSmart:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5,i=t.coordsChar({left:0,top:n},"div");return i.ch<t.getLine(i.line).search(/\S/)?nl(t,e.head):i}),$)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),i=t.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),s=z(t.getLine(o.line),o.ch,i);e.push(J(i-s%i))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return Pr(t,(function(){for(var e=t.listSelections(),n=[],i=0;i<e.length;i++)if(e[i].empty()){var r=e[i].head,o=Qt(t.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new le(r.line,r.ch-1)),r.ch>0)r=new le(r.line,r.ch+1),t.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),le(r.line,r.ch-2),r,"+transpose");else if(r.line>t.doc.first){var s=Qt(t.doc,r.line-1).text;s&&(r=new le(r.line,1),t.replaceRange(o.charAt(0)+t.doc.lineSeparator()+s.charAt(s.length-1),le(r.line-1,s.length-1),r,"+transpose"))}n.push(new lo(r,r))}t.setSelections(n)}))},newlineAndIndent:function(t){return Pr(t,(function(){for(var e=t.listSelections(),n=e.length-1;n>=0;n--)t.replaceRange(t.doc.lineSeparator(),e[n].anchor,e[n].head,"+input");e=t.listSelections();for(var i=0;i<e.length;i++)t.indentLine(e[i].from().line,null,!0);hr(t)}))},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function tl(t,e){var n=Qt(t.doc,e),i=tn(n);return i!=n&&(e=ie(i)),Js(!0,t,i,e,1)}function el(t,e){var n=Qt(t.doc,e),i=en(n);return i!=n&&(e=ie(i)),Js(!0,t,n,e,-1)}function nl(t,e){var n=tl(t,e.line),i=Qt(t.doc,n.line),r=gt(i,t.doc.direction);if(!r||0==r[0].level){var o=Math.max(n.ch,i.text.search(/\S/)),s=e.line==n.line&&e.ch<=o&&e.ch;return le(n.line,s?0:o,n.sticky)}return n}function il(t,e,n){if("string"==typeof e&&(e=Qs[e],!e))return!1;t.display.input.ensurePolled();var i=t.display.shift,r=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),r=e(t)!=K}finally{t.display.shift=i,t.state.suppressEdits=!1}return r}function rl(t,e,n){for(var i=0;i<t.state.keyMaps.length;i++){var r=js(e,t.state.keyMaps[i],n,t);if(r)return r}return t.options.extraKeys&&js(e,t.options.extraKeys,n,t)||js(e,t.options.keyMap,n,t)}var ol=new V;function sl(t,e,n,i){var r=t.state.keySeq;if(r){if(Us(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:ol.set(50,(function(){t.state.keySeq==r&&(t.state.keySeq=null,t.display.input.reset())})),ll(t,r+" "+e,n,i))return!0}return ll(t,e,n,i)}function ll(t,e,n,i){var r=rl(t,e,i);return"multi"==r&&(t.state.keySeq=e),"handled"==r&&En(t,"keyHandled",t,e,n),"handled"!=r&&"multi"!=r||(Mt(n),Yi(t)),!!r}function al(t,e){var n=Gs(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?sl(t,"Shift-"+n,e,(function(e){return il(t,e,!0)}))||sl(t,n,e,(function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return il(t,e)})):sl(t,n,e,(function(e){return il(t,e)})))}function hl(t,e,n){return sl(t,"'"+n+"'",e,(function(e){return il(t,e,!0)}))}var cl=null;function ul(t){var e=this;if((!t.target||t.target==e.display.input.getField())&&(e.curOp.focus=P(W(e)),!xt(e,t))){s&&l<11&&27==t.keyCode&&(t.returnValue=!1);var i=t.keyCode;e.display.shift=16==i||t.shiftKey;var r=al(e,t);f&&(cl=r?i:null,r||88!=i||Ft||!(b?t.metaKey:t.ctrlKey)||e.replaceSelection("",null,"cut")),n&&!b&&!r&&46==i&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=i||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||fl(e)}}function fl(t){var e=t.display.lineDiv;function n(t){18!=t.keyCode&&t.altKey||(T(e,"CodeMirror-crosshair"),bt(document,"keyup",n),bt(document,"mouseover",n))}I(e,"CodeMirror-crosshair"),vt(document,"keyup",n),vt(document,"mouseover",n)}function dl(t){16==t.keyCode&&(this.doc.sel.shift=!1),xt(this,t)}function pl(t){var e=this;if((!t.target||t.target==e.display.input.getField())&&!(Gn(e.display,t)||xt(e,t)||t.ctrlKey&&!t.altKey||b&&t.metaKey)){var n=t.keyCode,i=t.charCode;if(f&&n==cl)return cl=null,void Mt(t);if(!f||t.which&&!(t.which<10)||!al(e,t)){var r=String.fromCharCode(null==i?n:i);"\b"!=r&&(hl(e,t,r)||e.display.input.onKeyPress(t))}}}var gl,ml,vl=400,yl=function(t,e,n){this.time=t,this.pos=e,this.button=n};function bl(t,e){var n=+new Date;return ml&&ml.compare(n,t,e)?(gl=ml=null,"triple"):gl&&gl.compare(n,t,e)?(ml=new yl(n,t,e),gl=null,"double"):(gl=new yl(n,t,e),ml=null,"single")}function wl(t){var e=this,n=e.display;if(!(xt(e,t)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=t.shiftKey,Gn(n,t))a||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!Dl(e,t)){var i=Wi(e,t),r=Lt(t),o=i?bl(i,r):"single";F(e).focus(),1==r&&e.state.selectingText&&e.state.selectingText(t),i&&xl(e,r,i,o,t)||(1==r?i?kl(e,i,o,t):Dt(t)==n.scroller&&Mt(t):2==r?(i&&Fo(e.doc,i),setTimeout((function(){return n.input.focus()}),20)):3==r&&(C?e.display.input.onContextMenu(t):Zi(e)))}}function xl(t,e,n,i,r){var o="Click";return"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o),o=(1==e?"Left":2==e?"Middle":"Right")+o,sl(t,Ks(o,r),r,(function(e){if("string"==typeof e&&(e=Qs[e]),!e)return!1;var i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),i=e(t,n)!=K}finally{t.state.suppressEdits=!1}return i}))}function Sl(t,e,n){var i=t.getOption("configureMouse"),r=i?i(t,e,n):{};if(null==r.unit){var o=w?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?"rectangle":"single"==e?"char":"double"==e?"word":"line"}return(null==r.extend||t.doc.extend)&&(r.extend=t.doc.extend||n.shiftKey),null==r.addNew&&(r.addNew=b?n.metaKey:n.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(b?n.altKey:n.ctrlKey)),r}function kl(t,e,n,i){s?setTimeout(H(Ji,t),0):t.curOp.focus=P(W(t));var r,o=Sl(t,n,i),l=t.doc.sel;t.options.dragDrop&&Pt&&!t.isReadOnly()&&"single"==n&&(r=l.contains(e))>-1&&(ae((r=l.ranges[r]).from(),e)<0||e.xRel>0)&&(ae(r.to(),e)>0||e.xRel<0)?Cl(t,i,e,o):Al(t,i,e,o)}function Cl(t,e,n,i){var r=t.display,o=!1,h=Ir(t,(function(e){a&&(r.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:Zi(t)),bt(r.wrapper.ownerDocument,"mouseup",h),bt(r.wrapper.ownerDocument,"mousemove",c),bt(r.scroller,"dragstart",u),bt(r.scroller,"drop",h),o||(Mt(e),i.addNew||Fo(t.doc,n,null,null,i.extend),a&&!d||s&&9==l?setTimeout((function(){r.wrapper.ownerDocument.body.focus({preventScroll:!0}),r.input.focus()}),20):r.input.focus())})),c=function(t){o=o||Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)>=10},u=function(){return o=!0};a&&(r.scroller.draggable=!0),t.state.draggingText=h,h.copy=!i.moveOnDrag,vt(r.wrapper.ownerDocument,"mouseup",h),vt(r.wrapper.ownerDocument,"mousemove",c),vt(r.scroller,"dragstart",u),vt(r.scroller,"drop",h),t.state.delayingBlurEvent=!0,setTimeout((function(){return r.input.focus()}),20),r.scroller.dragDrop&&r.scroller.dragDrop()}function Ml(t,e,n){if("char"==n)return new lo(e,e);if("word"==n)return t.findWordAt(e);if("line"==n)return new lo(le(e.line,0),pe(t.doc,le(e.line+1,0)));var i=n(t,e);return new lo(i.from,i.to)}function Al(t,e,n,i){s&&Zi(t);var r=t.display,o=t.doc;Mt(e);var l,a,h=o.sel,c=h.ranges;if(i.addNew&&!i.extend?(a=o.sel.contains(n),l=a>-1?c[a]:new lo(n,n)):(l=o.sel.primary(),a=o.sel.primIndex),"rectangle"==i.unit)i.addNew||(l=new lo(n,n)),n=Wi(t,e,!0,!0),a=-1;else{var u=Ml(t,n,i.unit);l=i.extend?Wo(l,u.anchor,u.head,i.extend):u}i.addNew?-1==a?(a=c.length,Uo(o,ao(t,c.concat([l]),a),{scroll:!1,origin:"*mouse"})):c.length>1&&c[a].empty()&&"char"==i.unit&&!i.extend?(Uo(o,ao(t,c.slice(0,a).concat(c.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),h=o.sel):_o(o,a,l,q):(a=0,Uo(o,new so([l],0),q),h=o.sel);var f=n;function d(e){if(0!=ae(f,e))if(f=e,"rectangle"==i.unit){for(var r=[],s=t.options.tabSize,c=z(Qt(o,n.line).text,n.ch,s),u=z(Qt(o,e.line).text,e.ch,s),d=Math.min(c,u),p=Math.max(c,u),g=Math.min(n.line,e.line),m=Math.min(t.lastLine(),Math.max(n.line,e.line));g<=m;g++){var v=Qt(o,g).text,y=X(v,d,s);d==p?r.push(new lo(le(g,y),le(g,y))):v.length>y&&r.push(new lo(le(g,y),le(g,X(v,p,s))))}r.length||r.push(new lo(n,n)),Uo(o,ao(t,h.ranges.slice(0,a).concat(r),a),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var b,w=l,x=Ml(t,e,i.unit),S=w.anchor;ae(x.anchor,S)>0?(b=x.head,S=fe(w.from(),x.anchor)):(b=x.anchor,S=ue(w.to(),x.head));var k=h.ranges.slice(0);k[a]=Tl(t,new lo(pe(o,S),b)),Uo(o,ao(t,k,a),q)}}var p=r.wrapper.getBoundingClientRect(),g=0;function m(e){var n=++g,s=Wi(t,e,!0,"rectangle"==i.unit);if(s)if(0!=ae(s,f)){t.curOp.focus=P(W(t)),d(s);var l=ir(r,o);(s.line>=l.to||s.line<l.from)&&setTimeout(Ir(t,(function(){g==n&&m(e)})),150)}else{var a=e.clientY<p.top?-20:e.clientY>p.bottom?20:0;a&&setTimeout(Ir(t,(function(){g==n&&(r.scroller.scrollTop+=a,m(e))})),50)}}function v(e){t.state.selectingText=!1,g=1/0,e&&(Mt(e),r.input.focus()),bt(r.wrapper.ownerDocument,"mousemove",y),bt(r.wrapper.ownerDocument,"mouseup",b),o.history.lastSelOrigin=null}var y=Ir(t,(function(t){0!==t.buttons&&Lt(t)?m(t):v(t)})),b=Ir(t,v);t.state.selectingText=b,vt(r.wrapper.ownerDocument,"mousemove",y),vt(r.wrapper.ownerDocument,"mouseup",b)}function Tl(t,e){var n=e.anchor,i=e.head,r=Qt(t.doc,n.line);if(0==ae(n,i)&&n.sticky==i.sticky)return e;var o=gt(r);if(!o)return e;var s=dt(o,n.ch,n.sticky),l=o[s];if(l.from!=n.ch&&l.to!=n.ch)return e;var a,h=s+(l.from==n.ch==(1!=l.level)?0:1);if(0==h||h==o.length)return e;if(i.line!=n.line)a=(i.line-n.line)*("ltr"==t.doc.direction?1:-1)>0;else{var c=dt(o,i.ch,i.sticky),u=c-s||(i.ch-n.ch)*(1==l.level?-1:1);a=c==h-1||c==h?u<0:u>0}var f=o[h+(a?-1:0)],d=a==(1==f.level),p=d?f.from:f.to,g=d?"after":"before";return n.ch==p&&n.sticky==g?e:new lo(new le(n.line,p,g),i)}function Ol(t,e,n,i){var r,o;if(e.touches)r=e.touches[0].clientX,o=e.touches[0].clientY;else try{r=e.clientX,o=e.clientY}catch(f){return!1}if(r>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;i&&Mt(e);var s=t.display,l=s.lineDiv.getBoundingClientRect();if(o>l.bottom||!kt(t,n))return Tt(e);o-=l.top-s.viewOffset;for(var a=0;a<t.display.gutterSpecs.length;++a){var h=s.gutters.childNodes[a];if(h&&h.getBoundingClientRect().right>=r){var c=re(t.doc,o),u=t.display.gutterSpecs[a];return wt(t,n,t,c,u.className,e),Tt(e)}}}function Dl(t,e){return Ol(t,e,"gutterClick",!0)}function Ll(t,e){Gn(t.display,e)||El(t,e)||xt(t,e,"contextmenu")||C||t.display.input.onContextMenu(e)}function El(t,e){return!!kt(t,"gutterContextMenu")&&Ol(t,e,"gutterContextMenu",!1)}function Nl(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),pi(t)}yl.prototype.compare=function(t,e,n){return this.time+vl>t&&0==ae(e,this.pos)&&n==this.button};var Pl={toString:function(){return"CodeMirror.Init"}},Il={},Rl={};function Bl(t){var e=t.optionHandlers;function n(n,i,r,o){t.defaults[n]=i,r&&(e[n]=o?function(t,e,n){n!=Pl&&r(t,e,n)}:r)}t.defineOption=n,t.Init=Pl,n("value","",(function(t,e){return t.setValue(e)}),!0),n("mode",null,(function(t,e){t.doc.modeOption=e,mo(t)}),!0),n("indentUnit",2,mo,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(t){vo(t),pi(t),Hi(t)}),!0),n("lineSeparator",null,(function(t,e){if(t.doc.lineSep=e,e){var n=[],i=t.doc.first;t.doc.iter((function(t){for(var r=0;;){var o=t.text.indexOf(e,r);if(-1==o)break;r=o+e.length,n.push(le(i,o))}i++}));for(var r=n.length-1;r>=0;r--)ss(t.doc,e,n[r],le(n[r].line,n[r].ch+e.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,(function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=Pl&&t.refresh()})),n("specialCharPlaceholder",yn,(function(t){return t.refresh()}),!0),n("electricChars",!0),n("inputStyle",y?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(t,e){return t.getInputField().spellcheck=e}),!0),n("autocorrect",!1,(function(t,e){return t.getInputField().autocorrect=e}),!0),n("autocapitalize",!1,(function(t,e){return t.getInputField().autocapitalize=e}),!0),n("rtlMoveVisually",!x),n("wholeLineUpdateBefore",!0),n("theme","default",(function(t){Nl(t),Qr(t)}),!0),n("keyMap","default",(function(t,e,n){var i=qs(e),r=n!=Pl&&qs(n);r&&r.detach&&r.detach(t,i),i.attach&&i.attach(t,r||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Fl,!0),n("gutters",[],(function(t,e){t.display.gutterSpecs=Jr(e,t.options.lineNumbers),Qr(t)}),!0),n("fixedGutter",!0,(function(t,e){t.display.gutters.style.left=e?Ii(t.display)+"px":"0",t.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(t){return wr(t)}),!0),n("scrollbarStyle","native",(function(t){kr(t),wr(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(t,e){t.display.gutterSpecs=Jr(t.options.gutters,e),Qr(t)}),!0),n("firstLineNumber",1,Qr,!0),n("lineNumberFormatter",(function(t){return t}),Qr,!0),n("showCursorWhenSelecting",!1,Ki,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(t,e){"nocursor"==e&&(tr(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)})),n("screenReaderLabel",null,(function(t,e){e=""===e?null:e,t.display.input.screenReaderLabelChanged(e)})),n("disableInput",!1,(function(t,e){e||t.display.input.reset()}),!0),n("dragDrop",!0,Wl),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,Ki,!0),n("singleCursorHeightPerLine",!0,Ki,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,vo,!0),n("addModeClass",!1,vo,!0),n("pollInterval",100),n("undoDepth",200,(function(t,e){return t.doc.history.undoDepth=e})),n("historyEventDelay",1250),n("viewportMargin",10,(function(t){return t.refresh()}),!0),n("maxHighlightLength",1e4,vo,!0),n("moveInputWithCursor",!0,(function(t,e){e||t.display.input.resetPosition()})),n("tabindex",null,(function(t,e){return t.display.input.getField().tabIndex=e||""})),n("autofocus",null),n("direction","ltr",(function(t,e){return t.doc.setDirection(e)}),!0),n("phrases",null)}function Wl(t,e,n){var i=n&&n!=Pl;if(!e!=!i){var r=t.display.dragFunctions,o=e?vt:bt;o(t.display.scroller,"dragstart",r.start),o(t.display.scroller,"dragenter",r.enter),o(t.display.scroller,"dragover",r.over),o(t.display.scroller,"dragleave",r.leave),o(t.display.scroller,"drop",r.drop)}}function Fl(t){t.options.lineWrapping?(I(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(T(t.display.wrapper,"CodeMirror-wrap"),cn(t)),Bi(t),Hi(t),pi(t),setTimeout((function(){return wr(t)}),100)}function Hl(t,e){var n=this;if(!(this instanceof Hl))return new Hl(t,e);this.options=e=e?_(e):{},_(Il,e,!1);var i=e.value;"string"==typeof i?i=new Ms(i,e.mode,null,e.lineSeparator,e.direction):e.mode&&(i.modeOption=e.mode),this.doc=i;var r=new Hl.inputStyles[e.inputStyle](this),o=this.display=new to(t,i,r,e);for(var h in o.wrapper.CodeMirror=this,Nl(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),kr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new V,keySeq:null,specialChars:null},e.autofocus&&!y&&o.input.focus(),s&&l<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),_l(this),Ps(),Mr(this),this.curOp.forceUpdate=!0,xo(this,i),e.autofocus&&!y||this.hasFocus()?setTimeout((function(){n.hasFocus()&&!n.state.focused&&Qi(n)}),20):tr(this),Rl)Rl.hasOwnProperty(h)&&Rl[h](this,e[h],Pl);Yr(this),e.finishInit&&e.finishInit(this);for(var c=0;c<zl.length;++c)zl[c](this);Ar(this),a&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}function _l(t){var e=t.display;vt(e.scroller,"mousedown",Ir(t,wl)),vt(e.scroller,"dblclick",s&&l<11?Ir(t,(function(e){if(!xt(t,e)){var n=Wi(t,e);if(n&&!Dl(t,e)&&!Gn(t.display,e)){Mt(e);var i=t.findWordAt(n);Fo(t.doc,i.anchor,i.head)}}})):function(e){return xt(t,e)||Mt(e)}),vt(e.scroller,"contextmenu",(function(e){return Ll(t,e)})),vt(e.input.getField(),"contextmenu",(function(n){e.scroller.contains(n.target)||Ll(t,n)}));var n,i={end:0};function r(){e.activeTouch&&(n=setTimeout((function(){return e.activeTouch=null}),1e3),i=e.activeTouch,i.end=+new Date)}function o(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}function a(t,e){if(null==e.left)return!0;var n=e.left-t.left,i=e.top-t.top;return n*n+i*i>400}vt(e.scroller,"touchstart",(function(r){if(!xt(t,r)&&!o(r)&&!Dl(t,r)){e.input.ensurePolled(),clearTimeout(n);var s=+new Date;e.activeTouch={start:s,moved:!1,prev:s-i.end<=300?i:null},1==r.touches.length&&(e.activeTouch.left=r.touches[0].pageX,e.activeTouch.top=r.touches[0].pageY)}})),vt(e.scroller,"touchmove",(function(){e.activeTouch&&(e.activeTouch.moved=!0)})),vt(e.scroller,"touchend",(function(n){var i=e.activeTouch;if(i&&!Gn(e,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var o,s=t.coordsChar(e.activeTouch,"page");o=!i.prev||a(i,i.prev)?new lo(s,s):!i.prev.prev||a(i,i.prev.prev)?t.findWordAt(s):new lo(le(s.line,0),pe(t.doc,le(s.line+1,0))),t.setSelection(o.anchor,o.head),t.focus(),Mt(n)}r()})),vt(e.scroller,"touchcancel",r),vt(e.scroller,"scroll",(function(){e.scroller.clientHeight&&(pr(t,e.scroller.scrollTop),mr(t,e.scroller.scrollLeft,!0),wt(t,"scroll",t))})),vt(e.scroller,"mousewheel",(function(e){return oo(t,e)})),vt(e.scroller,"DOMMouseScroll",(function(e){return oo(t,e)})),vt(e.wrapper,"scroll",(function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0})),e.dragFunctions={enter:function(e){xt(t,e)||Ot(e)},over:function(e){xt(t,e)||(Ds(t,e),Ot(e))},start:function(e){return Os(t,e)},drop:Ir(t,Ts),leave:function(e){xt(t,e)||Ls(t)}};var h=e.input.getField();vt(h,"keyup",(function(e){return dl.call(t,e)})),vt(h,"keydown",Ir(t,ul)),vt(h,"keypress",Ir(t,pl)),vt(h,"focus",(function(e){return Qi(t,e)})),vt(h,"blur",(function(e){return tr(t,e)}))}Hl.defaults=Il,Hl.optionHandlers=Rl;var zl=[];function Vl(t,e,n,i){var r,o=t.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=xe(t,e).state:n="prev");var s=t.options.tabSize,l=Qt(o,e),a=z(l.text,null,s);l.stateAfter&&(l.stateAfter=null);var h,c=l.text.match(/^\s*/)[0];if(i||/\S/.test(l.text)){if("smart"==n&&(h=o.mode.indent(r,l.text.slice(c.length),l.text),h==K||h>150)){if(!i)return;n="prev"}}else h=0,n="not";"prev"==n?h=e>o.first?z(Qt(o,e-1).text,null,s):0:"add"==n?h=a+t.options.indentUnit:"subtract"==n?h=a-t.options.indentUnit:"number"==typeof n&&(h=a+n),h=Math.max(0,h);var u="",f=0;if(t.options.indentWithTabs)for(var d=Math.floor(h/s);d;--d)f+=s,u+="\t";if(f<h&&(u+=J(h-f)),u!=c)return ss(o,u,le(e,0),le(e,c.length),"+input"),l.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==e&&g.head.ch<c.length){var m=le(e,c.length);_o(o,p,new lo(m,m));break}}}Hl.defineInitHook=function(t){return zl.push(t)};var jl=null;function Ul(t){jl=t}function Kl(t,e,n,i,r){var o=t.doc;t.display.shift=!1,i||(i=o.sel);var s=+new Date-200,l="paste"==r||t.state.pasteIncoming>s,a=Bt(e),h=null;if(l&&i.ranges.length>1)if(jl&&jl.text.join("\n")==e){if(i.ranges.length%jl.text.length==0){h=[];for(var c=0;c<jl.text.length;c++)h.push(o.splitLines(jl.text[c]))}}else a.length==i.ranges.length&&t.options.pasteLinesPerSelection&&(h=Q(a,(function(t){return[t]})));for(var u=t.curOp.updateInput,f=i.ranges.length-1;f>=0;f--){var d=i.ranges[f],p=d.from(),g=d.to();d.empty()&&(n&&n>0?p=le(p.line,p.ch-n):t.state.overwrite&&!l?g=le(g.line,Math.min(Qt(o,g.line).text.length,g.ch+Z(a).length)):l&&jl&&jl.lineWise&&jl.text.join("\n")==a.join("\n")&&(p=g=le(p.line,0)));var m={from:p,to:g,text:h?h[f%h.length]:a,origin:r||(l?"paste":t.state.cutIncoming>s?"cut":"+input")};ts(t.doc,m),En(t,"inputRead",t,m)}e&&!l&&ql(t,e),hr(t),t.curOp.updateInput<2&&(t.curOp.updateInput=u),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Gl(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||!e.hasFocus()||Pr(e,(function(){return Kl(e,n,0,null,"paste")})),!0}function ql(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var o=t.getModeAt(r.head),s=!1;if(o.electricChars){for(var l=0;l<o.electricChars.length;l++)if(e.indexOf(o.electricChars.charAt(l))>-1){s=Vl(t,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Qt(t.doc,r.head.line).text.slice(0,r.head.ch))&&(s=Vl(t,r.head.line,"smart"));s&&En(t,"electricInput",t,r.head.line)}}}function $l(t){for(var e=[],n=[],i=0;i<t.doc.sel.ranges.length;i++){var r=t.doc.sel.ranges[i].head.line,o={anchor:le(r,0),head:le(r+1,0)};n.push(o),e.push(t.getRange(o.anchor,o.head))}return{text:e,ranges:n}}function Xl(t,e,n,i){t.setAttribute("autocorrect",n?"on":"off"),t.setAttribute("autocapitalize",i?"on":"off"),t.setAttribute("spellcheck",!!e)}function Yl(){var t=L("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),e=L("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return a?t.style.width="1000px":t.setAttribute("wrap","off"),m&&(t.style.border="1px solid black"),e}function Jl(t){var e=t.optionHandlers,n=t.helpers={};t.prototype={constructor:t,focus:function(){F(this).focus(),this.display.input.focus()},setOption:function(t,n){var i=this.options,r=i[t];i[t]==n&&"mode"!=t||(i[t]=n,e.hasOwnProperty(t)&&Ir(this,e[t])(this,n,r),wt(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](qs(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:Rr((function(e,n){var i=e.token?e:t.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");tt(this.state.overlays,{mode:i,modeSpec:e,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(t){return t.priority})),this.state.modeGen++,Hi(this)})),removeOverlay:Rr((function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var i=e[n].modeSpec;if(i==t||"string"==typeof t&&i.name==t)return e.splice(n,1),this.state.modeGen++,void Hi(this)}})),indentLine:Rr((function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),oe(this.doc,t)&&Vl(this,t,e,n)})),indentSelection:Rr((function(t){for(var e=this.doc.sel.ranges,n=-1,i=0;i<e.length;i++){var r=e[i];if(r.empty())r.head.line>n&&(Vl(this,r.head.line,t,!0),n=r.head.line,i==this.doc.sel.primIndex&&hr(this));else{var o=r.from(),s=r.to(),l=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var a=l;a<n;++a)Vl(this,a,t);var h=this.doc.sel.ranges;0==o.ch&&e.length==h.length&&h[i].from().ch>0&&_o(this.doc,i,new lo(o,h[i].to()),G)}}})),getTokenAt:function(t,e){return Ae(this,t,e)},getLineTokens:function(t,e){return Ae(this,le(t),e,!0)},getTokenTypeAt:function(t){t=pe(this.doc,t);var e,n=we(this,Qt(this.doc,t.line)),i=0,r=(n.length-1)/2,o=t.ch;if(0==o)e=n[2];else for(;;){var s=i+r>>1;if((s?n[2*s-1]:0)>=o)r=s;else{if(!(n[2*s+1]<o)){e=n[2*s+2];break}i=s+1}}var l=e?e.indexOf("overlay "):-1;return l<0?e:0==l?null:e.slice(0,l-1)},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var i=[];if(!n.hasOwnProperty(e))return i;var r=n[e],o=this.getModeAt(t);if("string"==typeof o[e])r[o[e]]&&i.push(r[o[e]]);else if(o[e])for(var s=0;s<o[e].length;s++){var l=r[o[e][s]];l&&i.push(l)}else o.helperType&&r[o.helperType]?i.push(r[o.helperType]):r[o.name]&&i.push(r[o.name]);for(var a=0;a<r._global.length;a++){var h=r._global[a];h.pred(o,this)&&-1==j(i,h.val)&&i.push(h.val)}return i},getStateAfter:function(t,e){var n=this.doc;return t=de(n,null==t?n.first+n.size-1:t),xe(this,t+1,e).state},cursorCoords:function(t,e){var n,i=this.doc.sel.primary();return n=null==t?i.head:"object"==typeof t?pe(this.doc,t):t?i.from():i.to(),xi(this,n,e||"page")},charCoords:function(t,e){return wi(this,pe(this.doc,t),e||"page")},coordsChar:function(t,e){return t=bi(this,t,e||"page"),Ci(this,t.left,t.top)},lineAtHeight:function(t,e){return t=bi(this,{top:t,left:0},e||"page").top,re(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var i,r=!1;if("number"==typeof t){var o=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>o&&(t=o,r=!0),i=Qt(this.doc,t)}else i=t;return yi(this,i,{top:0,left:0},e||"page",n||r).top+(r?this.doc.height-an(i):0)},defaultTextHeight:function(){return Ei(this.display)},defaultCharWidth:function(){return Ni(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,i,r){var o=this.display;t=xi(this,pe(this.doc,t));var s=t.bottom,l=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),o.sizer.appendChild(e),"over"==i)s=t.top;else if("above"==i||"near"==i){var a=Math.max(o.wrapper.clientHeight,this.doc.height),h=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>a)&&t.top>e.offsetHeight?s=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=a&&(s=t.bottom),l+e.offsetWidth>h&&(l=h-e.offsetWidth)}e.style.top=s+"px",e.style.left=e.style.right="","right"==r?(l=o.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?l=0:"middle"==r&&(l=(o.sizer.clientWidth-e.offsetWidth)/2),e.style.left=l+"px"),n&&sr(this,{left:l,top:s,right:l+e.offsetWidth,bottom:s+e.offsetHeight})},triggerOnKeyDown:Rr(ul),triggerOnKeyPress:Rr(pl),triggerOnKeyUp:dl,triggerOnMouseDown:Rr(wl),execCommand:function(t){if(Qs.hasOwnProperty(t))return Qs[t].call(null,this)},triggerElectric:Rr((function(t){ql(this,t)})),findPosH:function(t,e,n,i){var r=1;e<0&&(r=-1,e=-e);for(var o=pe(this.doc,t),s=0;s<e;++s)if(o=Zl(this.doc,o,r,n,i),o.hitSide)break;return o},moveH:Rr((function(t,e){var n=this;this.extendSelectionsBy((function(i){return n.display.shift||n.doc.extend||i.empty()?Zl(n.doc,i.head,t,e,n.options.rtlMoveVisually):t<0?i.from():i.to()}),$)})),deleteH:Rr((function(t,e){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):$s(this,(function(n){var r=Zl(i,n.head,t,e,!1);return t<0?{from:r,to:n.head}:{from:n.head,to:r}}))})),findPosV:function(t,e,n,i){var r=1,o=i;e<0&&(r=-1,e=-e);for(var s=pe(this.doc,t),l=0;l<e;++l){var a=xi(this,s,"div");if(null==o?o=a.left:a.left=o,s=Ql(this,a,r,n),s.hitSide)break}return s},moveV:Rr((function(t,e){var n=this,i=this.doc,r=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(s){if(o)return t<0?s.from():s.to();var l=xi(n,s.head,"div");null!=s.goalColumn&&(l.left=s.goalColumn),r.push(l.left);var a=Ql(n,l,t,e);return"page"==e&&s==i.sel.primary()&&ar(n,wi(n,a,"div").top-l.top),a}),$),r.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=r[s]})),findWordAt:function(t){var e=this.doc,n=Qt(e,t.line).text,i=t.ch,r=t.ch;if(n){var o=this.getHelper(t,"wordChars");"before"!=t.sticky&&r!=n.length||!i?++r:--i;var s=n.charAt(i),l=ot(s,o)?function(t){return ot(t,o)}:/\s/.test(s)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!ot(t)};while(i>0&&l(n.charAt(i-1)))--i;while(r<n.length&&l(n.charAt(r)))++r}return new lo(le(t.line,i),le(t.line,r))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?I(this.display.cursorDiv,"CodeMirror-overwrite"):T(this.display.cursorDiv,"CodeMirror-overwrite"),wt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==P(W(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Rr((function(t,e){cr(this,t,e)})),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-Yn(this)-this.display.barHeight,width:t.scrollWidth-Yn(this)-this.display.barWidth,clientHeight:Zn(this),clientWidth:Jn(this)}},scrollIntoView:Rr((function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:le(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?ur(this,t):dr(this,t.from,t.to,t.margin)})),setSize:Rr((function(t,e){var n=this,i=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=i(t)),null!=e&&(this.display.wrapper.style.height=i(e)),this.options.lineWrapping&&di(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,(function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){_i(n,r,"widget");break}++r})),this.curOp.forceUpdate=!0,wt(this,"refresh",this)})),operation:function(t){return Pr(this,t)},startOperation:function(){return Mr(this)},endOperation:function(){return Ar(this)},refresh:Rr((function(){var t=this.display.cachedTextHeight;Hi(this),this.curOp.forceUpdate=!0,pi(this),cr(this,this.doc.scrollLeft,this.doc.scrollTop),qr(this.display),(null==t||Math.abs(t-Ei(this.display))>.5||this.options.lineWrapping)&&Bi(this),wt(this,"refresh",this)})),swapDoc:Rr((function(t){var e=this.doc;return e.cm=null,this.state.selectingText&&this.state.selectingText(),xo(this,t),pi(this),this.display.input.reset(),cr(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,En(this,"swapDoc",this,e),e})),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ct(t),t.registerHelper=function(e,i,r){n.hasOwnProperty(e)||(n[e]=t[e]={_global:[]}),n[e][i]=r},t.registerGlobalHelper=function(e,i,r,o){t.registerHelper(e,i,o),n[e]._global.push({pred:r,val:o})}}function Zl(t,e,n,i,r){var o=e,s=n,l=Qt(t,e.line),a=r&&"rtl"==t.direction?-n:n;function h(){var n=e.line+a;return!(n<t.first||n>=t.first+t.size)&&(e=new le(n,e.ch,e.sticky),l=Qt(t,n))}function c(o){var s;if("codepoint"==i){var c=l.text.charCodeAt(e.ch+(n>0?0:-1));if(isNaN(c))s=null;else{var u=n>0?c>=55296&&c<56320:c>=56320&&c<57343;s=new le(e.line,Math.max(0,Math.min(l.text.length,e.ch+n*(u?2:1))),-n)}}else s=r?Zs(t.cm,l,e,n):Ys(l,e,n);if(null==s){if(o||!h())return!1;e=Js(r,t.cm,l,e.line,a)}else e=s;return!0}if("char"==i||"codepoint"==i)c();else if("column"==i)c(!0);else if("word"==i||"group"==i)for(var u=null,f="group"==i,d=t.cm&&t.cm.getHelper(e,"wordChars"),p=!0;;p=!1){if(n<0&&!c(!p))break;var g=l.text.charAt(e.ch)||"\n",m=ot(g,d)?"w":f&&"\n"==g?"n":!f||/\s/.test(g)?null:"p";if(!f||p||m||(m="s"),u&&u!=m){n<0&&(n=1,c(),e.sticky="after");break}if(m&&(u=m),n>0&&!c(!p))break}var v=Yo(t,e,o,s,!0);return he(o,v)&&(v.hitSide=!0),v}function Ql(t,e,n,i){var r,o,s=t.doc,l=e.left;if("page"==i){var a=Math.min(t.display.wrapper.clientHeight,F(t).innerHeight||s(t).documentElement.clientHeight),h=Math.max(a-.5*Ei(t.display),3);r=(n>0?e.bottom:e.top)+n*h}else"line"==i&&(r=n>0?e.bottom+3:e.top-3);for(;;){if(o=Ci(t,l,r),!o.outside)break;if(n<0?r<=0:r>=s.height){o.hitSide=!0;break}r+=5*n}return o}var ta=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new V,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function ea(t,e){var n=ii(t,e.line);if(!n||n.hidden)return null;var i=Qt(t.doc,e.line),r=ti(n,i,e.line),o=gt(i,t.doc.direction),s="left";if(o){var l=dt(o,e.ch);s=l%2?"right":"left"}var a=ai(r.map,e.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function na(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}function ia(t,e){return e&&(t.bad=!0),t}function ra(t,e,n,i,r){var o="",s=!1,l=t.doc.lineSeparator(),a=!1;function h(t){return function(e){return e.id==t}}function c(){s&&(o+=l,a&&(o+=l),s=a=!1)}function u(t){t&&(c(),o+=t)}function f(e){if(1==e.nodeType){var n=e.getAttribute("cm-text");if(n)return void u(n);var o,d=e.getAttribute("cm-marker");if(d){var p=t.findMarks(le(i,0),le(r+1,0),h(+d));return void(p.length&&(o=p[0].find(0))&&u(te(t.doc,o.from,o.to).join(l)))}if("false"==e.getAttribute("contenteditable"))return;var g=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;g&&c();for(var m=0;m<e.childNodes.length;m++)f(e.childNodes[m]);/^(pre|p)$/i.test(e.nodeName)&&(a=!0),g&&(s=!0)}else 3==e.nodeType&&u(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;;){if(f(e),e==n)break;e=e.nextSibling,a=!1}return o}function oa(t,e,n){var i;if(e==t.display.lineDiv){if(i=t.display.lineDiv.childNodes[n],!i)return ia(t.clipPos(le(t.display.viewTo-1)),!0);e=null,n=0}else for(i=e;;i=i.parentNode){if(!i||i==t.display.lineDiv)return null;if(i.parentNode&&i.parentNode==t.display.lineDiv)break}for(var r=0;r<t.display.view.length;r++){var o=t.display.view[r];if(o.node==i)return sa(o,e,n)}}function sa(t,e,n){var i=t.text.firstChild,r=!1;if(!e||!N(i,e))return ia(le(ie(t.line),0),!0);if(e==i&&(r=!0,e=i.childNodes[n],n=0,!e)){var o=t.rest?Z(t.rest):t.line;return ia(le(ie(o),o.text.length),r)}var s=3==e.nodeType?e:null,l=e;s||1!=e.childNodes.length||3!=e.firstChild.nodeType||(s=e.firstChild,n&&(n=s.nodeValue.length));while(l.parentNode!=i)l=l.parentNode;var a=t.measure,h=a.maps;function c(e,n,i){for(var r=-1;r<(h?h.length:0);r++)for(var o=r<0?a.map:h[r],s=0;s<o.length;s+=3){var l=o[s+2];if(l==e||l==n){var c=ie(r<0?t.line:t.rest[r]),u=o[s]+i;return(i<0||l!=e)&&(u=o[s+(i?1:0)]),le(c,u)}}}var u=c(s,l,n);if(u)return ia(u,r);for(var f=l.nextSibling,d=s?s.nodeValue.length-n:0;f;f=f.nextSibling){if(u=c(f,f.firstChild,0),u)return ia(le(u.line,u.ch-d),r);d+=f.textContent.length}for(var p=l.previousSibling,g=n;p;p=p.previousSibling){if(u=c(p,p.firstChild,-1),u)return ia(le(u.line,u.ch+g),r);g+=p.textContent.length}}ta.prototype.init=function(t){var e=this,n=this,i=n.cm,r=n.div=t.lineDiv;function o(t){for(var e=t.target;e;e=e.parentNode){if(e==r)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(e.className))break}return!1}function s(t){if(o(t)&&!xt(i,t)){if(i.somethingSelected())Ul({lineWise:!1,text:i.getSelections()}),"cut"==t.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var e=$l(i);Ul({lineWise:!0,text:e.text}),"cut"==t.type&&i.operation((function(){i.setSelections(e.ranges,0,G),i.replaceSelection("",null,"cut")}))}if(t.clipboardData){t.clipboardData.clearData();var s=jl.text.join("\n");if(t.clipboardData.setData("Text",s),t.clipboardData.getData("Text")==s)return void t.preventDefault()}var l=Yl(),a=l.firstChild;Xl(a),i.display.lineSpace.insertBefore(l,i.display.lineSpace.firstChild),a.value=jl.text.join("\n");var h=P(r.ownerDocument);B(a),setTimeout((function(){i.display.lineSpace.removeChild(l),h.focus(),h==r&&n.showPrimarySelection()}),50)}}r.contentEditable=!0,Xl(r,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),vt(r,"paste",(function(t){!o(t)||xt(i,t)||Gl(t,i)||l<=11&&setTimeout(Ir(i,(function(){return e.updateFromDOM()})),20)})),vt(r,"compositionstart",(function(t){e.composing={data:t.data,done:!1}})),vt(r,"compositionupdate",(function(t){e.composing||(e.composing={data:t.data,done:!1})})),vt(r,"compositionend",(function(t){e.composing&&(t.data!=e.composing.data&&e.readFromDOMSoon(),e.composing.done=!0)})),vt(r,"touchstart",(function(){return n.forceCompositionEnd()})),vt(r,"input",(function(){e.composing||e.readFromDOMSoon()})),vt(r,"copy",s),vt(r,"cut",s)},ta.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},ta.prototype.prepareSelection=function(){var t=Gi(this.cm,!1);return t.focus=P(this.div.ownerDocument)==this.div,t},ta.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},ta.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},ta.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,i=e.doc.sel.primary(),r=i.from(),o=i.to();if(e.display.viewTo==e.display.viewFrom||r.line>=e.display.viewTo||o.line<e.display.viewFrom)t.removeAllRanges();else{var s=oa(e,t.anchorNode,t.anchorOffset),l=oa(e,t.focusNode,t.focusOffset);if(!s||s.bad||!l||l.bad||0!=ae(fe(s,l),r)||0!=ae(ue(s,l),o)){var a=e.display.view,h=r.line>=e.display.viewFrom&&ea(e,r)||{node:a[0].measure.map[2],offset:0},c=o.line<e.display.viewTo&&ea(e,o);if(!c){var u=a[a.length-1].measure,f=u.maps?u.maps[u.maps.length-1]:u.map;c={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}if(h&&c){var d,p=t.rangeCount&&t.getRangeAt(0);try{d=A(h.node,h.offset,c.offset,c.node)}catch(g){}d&&(!n&&e.state.focused?(t.collapse(h.node,h.offset),d.collapsed||(t.removeAllRanges(),t.addRange(d))):(t.removeAllRanges(),t.addRange(d)),p&&null==t.anchorNode?t.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else t.removeAllRanges()}}},ta.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation((function(){return t.cm.curOp.selectionChanged=!0}))}),20)},ta.prototype.showMultipleSelections=function(t){D(this.cm.display.cursorDiv,t.cursors),D(this.cm.display.selectionDiv,t.selection)},ta.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},ta.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return N(this.div,e)},ta.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&P(this.div.ownerDocument)==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},ta.prototype.blur=function(){this.div.blur()},ta.prototype.getField=function(){return this.div},ta.prototype.supportsTouch=function(){return!0},ta.prototype.receivedFocus=function(){var t=this,e=this;function n(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,n))}this.selectionInEditor()?setTimeout((function(){return t.pollSelection()}),20):Pr(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,n)},ta.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},ta.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(v&&c&&this.cm.display.gutterSpecs.length&&na(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=oa(e,t.anchorNode,t.anchorOffset),i=oa(e,t.focusNode,t.focusOffset);n&&i&&Pr(e,(function(){Uo(e.doc,ho(n,i),G),(n.bad||i.bad)&&(e.curOp.selectionChanged=!0)}))}}},ta.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,e,n,i=this.cm,r=i.display,o=i.doc.sel.primary(),s=o.from(),l=o.to();if(0==s.ch&&s.line>i.firstLine()&&(s=le(s.line-1,Qt(i.doc,s.line-1).length)),l.ch==Qt(i.doc,l.line).text.length&&l.line<i.lastLine()&&(l=le(l.line+1,0)),s.line<r.viewFrom||l.line>r.viewTo-1)return!1;s.line==r.viewFrom||0==(t=Fi(i,s.line))?(e=ie(r.view[0].line),n=r.view[0].node):(e=ie(r.view[t].line),n=r.view[t-1].node.nextSibling);var a,h,c=Fi(i,l.line);if(c==r.view.length-1?(a=r.viewTo-1,h=r.lineDiv.lastChild):(a=ie(r.view[c+1].line)-1,h=r.view[c+1].node.previousSibling),!n)return!1;var u=i.doc.splitLines(ra(i,n,h,e,a)),f=te(i.doc,le(e,0),le(a,Qt(i.doc,a).text.length));while(u.length>1&&f.length>1)if(Z(u)==Z(f))u.pop(),f.pop(),a--;else{if(u[0]!=f[0])break;u.shift(),f.shift(),e++}var d=0,p=0,g=u[0],m=f[0],v=Math.min(g.length,m.length);while(d<v&&g.charCodeAt(d)==m.charCodeAt(d))++d;var y=Z(u),b=Z(f),w=Math.min(y.length-(1==u.length?d:0),b.length-(1==f.length?d:0));while(p<w&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1))++p;if(1==u.length&&1==f.length&&e==s.line)while(d&&d>s.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1))d--,p++;u[u.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),u[0]=u[0].slice(d).replace(/\u200b+$/,"");var x=le(e,d),S=le(a,f.length?Z(f).length-p:0);return u.length>1||u[0]||ae(x,S)?(ss(i.doc,u,x,S,"+input"),!0):void 0},ta.prototype.ensurePolled=function(){this.forceCompositionEnd()},ta.prototype.reset=function(){this.forceCompositionEnd()},ta.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ta.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()}),80))},ta.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||Pr(this.cm,(function(){return Hi(t.cm)}))},ta.prototype.setUneditable=function(t){t.contentEditable="false"},ta.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||Ir(this.cm,Kl)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},ta.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},ta.prototype.onContextMenu=function(){},ta.prototype.resetPosition=function(){},ta.prototype.needsContentAttribute=!0;var la=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new V,this.hasSelection=!1,this.composing=null,this.resetting=!1};function aa(t,e){if(e=e?_(e):{},e.value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var n=P(t.ownerDocument);e.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body}function i(){t.value=l.getValue()}var r;if(t.form&&(vt(t.form,"submit",i),!e.leaveSubmitMethodAlone)){var o=t.form;r=o.submit;try{var s=o.submit=function(){i(),o.submit=r,o.submit(),o.submit=s}}catch(a){}}e.finishInit=function(n){n.save=i,n.getTextArea=function(){return t},n.toTextArea=function(){n.toTextArea=isNaN,i(),t.parentNode.removeChild(n.getWrapperElement()),t.style.display="",t.form&&(bt(t.form,"submit",i),e.leaveSubmitMethodAlone||"function"!=typeof t.form.submit||(t.form.submit=r))}},t.style.display="none";var l=Hl((function(e){return t.parentNode.insertBefore(e,t.nextSibling)}),e);return l}function ha(t){t.off=bt,t.on=vt,t.wheelEventPixels=ro,t.Doc=Ms,t.splitLines=Bt,t.countColumn=z,t.findColumn=X,t.isWordChar=rt,t.Pass=K,t.signal=wt,t.Line=un,t.changeEnd=co,t.scrollbarModel=Sr,t.Pos=le,t.cmpPos=ae,t.modes=zt,t.mimeModes=Vt,t.resolveMode=Kt,t.getMode=Gt,t.modeExtensions=qt,t.extendMode=$t,t.copyState=Xt,t.startState=Jt,t.innerMode=Yt,t.commands=Qs,t.keyMap=_s,t.keyName=Gs,t.isModifierKey=Us,t.lookupKey=js,t.normalizeKeyMap=Vs,t.StringStream=Zt,t.SharedTextMarker=bs,t.TextMarker=vs,t.LineWidget=ds,t.e_preventDefault=Mt,t.e_stopPropagation=At,t.e_stop=Ot,t.addClass=I,t.contains=N,t.rmClass=T,t.keyNames=Bs}la.prototype.init=function(t){var e=this,n=this,i=this.cm;this.createField(t);var r=this.textarea;function o(t){if(!xt(i,t)){if(i.somethingSelected())Ul({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var e=$l(i);Ul({lineWise:!0,text:e.text}),"cut"==t.type?i.setSelections(e.ranges,null,G):(n.prevInput="",r.value=e.text.join("\n"),B(r))}"cut"==t.type&&(i.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),m&&(r.style.width="0px"),vt(r,"input",(function(){s&&l>=9&&e.hasSelection&&(e.hasSelection=null),n.poll()})),vt(r,"paste",(function(t){xt(i,t)||Gl(t,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())})),vt(r,"cut",o),vt(r,"copy",o),vt(t.scroller,"paste",(function(e){if(!Gn(t,e)&&!xt(i,e)){if(!r.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=e.clipboardData,r.dispatchEvent(o)}})),vt(t.lineSpace,"selectstart",(function(e){Gn(t,e)||Mt(e)})),vt(r,"compositionstart",(function(){var t=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:t,range:i.markText(t,i.getCursor("to"),{className:"CodeMirror-composing"})}})),vt(r,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},la.prototype.createField=function(t){this.wrapper=Yl(),this.textarea=this.wrapper.firstChild;var e=this.cm.options;Xl(this.textarea,e.spellcheck,e.autocorrect,e.autocapitalize)},la.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},la.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,i=Gi(t);if(t.options.moveInputWithCursor){var r=xi(t,n.sel.primary().head,"div"),o=e.wrapper.getBoundingClientRect(),s=e.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,r.top+s.top-o.top)),i.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,r.left+s.left-o.left))}return i},la.prototype.showSelection=function(t){var e=this.cm,n=e.display;D(n.cursorDiv,t.cursors),D(n.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},la.prototype.reset=function(t){if(!(this.contextMenuPending||this.composing&&t)){var e=this.cm;if(this.resetting=!0,e.somethingSelected()){this.prevInput="";var n=e.getSelection();this.textarea.value=n,e.state.focused&&B(this.textarea),s&&l>=9&&(this.hasSelection=n)}else t||(this.prevInput=this.textarea.value="",s&&l>=9&&(this.hasSelection=null));this.resetting=!1}},la.prototype.getField=function(){return this.textarea},la.prototype.supportsTouch=function(){return!1},la.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!y||P(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch(t){}},la.prototype.blur=function(){this.textarea.blur()},la.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},la.prototype.receivedFocus=function(){this.slowPoll()},la.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){t.poll(),t.cm.state.focused&&t.slowPoll()}))},la.prototype.fastPoll=function(){var t=!1,e=this;function n(){var i=e.poll();i||t?(e.pollingFast=!1,e.slowPoll()):(t=!0,e.polling.set(60,n))}e.pollingFast=!0,e.polling.set(20,n)},la.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||this.resetting||!e.state.focused||Wt(n)&&!i&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var r=n.value;if(r==i&&!e.somethingSelected())return!1;if(s&&l>=9&&this.hasSelection===r||b&&/[\uf700-\uf7ff]/.test(r))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}var a=0,h=Math.min(i.length,r.length);while(a<h&&i.charCodeAt(a)==r.charCodeAt(a))++a;return Pr(e,(function(){Kl(e,r.slice(a),i.length-a,null,t.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?n.value=t.prevInput="":t.prevInput=r,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},la.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},la.prototype.onKeyPress=function(){s&&l>=9&&(this.hasSelection=null),this.fastPoll()},la.prototype.onContextMenu=function(t){var e=this,n=e.cm,i=n.display,r=e.textarea;e.contextMenuPending&&e.contextMenuPending();var o=Wi(n,t),h=i.scroller.scrollTop;if(o&&!f){var c=n.options.resetSelectionOnContextMenu;c&&-1==n.doc.sel.contains(o)&&Ir(n,Uo)(n.doc,ho(o),G);var u,d=r.style.cssText,p=e.wrapper.style.cssText,g=e.wrapper.offsetParent.getBoundingClientRect();if(e.wrapper.style.cssText="position: static",r.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-g.top-5)+"px; left: "+(t.clientX-g.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",a&&(u=r.ownerDocument.defaultView.scrollY),i.input.focus(),a&&r.ownerDocument.defaultView.scrollTo(null,u),i.input.reset(),n.somethingSelected()||(r.value=e.prevInput=" "),e.contextMenuPending=y,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),s&&l>=9&&v(),C){Ot(t);var m=function(){bt(window,"mouseup",m),setTimeout(y,20)};vt(window,"mouseup",m)}else setTimeout(y,50)}function v(){if(null!=r.selectionStart){var t=n.somethingSelected(),o="​"+(t?r.value:"");r.value="⇚",r.value=o,e.prevInput=t?"":"​",r.selectionStart=1,r.selectionEnd=o.length,i.selForContextMenu=n.doc.sel}}function y(){if(e.contextMenuPending==y&&(e.contextMenuPending=!1,e.wrapper.style.cssText=p,r.style.cssText=d,s&&l<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=h),null!=r.selectionStart)){(!s||s&&l<9)&&v();var t=0,o=function(){i.selForContextMenu==n.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&"​"==e.prevInput?Ir(n,Zo)(n):t++<10?i.detectingSelectAll=setTimeout(o,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(o,200)}}},la.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t,this.textarea.readOnly=!!t},la.prototype.setUneditable=function(){},la.prototype.needsContentAttribute=!1,Bl(Hl),Jl(Hl);var ca="iter insert remove copy getEditor constructor".split(" ");for(var ua in Ms.prototype)Ms.prototype.hasOwnProperty(ua)&&j(ca,ua)<0&&(Hl.prototype[ua]=function(t){return function(){return t.apply(this.doc,arguments)}}(Ms.prototype[ua]));return Ct(Ms),Hl.inputStyles={textarea:la,contenteditable:ta},Hl.defineMode=function(t){Hl.defaults.mode||"null"==t||(Hl.defaults.mode=t),jt.apply(this,arguments)},Hl.defineMIME=Ut,Hl.defineMode("null",(function(){return{token:function(t){return t.skipToEnd()}}})),Hl.defineMIME("text/plain","null"),Hl.defineExtension=function(t,e){Hl.prototype[t]=e},Hl.defineDocExtension=function(t,e){Ms.prototype[t]=e},Hl.fromTextArea=aa,ha(Hl),Hl.version="5.65.11",Hl}))},a7be:function(t,e,n){},b76a:function(t,e,n){(function(e,i){t.exports=i(n("4603"))})("undefined"!==typeof self&&self,(function(t){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({"01f9":function(t,e,n){"use strict";var i=n("2d00"),r=n("5ca1"),o=n("2aba"),s=n("32e9"),l=n("84f2"),a=n("41a0"),h=n("7f20"),c=n("38fd"),u=n("2b4c")("iterator"),f=!([].keys&&"next"in[].keys()),d="@@iterator",p="keys",g="values",m=function(){return this};t.exports=function(t,e,n,v,y,b,w){a(n,e,v);var x,S,k,C=function(t){if(!f&&t in O)return O[t];switch(t){case p:return function(){return new n(this,t)};case g:return function(){return new n(this,t)}}return function(){return new n(this,t)}},M=e+" Iterator",A=y==g,T=!1,O=t.prototype,D=O[u]||O[d]||y&&O[y],L=D||C(y),E=y?A?C("entries"):L:void 0,N="Array"==e&&O.entries||D;if(N&&(k=c(N.call(new t)),k!==Object.prototype&&k.next&&(h(k,M,!0),i||"function"==typeof k[u]||s(k,u,m))),A&&D&&D.name!==g&&(T=!0,L=function(){return D.call(this)}),i&&!w||!f&&!T&&O[u]||s(O,u,L),l[e]=L,l[M]=m,y)if(x={values:A?L:C(g),keys:b?L:C(p),entries:E},w)for(S in x)S in O||o(O,S,x[S]);else r(r.P+r.F*(f||T),e,x);return x}},"02f4":function(t,e,n){var i=n("4588"),r=n("be13");t.exports=function(t){return function(e,n){var o,s,l=String(r(e)),a=i(n),h=l.length;return a<0||a>=h?t?"":void 0:(o=l.charCodeAt(a),o<55296||o>56319||a+1===h||(s=l.charCodeAt(a+1))<56320||s>57343?t?l.charAt(a):o:t?l.slice(a,a+2):s-56320+(o-55296<<10)+65536)}}},"0390":function(t,e,n){"use strict";var i=n("02f4")(!0);t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},"0bfb":function(t,e,n){"use strict";var i=n("cb7c");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0d58":function(t,e,n){var i=n("ce10"),r=n("e11e");t.exports=Object.keys||function(t){return i(t,r)}},1495:function(t,e,n){var i=n("86cc"),r=n("cb7c"),o=n("0d58");t.exports=n("9e1e")?Object.defineProperties:function(t,e){r(t);var n,s=o(e),l=s.length,a=0;while(l>a)i.f(t,n=s[a++],e[n]);return t}},"214f":function(t,e,n){"use strict";n("b0c5");var i=n("2aba"),r=n("32e9"),o=n("79e5"),s=n("be13"),l=n("2b4c"),a=n("520a"),h=l("species"),c=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var f=l(t),d=!o((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),p=d?!o((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[h]=function(){return n}),n[f](""),!e})):void 0;if(!d||!p||"replace"===t&&!c||"split"===t&&!u){var g=/./[f],m=n(s,f,""[t],(function(t,e,n,i,r){return e.exec===a?d&&!r?{done:!0,value:g.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}})),v=m[0],y=m[1];i(String.prototype,t,v),r(RegExp.prototype,f,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}}},"230e":function(t,e,n){var i=n("d3f4"),r=n("7726").document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},"23c6":function(t,e,n){var i=n("2d95"),r=n("2b4c")("toStringTag"),o="Arguments"==i(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,l;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),r))?n:o?i(e):"Object"==(l=i(e))&&"function"==typeof e.callee?"Arguments":l}},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"2aba":function(t,e,n){var i=n("7726"),r=n("32e9"),o=n("69a8"),s=n("ca5a")("src"),l=n("fa5b"),a="toString",h=(""+l).split(a);n("8378").inspectSource=function(t){return l.call(t)},(t.exports=function(t,e,n,l){var a="function"==typeof n;a&&(o(n,"name")||r(n,"name",e)),t[e]!==n&&(a&&(o(n,s)||r(n,s,t[e]?""+t[e]:h.join(String(e)))),t===i?t[e]=n:l?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,a,(function(){return"function"==typeof this&&this[s]||l.call(this)}))},"2aeb":function(t,e,n){var i=n("cb7c"),r=n("1495"),o=n("e11e"),s=n("613b")("IE_PROTO"),l=function(){},a="prototype",h=function(){var t,e=n("230e")("iframe"),i=o.length,r="<",s=">";e.style.display="none",n("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+s+"document.F=Object"+r+"/script"+s),t.close(),h=t.F;while(i--)delete h[a][o[i]];return h()};t.exports=Object.create||function(t,e){var n;return null!==t?(l[a]=i(t),n=new l,l[a]=null,n[s]=t):n=h(),void 0===e?n:r(n,e)}},"2b4c":function(t,e,n){var i=n("5537")("wks"),r=n("ca5a"),o=n("7726").Symbol,s="function"==typeof o,l=t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:r)("Symbol."+t))};l.store=i},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"2fdb":function(t,e,n){"use strict";var i=n("5ca1"),r=n("d2c8"),o="includes";i(i.P+i.F*n("5147")(o),"String",{includes:function(t){return!!~r(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(t,e,n){var i=n("86cc"),r=n("4630");t.exports=n("9e1e")?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},"38fd":function(t,e,n){var i=n("69a8"),r=n("4bf8"),o=n("613b")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},"41a0":function(t,e,n){"use strict";var i=n("2aeb"),r=n("4630"),o=n("7f20"),s={};n("32e9")(s,n("2b4c")("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=i(s,{next:r(1,n)}),o(t,e+" Iterator")}},"456d":function(t,e,n){var i=n("4bf8"),r=n("0d58");n("5eda")("keys",(function(){return function(t){return r(i(t))}}))},4588:function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"4bf8":function(t,e,n){var i=n("be13");t.exports=function(t){return Object(i(t))}},5147:function(t,e,n){var i=n("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(r){}}return!0}},"520a":function(t,e,n){"use strict";var i=n("0bfb"),r=RegExp.prototype.exec,o=String.prototype.replace,s=r,l="lastIndex",a=function(){var t=/a/,e=/b*/g;return r.call(t,"a"),r.call(e,"a"),0!==t[l]||0!==e[l]}(),h=void 0!==/()??/.exec("")[1],c=a||h;c&&(s=function(t){var e,n,s,c,u=this;return h&&(n=new RegExp("^"+u.source+"$(?!\\s)",i.call(u))),a&&(e=u[l]),s=r.call(u,t),a&&s&&(u[l]=u.global?s.index+s[0].length:e),h&&s&&s.length>1&&o.call(s[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(s[c]=void 0)})),s}),t.exports=s},"52a7":function(t,e){e.f={}.propertyIsEnumerable},5537:function(t,e,n){var i=n("8378"),r=n("7726"),o="__core-js_shared__",s=r[o]||(r[o]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(t,e,n){var i=n("7726"),r=n("8378"),o=n("32e9"),s=n("2aba"),l=n("9b43"),a="prototype",h=function(t,e,n){var c,u,f,d,p=t&h.F,g=t&h.G,m=t&h.S,v=t&h.P,y=t&h.B,b=g?i:m?i[e]||(i[e]={}):(i[e]||{})[a],w=g?r:r[e]||(r[e]={}),x=w[a]||(w[a]={});for(c in g&&(n=e),n)u=!p&&b&&void 0!==b[c],f=(u?b:n)[c],d=y&&u?l(f,i):v&&"function"==typeof f?l(Function.call,f):f,b&&s(b,c,f,t&h.U),w[c]!=f&&o(w,c,d),v&&x[c]!=f&&(x[c]=f)};i.core=r,h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,t.exports=h},"5eda":function(t,e,n){var i=n("5ca1"),r=n("8378"),o=n("79e5");t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],s={};s[t]=e(n),i(i.S+i.F*o((function(){n(1)})),"Object",s)}},"5f1b":function(t,e,n){"use strict";var i=n("23c6"),r=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var o=n.call(t,e);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},"613b":function(t,e,n){var i=n("5537")("keys"),r=n("ca5a");t.exports=function(t){return i[t]||(i[t]=r(t))}},"626a":function(t,e,n){var i=n("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},6762:function(t,e,n){"use strict";var i=n("5ca1"),r=n("c366")(!0);i(i.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},6821:function(t,e,n){var i=n("626a"),r=n("be13");t.exports=function(t){return i(r(t))}},"69a8":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"6a99":function(t,e,n){var i=n("d3f4");t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},7333:function(t,e,n){"use strict";var i=n("0d58"),r=n("2621"),o=n("52a7"),s=n("4bf8"),l=n("626a"),a=Object.assign;t.exports=!a||n("79e5")((function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=a({},t)[n]||Object.keys(a({},e)).join("")!=i}))?function(t,e){var n=s(t),a=arguments.length,h=1,c=r.f,u=o.f;while(a>h){var f,d=l(arguments[h++]),p=c?i(d).concat(c(d)):i(d),g=p.length,m=0;while(g>m)u.call(d,f=p[m++])&&(n[f]=d[f])}return n}:a},7726:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"77f1":function(t,e,n){var i=n("4588"),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):o(t,e)}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"7f20":function(t,e,n){var i=n("86cc").f,r=n("69a8"),o=n("2b4c")("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},8378:function(t,e){var n=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},"84f2":function(t,e){t.exports={}},"86cc":function(t,e,n){var i=n("cb7c"),r=n("c69a"),o=n("6a99"),s=Object.defineProperty;e.f=n("9e1e")?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return s(t,e,n)}catch(l){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},"9b43":function(t,e,n){var i=n("d8e8");t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},"9c6c":function(t,e,n){var i=n("2b4c")("unscopables"),r=Array.prototype;void 0==r[i]&&n("32e9")(r,i,{}),t.exports=function(t){r[i][t]=!0}},"9def":function(t,e,n){var i=n("4588"),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},"9e1e":function(t,e,n){t.exports=!n("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},a352:function(e,n){e.exports=t},a481:function(t,e,n){"use strict";var i=n("cb7c"),r=n("4bf8"),o=n("9def"),s=n("4588"),l=n("0390"),a=n("5f1b"),h=Math.max,c=Math.min,u=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};n("214f")("replace",2,(function(t,e,n,g){return[function(i,r){var o=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},function(t,e){var r=g(n,t,this,e);if(r.done)return r.value;var u=i(t),f=String(this),d="function"===typeof e;d||(e=String(e));var v=u.global;if(v){var y=u.unicode;u.lastIndex=0}var b=[];while(1){var w=a(u,f);if(null===w)break;if(b.push(w),!v)break;var x=String(w[0]);""===x&&(u.lastIndex=l(f,o(u.lastIndex),y))}for(var S="",k=0,C=0;C<b.length;C++){w=b[C];for(var M=String(w[0]),A=h(c(s(w.index),f.length),0),T=[],O=1;O<w.length;O++)T.push(p(w[O]));var D=w.groups;if(d){var L=[M].concat(T,A,f);void 0!==D&&L.push(D);var E=String(e.apply(void 0,L))}else E=m(M,f,A,T,D,e);A>=k&&(S+=f.slice(k,A)+E,k=A+M.length)}return S+f.slice(k)}];function m(t,e,i,o,s,l){var a=i+t.length,h=o.length,c=d;return void 0!==s&&(s=r(s),c=f),n.call(l,c,(function(n,r){var l;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(a);case"<":l=s[r.slice(1,-1)];break;default:var c=+r;if(0===c)return n;if(c>h){var f=u(c/10);return 0===f?n:f<=h?void 0===o[f-1]?r.charAt(1):o[f-1]+r.charAt(1):n}l=o[c-1]}return void 0===l?"":l}))}}))},aae3:function(t,e,n){var i=n("d3f4"),r=n("2d95"),o=n("2b4c")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},ac6a:function(t,e,n){for(var i=n("cadf"),r=n("0d58"),o=n("2aba"),s=n("7726"),l=n("32e9"),a=n("84f2"),h=n("2b4c"),c=h("iterator"),u=h("toStringTag"),f=a.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=r(d),g=0;g<p.length;g++){var m,v=p[g],y=d[v],b=s[v],w=b&&b.prototype;if(w&&(w[c]||l(w,c,f),w[u]||l(w,u,v),a[v]=f,y))for(m in i)w[m]||o(w,m,i[m],!0)}},b0c5:function(t,e,n){"use strict";var i=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},c366:function(t,e,n){var i=n("6821"),r=n("9def"),o=n("77f1");t.exports=function(t){return function(e,n,s){var l,a=i(e),h=r(a.length),c=o(s,h);if(t&&n!=n){while(h>c)if(l=a[c++],l!=l)return!0}else for(;h>c;c++)if((t||c in a)&&a[c]===n)return t||c||0;return!t&&-1}}},c649:function(t,e,n){"use strict";(function(t){n.d(e,"c",(function(){return h})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return r})),n.d(e,"d",(function(){return a}));n("a481");function i(){return"undefined"!==typeof window?window.console:t.console}var r=i();function o(t){var e=Object.create(null);return function(n){var i=e[n];return i||(e[n]=t(n))}}var s=/-(\w)/g,l=o((function(t){return t.replace(s,(function(t,e){return e?e.toUpperCase():""}))}));function a(t){null!==t.parentElement&&t.parentElement.removeChild(t)}function h(t,e,n){var i=0===n?t.children[0]:t.children[n-1].nextSibling;t.insertBefore(e,i)}}).call(this,n("c8ba"))},c69a:function(t,e,n){t.exports=!n("9e1e")&&!n("79e5")((function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a}))},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}t.exports=n},ca5a:function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},cadf:function(t,e,n){"use strict";var i=n("9c6c"),r=n("d53b"),o=n("84f2"),s=n("6821");t.exports=n("01f9")(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},cb7c:function(t,e,n){var i=n("d3f4");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},ce10:function(t,e,n){var i=n("69a8"),r=n("6821"),o=n("c366")(!1),s=n("613b")("IE_PROTO");t.exports=function(t,e){var n,l=r(t),a=0,h=[];for(n in l)n!=s&&i(l,n)&&h.push(n);while(e.length>a)i(l,n=e[a++])&&(~o(h,n)||h.push(n));return h}},d2c8:function(t,e,n){var i=n("aae3"),r=n("be13");t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(t))}},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(t,e,n){"use strict";var i=n("5ca1"),r=n("9def"),o=n("d2c8"),s="startsWith",l=""[s];i(i.P+i.F*n("5147")(s),"String",{startsWith:function(t){var e=o(this,t,s),n=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return l?l.call(e,i,n):e.slice(n,n+i.length)===i}})},f6fd:function(t,e){(function(t){var e="currentScript",n=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(i){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(i.stack)||[!1])[1];for(t in n)if(n[t].src==e||"interactive"==n[t].readyState)return n[t];return null}}})})(document)},f751:function(t,e,n){var i=n("5ca1");i(i.S+i.F,"Object",{assign:n("7333")})},fa5b:function(t,e,n){t.exports=n("5537")("native-function-to-string",Function.toString)},fab2:function(t,e,n){var i=n("7726").document;t.exports=i&&i.documentElement},fb15:function(t,e,n){"use strict";var i;(n.r(e),"undefined"!==typeof window)&&(n("f6fd"),(i=window.document.currentScript)&&(i=i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=i[1]));n("f751"),n("f559"),n("ac6a"),n("cadf"),n("456d");function r(t){if(Array.isArray(t))return t}function o(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)if(n.push(s.value),e&&n.length===e)break}catch(a){r=!0,o=a}finally{try{i||null==l["return"]||l["return"]()}finally{if(r)throw o}}return n}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function l(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){return r(t)||o(t,e)||l(t,e)||a()}n("6762"),n("2fdb");function c(t){if(Array.isArray(t))return s(t)}function u(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t){return c(t)||u(t)||l(t)||f()}var p=n("a352"),g=n.n(p),m=n("c649");function v(t,e,n){return void 0===n||(t=t||{},t[e]=n),t}function y(t,e){return t.map((function(t){return t.elm})).indexOf(e)}function b(t,e,n,i){if(!t)return[];var r=t.map((function(t){return t.elm})),o=e.length-i,s=d(e).map((function(t,e){return e>=o?r.length:r.indexOf(t)}));return n?s.filter((function(t){return-1!==t})):s}function w(t,e){var n=this;this.$nextTick((function(){return n.$emit(t.toLowerCase(),e)}))}function x(t){var e=this;return function(n){null!==e.realList&&e["onDrag"+t](n),w.call(e,t,n)}}function S(t){return["transition-group","TransitionGroup"].includes(t)}function k(t){if(!t||1!==t.length)return!1;var e=h(t,1),n=e[0].componentOptions;return!!n&&S(n.tag)}function C(t,e,n){return t[n]||(e[n]?e[n]():void 0)}function M(t,e,n){var i=0,r=0,o=C(e,n,"header");o&&(i=o.length,t=t?[].concat(d(o),d(t)):d(o));var s=C(e,n,"footer");return s&&(r=s.length,t=t?[].concat(d(t),d(s)):d(s)),{children:t,headerOffset:i,footerOffset:r}}function A(t,e){var n=null,i=function(t,e){n=v(n,t,e)},r=Object.keys(t).filter((function(t){return"id"===t||t.startsWith("data-")})).reduce((function(e,n){return e[n]=t[n],e}),{});if(i("attrs",r),!e)return n;var o=e.on,s=e.props,l=e.attrs;return i("on",o),i("props",s),Object.assign(n.attrs,l),n}var T=["Start","Add","Remove","Update","End"],O=["Choose","Unchoose","Sort","Filter","Clone"],D=["Move"].concat(T,O).map((function(t){return"on"+t})),L=null,E={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(t){return t}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},N={name:"draggable",inheritAttrs:!1,props:E,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(t){var e=this.$slots.default;this.transitionMode=k(e);var n=M(e,this.$slots,this.$scopedSlots),i=n.children,r=n.headerOffset,o=n.footerOffset;this.headerOffset=r,this.footerOffset=o;var s=A(this.$attrs,this.componentData);return t(this.getTag(),s,i)},created:function(){null!==this.list&&null!==this.value&&m["b"].error("Value and list props are mutually exclusive! Please set one or another."),"div"!==this.element&&m["b"].warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),void 0!==this.options&&m["b"].warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var t=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var e={};T.forEach((function(n){e["on"+n]=x.call(t,n)})),O.forEach((function(n){e["on"+n]=w.bind(t,n)}));var n=Object.keys(this.$attrs).reduce((function(e,n){return e[Object(m["a"])(n)]=t.$attrs[n],e}),{}),i=Object.assign({},this.options,n,e,{onMove:function(e,n){return t.onDragMove(e,n)}});!("draggable"in i)&&(i.draggable=">*"),this._sortable=new g.a(this.rootContainer,i),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(t){this.updateOptions(t)},deep:!0},$attrs:{handler:function(t){this.updateOptions(t)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var t=this._vnode.fnOptions;return t&&t.functional},getTag:function(){return this.tag||this.element},updateOptions:function(t){for(var e in t){var n=Object(m["a"])(e);-1===D.indexOf(n)&&this._sortable.option(n,t[e])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var t=this.$slots.default;return this.transitionMode?t[0].child.$slots.default:t},computeIndexes:function(){var t=this;this.$nextTick((function(){t.visibleIndexes=b(t.getChildrenNodes(),t.rootContainer.children,t.transitionMode,t.footerOffset)}))},getUnderlyingVm:function(t){var e=y(this.getChildrenNodes()||[],t);if(-1===e)return null;var n=this.realList[e];return{index:e,element:n}},getUnderlyingPotencialDraggableComponent:function(t){var e=t.__vue__;return e&&e.$options&&S(e.$options._componentTag)?e.$parent:!("realList"in e)&&1===e.$children.length&&"realList"in e.$children[0]?e.$children[0]:e},emitChanges:function(t){var e=this;this.$nextTick((function(){e.$emit("change",t)}))},alterList:function(t){if(this.list)t(this.list);else{var e=d(this.value);t(e),this.$emit("input",e)}},spliceList:function(){var t=arguments,e=function(e){return e.splice.apply(e,d(t))};this.alterList(e)},updatePosition:function(t,e){var n=function(n){return n.splice(e,0,n.splice(t,1)[0])};this.alterList(n)},getRelatedContextFromMoveEvent:function(t){var e=t.to,n=t.related,i=this.getUnderlyingPotencialDraggableComponent(e);if(!i)return{component:i};var r=i.realList,o={list:r,component:i};if(e!==n&&r&&i.getUnderlyingVm){var s=i.getUnderlyingVm(n);if(s)return Object.assign(s,o)}return o},getVmIndex:function(t){var e=this.visibleIndexes,n=e.length;return t>n-1?n:e[t]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(t){if(this.noTransitionOnDrag&&this.transitionMode){var e=this.getChildrenNodes();e[t].data=null;var n=this.getComponent();n.children=[],n.kept=void 0}},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),L=t.item},onDragAdd:function(t){var e=t.item._underlying_vm_;if(void 0!==e){Object(m["d"])(t.item);var n=this.getVmIndex(t.newIndex);this.spliceList(n,0,e),this.computeIndexes();var i={element:e,newIndex:n};this.emitChanges({added:i})}},onDragRemove:function(t){if(Object(m["c"])(this.rootContainer,t.item,t.oldIndex),"clone"!==t.pullMode){var e=this.context.index;this.spliceList(e,1);var n={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:n})}else Object(m["d"])(t.clone)},onDragUpdate:function(t){Object(m["d"])(t.item),Object(m["c"])(t.from,t.item,t.oldIndex);var e=this.context.index,n=this.getVmIndex(t.newIndex);this.updatePosition(e,n);var i={element:this.context.element,oldIndex:e,newIndex:n};this.emitChanges({moved:i})},updateProperty:function(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},computeFutureIndex:function(t,e){if(!t.element)return 0;var n=d(e.to.children).filter((function(t){return"none"!==t.style["display"]})),i=n.indexOf(e.related),r=t.component.getVmIndex(i),o=-1!==n.indexOf(L);return o||!e.willInsertAfter?r:r+1},onDragMove:function(t,e){var n=this.move;if(!n||!this.realList)return!0;var i=this.getRelatedContextFromMoveEvent(t),r=this.context,o=this.computeFutureIndex(i,t);Object.assign(r,{futureIndex:o});var s=Object.assign({},t,{relatedContext:i,draggedContext:r});return n(s,e)},onDragEnd:function(){this.computeIndexes(),L=null}}};"undefined"!==typeof window&&"Vue"in window&&window.Vue.component("draggable",N);var P=N;e["default"]=P}})["default"]}))},e762:function(t,e,n){"use strict";n.r(e),n.d(e,"version",(function(){return i})),n.d(e,"VERSION",(function(){return r})),n.d(e,"atob",(function(){return N})),n.d(e,"atobPolyfill",(function(){return E})),n.d(e,"btoa",(function(){return b})),n.d(e,"btoaPolyfill",(function(){return y})),n.d(e,"fromBase64",(function(){return W})),n.d(e,"toBase64",(function(){return A})),n.d(e,"utob",(function(){return C})),n.d(e,"encode",(function(){return A})),n.d(e,"encodeURI",(function(){return T})),n.d(e,"encodeURL",(function(){return T})),n.d(e,"btou",(function(){return L})),n.d(e,"decode",(function(){return W})),n.d(e,"isValid",(function(){return F})),n.d(e,"fromUint8Array",(function(){return x})),n.d(e,"toUint8Array",(function(){return I})),n.d(e,"extendString",(function(){return _})),n.d(e,"extendUint8Array",(function(){return z})),n.d(e,"extendBuiltins",(function(){return V})),n.d(e,"Base64",(function(){return j}));const i="3.7.4",r=i,o="function"===typeof atob,s="function"===typeof btoa,l="function"===typeof Buffer,a="function"===typeof TextDecoder?new TextDecoder:void 0,h="function"===typeof TextEncoder?new TextEncoder:void 0,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=Array.prototype.slice.call(c),f=(t=>{let e={};return t.forEach((t,n)=>e[t]=n),e})(u),d=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,p=String.fromCharCode.bind(String),g="function"===typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(t,e=(t=>t))=>new Uint8Array(Array.prototype.slice.call(t,0).map(e)),m=t=>t.replace(/=/g,"").replace(/[+\/]/g,t=>"+"==t?"-":"_"),v=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),y=t=>{let e,n,i,r,o="";const s=t.length%3;for(let l=0;l<t.length;){if((n=t.charCodeAt(l++))>255||(i=t.charCodeAt(l++))>255||(r=t.charCodeAt(l++))>255)throw new TypeError("invalid character found");e=n<<16|i<<8|r,o+=u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}return s?o.slice(0,s-3)+"===".substring(s):o},b=s?t=>btoa(t):l?t=>Buffer.from(t,"binary").toString("base64"):y,w=l?t=>Buffer.from(t).toString("base64"):t=>{const e=4096;let n=[];for(let i=0,r=t.length;i<r;i+=e)n.push(p.apply(null,t.subarray(i,i+e)));return b(n.join(""))},x=(t,e=!1)=>e?m(w(t)):w(t),S=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?p(192|e>>>6)+p(128|63&e):p(224|e>>>12&15)+p(128|e>>>6&63)+p(128|63&e)}e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return p(240|e>>>18&7)+p(128|e>>>12&63)+p(128|e>>>6&63)+p(128|63&e)},k=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,C=t=>t.replace(k,S),M=l?t=>Buffer.from(t,"utf8").toString("base64"):h?t=>w(h.encode(t)):t=>b(C(t)),A=(t,e=!1)=>e?m(M(t)):M(t),T=t=>A(t,!0),O=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,D=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return p(55296+(n>>>10))+p(56320+(1023&n));case 3:return p((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return p((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},L=t=>t.replace(O,D),E=t=>{if(t=t.replace(/\s+/g,""),!d.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));let e,n,i,r="";for(let o=0;o<t.length;)e=f[t.charAt(o++)]<<18|f[t.charAt(o++)]<<12|(n=f[t.charAt(o++)])<<6|(i=f[t.charAt(o++)]),r+=64===n?p(e>>16&255):64===i?p(e>>16&255,e>>8&255):p(e>>16&255,e>>8&255,255&e);return r},N=o?t=>atob(v(t)):l?t=>Buffer.from(t,"base64").toString("binary"):E,P=l?t=>g(Buffer.from(t,"base64")):t=>g(N(t),t=>t.charCodeAt(0)),I=t=>P(B(t)),R=l?t=>Buffer.from(t,"base64").toString("utf8"):a?t=>a.decode(P(t)):t=>L(N(t)),B=t=>v(t.replace(/[-_]/g,t=>"-"==t?"+":"/")),W=t=>R(B(t)),F=t=>{if("string"!==typeof t)return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},H=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),_=function(){const t=(t,e)=>Object.defineProperty(String.prototype,t,H(e));t("fromBase64",(function(){return W(this)})),t("toBase64",(function(t){return A(this,t)})),t("toBase64URI",(function(){return A(this,!0)})),t("toBase64URL",(function(){return A(this,!0)})),t("toUint8Array",(function(){return I(this)}))},z=function(){const t=(t,e)=>Object.defineProperty(Uint8Array.prototype,t,H(e));t("toBase64",(function(t){return x(this,t)})),t("toBase64URI",(function(){return x(this,!0)})),t("toBase64URL",(function(){return x(this,!0)}))},V=()=>{_(),z()},j={version:i,VERSION:r,atob:N,atobPolyfill:E,btoa:b,btoaPolyfill:y,fromBase64:W,toBase64:A,encode:A,encodeURI:T,encodeURL:T,utob:C,btou:L,decode:W,isValid:F,fromUint8Array:x,toUint8Array:I,extendString:_,extendUint8Array:z,extendBuiltins:V}},f9d4:function(t,e,n){(function(t){t(n("56b3"))})((function(t){"use strict";t.defineMode("javascript",(function(e,n){var i,r,o=e.indentUnit,s=n.statementIndent,l=n.jsonld,a=n.json||l,h=!1!==n.trackScope,c=n.typescript,u=n.wordCharacters||/[\w$\xa1-\uffff]/,f=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),n=t("keyword b"),i=t("keyword c"),r=t("keyword d"),o=t("operator"),s={type:"atom",style:"atom"};return{if:t("if"),while:e,with:e,else:n,do:n,try:n,finally:n,return:r,break:r,continue:r,new:t("new"),delete:i,void:i,throw:i,debugger:t("debugger"),var:t("var"),const:t("var"),let:t("var"),function:t("function"),catch:t("catch"),for:t("for"),switch:t("switch"),case:t("case"),default:t("default"),in:o,typeof:o,instanceof:o,true:s,false:s,null:s,undefined:s,NaN:s,Infinity:s,this:t("this"),class:t("class"),super:t("atom"),yield:i,export:t("export"),import:t("import"),extends:i,await:i}}(),d=/[+\-*&%=<>!?|~^@]/,p=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function g(t){var e,n=!1,i=!1;while(null!=(e=t.next())){if(!n){if("/"==e&&!i)return;"["==e?i=!0:i&&"]"==e&&(i=!1)}n=!n&&"\\"==e}}function m(t,e,n){return i=t,r=n,e}function v(t,e){var n=t.next();if('"'==n||"'"==n)return e.tokenize=y(n),e.tokenize(t,e);if("."==n&&t.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return m("number","number");if("."==n&&t.match(".."))return m("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return m(n);if("="==n&&t.eat(">"))return m("=>","operator");if("0"==n&&t.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return m("number","number");if(/\d/.test(n))return t.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),m("number","number");if("/"==n)return t.eat("*")?(e.tokenize=b,b(t,e)):t.eat("/")?(t.skipToEnd(),m("comment","comment")):re(t,e,1)?(g(t),t.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),m("regexp","string-2")):(t.eat("="),m("operator","operator",t.current()));if("`"==n)return e.tokenize=w,w(t,e);if("#"==n&&"!"==t.peek())return t.skipToEnd(),m("meta","meta");if("#"==n&&t.eatWhile(u))return m("variable","property");if("<"==n&&t.match("!--")||"-"==n&&t.match("->")&&!/\S/.test(t.string.slice(0,t.start)))return t.skipToEnd(),m("comment","comment");if(d.test(n))return">"==n&&e.lexical&&">"==e.lexical.type||(t.eat("=")?"!"!=n&&"="!=n||t.eat("="):/[<>*+\-|&?]/.test(n)&&(t.eat(n),">"==n&&t.eat(n))),"?"==n&&t.eat(".")?m("."):m("operator","operator",t.current());if(u.test(n)){t.eatWhile(u);var i=t.current();if("."!=e.lastType){if(f.propertyIsEnumerable(i)){var r=f[i];return m(r.type,r.style,i)}if("async"==i&&t.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return m("async","keyword",i)}return m("variable","variable",i)}}function y(t){return function(e,n){var i,r=!1;if(l&&"@"==e.peek()&&e.match(p))return n.tokenize=v,m("jsonld-keyword","meta");while(null!=(i=e.next())){if(i==t&&!r)break;r=!r&&"\\"==i}return r||(n.tokenize=v),m("string","string")}}function b(t,e){var n,i=!1;while(n=t.next()){if("/"==n&&i){e.tokenize=v;break}i="*"==n}return m("comment","comment")}function w(t,e){var n,i=!1;while(null!=(n=t.next())){if(!i&&("`"==n||"$"==n&&t.eat("{"))){e.tokenize=v;break}i=!i&&"\\"==n}return m("quasi","string-2",t.current())}var x="([{}])";function S(t,e){e.fatArrowAt&&(e.fatArrowAt=null);var n=t.string.indexOf("=>",t.start);if(!(n<0)){if(c){var i=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(t.string.slice(t.start,n));i&&(n=i.index)}for(var r=0,o=!1,s=n-1;s>=0;--s){var l=t.string.charAt(s),a=x.indexOf(l);if(a>=0&&a<3){if(!r){++s;break}if(0==--r){"("==l&&(o=!0);break}}else if(a>=3&&a<6)++r;else if(u.test(l))o=!0;else if(/["'\/`]/.test(l))for(;;--s){if(0==s)return;var h=t.string.charAt(s-1);if(h==l&&"\\"!=t.string.charAt(s-2)){s--;break}}else if(o&&!r){++s;break}}o&&!r&&(e.fatArrowAt=s)}}var k={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function C(t,e,n,i,r,o){this.indented=t,this.column=e,this.type=n,this.prev=r,this.info=o,null!=i&&(this.align=i)}function M(t,e){if(!h)return!1;for(var n=t.localVars;n;n=n.next)if(n.name==e)return!0;for(var i=t.context;i;i=i.prev)for(n=i.vars;n;n=n.next)if(n.name==e)return!0}function A(t,e,n,i,r){var o=t.cc;T.state=t,T.stream=r,T.marked=null,T.cc=o,T.style=e,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);while(1){var s=o.length?o.pop():a?K:j;if(s(n,i)){while(o.length&&o[o.length-1].lex)o.pop()();return T.marked?T.marked:"variable"==n&&M(t,i)?"variable-2":e}}}var T={state:null,column:null,marked:null,cc:null};function O(){for(var t=arguments.length-1;t>=0;t--)T.cc.push(arguments[t])}function D(){return O.apply(null,arguments),!0}function L(t,e){for(var n=e;n;n=n.next)if(n.name==t)return!0;return!1}function E(t){var e=T.state;if(T.marked="def",h){if(e.context)if("var"==e.lexical.info&&e.context&&e.context.block){var i=N(t,e.context);if(null!=i)return void(e.context=i)}else if(!L(t,e.localVars))return void(e.localVars=new R(t,e.localVars));n.globalVars&&!L(t,e.globalVars)&&(e.globalVars=new R(t,e.globalVars))}}function N(t,e){if(e){if(e.block){var n=N(t,e.prev);return n?n==e.prev?e:new I(n,e.vars,!0):null}return L(t,e.vars)?e:new I(e.prev,new R(t,e.vars),!1)}return null}function P(t){return"public"==t||"private"==t||"protected"==t||"abstract"==t||"readonly"==t}function I(t,e,n){this.prev=t,this.vars=e,this.block=n}function R(t,e){this.name=t,this.next=e}var B=new R("this",new R("arguments",null));function W(){T.state.context=new I(T.state.context,T.state.localVars,!1),T.state.localVars=B}function F(){T.state.context=new I(T.state.context,T.state.localVars,!0),T.state.localVars=null}function H(){T.state.localVars=T.state.context.vars,T.state.context=T.state.context.prev}function _(t,e){var n=function(){var n=T.state,i=n.indented;if("stat"==n.lexical.type)i=n.lexical.indented;else for(var r=n.lexical;r&&")"==r.type&&r.align;r=r.prev)i=r.indented;n.lexical=new C(i,T.stream.column(),t,null,n.lexical,e)};return n.lex=!0,n}function z(){var t=T.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function V(t){function e(n){return n==t?D():";"==t||"}"==n||")"==n||"]"==n?O():D(e)}return e}function j(t,e){return"var"==t?D(_("vardef",e),Ot,V(";"),z):"keyword a"==t?D(_("form"),q,j,z):"keyword b"==t?D(_("form"),j,z):"keyword d"==t?T.stream.match(/^\s*$/,!1)?D():D(_("stat"),X,V(";"),z):"debugger"==t?D(V(";")):"{"==t?D(_("}"),F,ft,z,H):";"==t?D():"if"==t?("else"==T.state.lexical.info&&T.state.cc[T.state.cc.length-1]==z&&T.state.cc.pop()(),D(_("form"),q,j,z,It)):"function"==t?D(Ft):"for"==t?D(_("form"),F,Rt,j,H,z):"class"==t||c&&"interface"==e?(T.marked="keyword",D(_("form","class"==t?t:e),jt,z)):"variable"==t?c&&"declare"==e?(T.marked="keyword",D(j)):c&&("module"==e||"enum"==e||"type"==e)&&T.stream.match(/^\s*\w/,!1)?(T.marked="keyword","enum"==e?D(ee):"type"==e?D(_t,V("operator"),vt,V(";")):D(_("form"),Dt,V("{"),_("}"),ft,z,z)):c&&"namespace"==e?(T.marked="keyword",D(_("form"),K,j,z)):c&&"abstract"==e?(T.marked="keyword",D(j)):D(_("stat"),ot):"switch"==t?D(_("form"),q,V("{"),_("}","switch"),F,ft,z,z,H):"case"==t?D(K,V(":")):"default"==t?D(V(":")):"catch"==t?D(_("form"),W,U,j,z,H):"export"==t?D(_("stat"),qt,z):"import"==t?D(_("stat"),Xt,z):"async"==t?D(j):"@"==e?D(K,j):O(_("stat"),K,V(";"),z)}function U(t){if("("==t)return D(zt,V(")"))}function K(t,e){return $(t,e,!1)}function G(t,e){return $(t,e,!0)}function q(t){return"("!=t?O():D(_(")"),X,V(")"),z)}function $(t,e,n){if(T.state.fatArrowAt==T.stream.start){var i=n?et:tt;if("("==t)return D(W,_(")"),ct(zt,")"),z,V("=>"),i,H);if("variable"==t)return O(W,Dt,V("=>"),i,H)}var r=n?J:Y;return k.hasOwnProperty(t)?D(r):"function"==t?D(Ft,r):"class"==t||c&&"interface"==e?(T.marked="keyword",D(_("form"),Vt,z)):"keyword c"==t||"async"==t?D(n?G:K):"("==t?D(_(")"),X,V(")"),z,r):"operator"==t||"spread"==t?D(n?G:K):"["==t?D(_("]"),te,z,r):"{"==t?ut(lt,"}",null,r):"quasi"==t?O(Z,r):"new"==t?D(nt(n)):D()}function X(t){return t.match(/[;\}\)\],]/)?O():O(K)}function Y(t,e){return","==t?D(X):J(t,e,!1)}function J(t,e,n){var i=0==n?Y:J,r=0==n?K:G;return"=>"==t?D(W,n?et:tt,H):"operator"==t?/\+\+|--/.test(e)||c&&"!"==e?D(i):c&&"<"==e&&T.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?D(_(">"),ct(vt,">"),z,i):"?"==e?D(K,V(":"),r):D(r):"quasi"==t?O(Z,i):";"!=t?"("==t?ut(G,")","call",i):"."==t?D(st,i):"["==t?D(_("]"),X,V("]"),z,i):c&&"as"==e?(T.marked="keyword",D(vt,i)):"regexp"==t?(T.state.lastType=T.marked="operator",T.stream.backUp(T.stream.pos-T.stream.start-1),D(r)):void 0:void 0}function Z(t,e){return"quasi"!=t?O():"${"!=e.slice(e.length-2)?D(Z):D(X,Q)}function Q(t){if("}"==t)return T.marked="string-2",T.state.tokenize=w,D(Z)}function tt(t){return S(T.stream,T.state),O("{"==t?j:K)}function et(t){return S(T.stream,T.state),O("{"==t?j:G)}function nt(t){return function(e){return"."==e?D(t?rt:it):"variable"==e&&c?D(Mt,t?J:Y):O(t?G:K)}}function it(t,e){if("target"==e)return T.marked="keyword",D(Y)}function rt(t,e){if("target"==e)return T.marked="keyword",D(J)}function ot(t){return":"==t?D(z,j):O(Y,V(";"),z)}function st(t){if("variable"==t)return T.marked="property",D()}function lt(t,e){return"async"==t?(T.marked="property",D(lt)):"variable"==t||"keyword"==T.style?(T.marked="property","get"==e||"set"==e?D(at):(c&&T.state.fatArrowAt==T.stream.start&&(n=T.stream.match(/^\s*:\s*/,!1))&&(T.state.fatArrowAt=T.stream.pos+n[0].length),D(ht))):"number"==t||"string"==t?(T.marked=l?"property":T.style+" property",D(ht)):"jsonld-keyword"==t?D(ht):c&&P(e)?(T.marked="keyword",D(lt)):"["==t?D(K,dt,V("]"),ht):"spread"==t?D(G,ht):"*"==e?(T.marked="keyword",D(lt)):":"==t?O(ht):void 0;var n}function at(t){return"variable"!=t?O(ht):(T.marked="property",D(Ft))}function ht(t){return":"==t?D(G):"("==t?O(Ft):void 0}function ct(t,e,n){function i(r,o){if(n?n.indexOf(r)>-1:","==r){var s=T.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),D((function(n,i){return n==e||i==e?O():O(t)}),i)}return r==e||o==e?D():n&&n.indexOf(";")>-1?O(t):D(V(e))}return function(n,r){return n==e||r==e?D():O(t,i)}}function ut(t,e,n){for(var i=3;i<arguments.length;i++)T.cc.push(arguments[i]);return D(_(e,n),ct(t,e),z)}function ft(t){return"}"==t?D():O(j,ft)}function dt(t,e){if(c){if(":"==t)return D(vt);if("?"==e)return D(dt)}}function pt(t,e){if(c&&(":"==t||"in"==e))return D(vt)}function gt(t){if(c&&":"==t)return T.stream.match(/^\s*\w+\s+is\b/,!1)?D(K,mt,vt):D(vt)}function mt(t,e){if("is"==e)return T.marked="keyword",D()}function vt(t,e){return"keyof"==e||"typeof"==e||"infer"==e||"readonly"==e?(T.marked="keyword",D("typeof"==e?G:vt)):"variable"==t||"void"==e?(T.marked="type",D(Ct)):"|"==e||"&"==e?D(vt):"string"==t||"number"==t||"atom"==t?D(Ct):"["==t?D(_("]"),ct(vt,"]",","),z,Ct):"{"==t?D(_("}"),bt,z,Ct):"("==t?D(ct(kt,")"),yt,Ct):"<"==t?D(ct(vt,">"),vt):"quasi"==t?O(xt,Ct):void 0}function yt(t){if("=>"==t)return D(vt)}function bt(t){return t.match(/[\}\)\]]/)?D():","==t||";"==t?D(bt):O(wt,bt)}function wt(t,e){return"variable"==t||"keyword"==T.style?(T.marked="property",D(wt)):"?"==e||"number"==t||"string"==t?D(wt):":"==t?D(vt):"["==t?D(V("variable"),pt,V("]"),wt):"("==t?O(Ht,wt):t.match(/[;\}\)\],]/)?void 0:D()}function xt(t,e){return"quasi"!=t?O():"${"!=e.slice(e.length-2)?D(xt):D(vt,St)}function St(t){if("}"==t)return T.marked="string-2",T.state.tokenize=w,D(xt)}function kt(t,e){return"variable"==t&&T.stream.match(/^\s*[?:]/,!1)||"?"==e?D(kt):":"==t?D(vt):"spread"==t?D(kt):O(vt)}function Ct(t,e){return"<"==e?D(_(">"),ct(vt,">"),z,Ct):"|"==e||"."==t||"&"==e?D(vt):"["==t?D(vt,V("]"),Ct):"extends"==e||"implements"==e?(T.marked="keyword",D(vt)):"?"==e?D(vt,V(":"),vt):void 0}function Mt(t,e){if("<"==e)return D(_(">"),ct(vt,">"),z,Ct)}function At(){return O(vt,Tt)}function Tt(t,e){if("="==e)return D(vt)}function Ot(t,e){return"enum"==e?(T.marked="keyword",D(ee)):O(Dt,dt,Nt,Pt)}function Dt(t,e){return c&&P(e)?(T.marked="keyword",D(Dt)):"variable"==t?(E(e),D()):"spread"==t?D(Dt):"["==t?ut(Et,"]"):"{"==t?ut(Lt,"}"):void 0}function Lt(t,e){return"variable"!=t||T.stream.match(/^\s*:/,!1)?("variable"==t&&(T.marked="property"),"spread"==t?D(Dt):"}"==t?O():"["==t?D(K,V("]"),V(":"),Lt):D(V(":"),Dt,Nt)):(E(e),D(Nt))}function Et(){return O(Dt,Nt)}function Nt(t,e){if("="==e)return D(G)}function Pt(t){if(","==t)return D(Ot)}function It(t,e){if("keyword b"==t&&"else"==e)return D(_("form","else"),j,z)}function Rt(t,e){return"await"==e?D(Rt):"("==t?D(_(")"),Bt,z):void 0}function Bt(t){return"var"==t?D(Ot,Wt):"variable"==t?D(Wt):O(Wt)}function Wt(t,e){return")"==t?D():";"==t?D(Wt):"in"==e||"of"==e?(T.marked="keyword",D(K,Wt)):O(K,Wt)}function Ft(t,e){return"*"==e?(T.marked="keyword",D(Ft)):"variable"==t?(E(e),D(Ft)):"("==t?D(W,_(")"),ct(zt,")"),z,gt,j,H):c&&"<"==e?D(_(">"),ct(At,">"),z,Ft):void 0}function Ht(t,e){return"*"==e?(T.marked="keyword",D(Ht)):"variable"==t?(E(e),D(Ht)):"("==t?D(W,_(")"),ct(zt,")"),z,gt,H):c&&"<"==e?D(_(">"),ct(At,">"),z,Ht):void 0}function _t(t,e){return"keyword"==t||"variable"==t?(T.marked="type",D(_t)):"<"==e?D(_(">"),ct(At,">"),z):void 0}function zt(t,e){return"@"==e&&D(K,zt),"spread"==t?D(zt):c&&P(e)?(T.marked="keyword",D(zt)):c&&"this"==t?D(dt,Nt):O(Dt,dt,Nt)}function Vt(t,e){return"variable"==t?jt(t,e):Ut(t,e)}function jt(t,e){if("variable"==t)return E(e),D(Ut)}function Ut(t,e){return"<"==e?D(_(">"),ct(At,">"),z,Ut):"extends"==e||"implements"==e||c&&","==t?("implements"==e&&(T.marked="keyword"),D(c?vt:K,Ut)):"{"==t?D(_("}"),Kt,z):void 0}function Kt(t,e){return"async"==t||"variable"==t&&("static"==e||"get"==e||"set"==e||c&&P(e))&&T.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1)?(T.marked="keyword",D(Kt)):"variable"==t||"keyword"==T.style?(T.marked="property",D(Gt,Kt)):"number"==t||"string"==t?D(Gt,Kt):"["==t?D(K,dt,V("]"),Gt,Kt):"*"==e?(T.marked="keyword",D(Kt)):c&&"("==t?O(Ht,Kt):";"==t||","==t?D(Kt):"}"==t?D():"@"==e?D(K,Kt):void 0}function Gt(t,e){if("!"==e)return D(Gt);if("?"==e)return D(Gt);if(":"==t)return D(vt,Nt);if("="==e)return D(G);var n=T.state.lexical.prev,i=n&&"interface"==n.info;return O(i?Ht:Ft)}function qt(t,e){return"*"==e?(T.marked="keyword",D(Qt,V(";"))):"default"==e?(T.marked="keyword",D(K,V(";"))):"{"==t?D(ct($t,"}"),Qt,V(";")):O(j)}function $t(t,e){return"as"==e?(T.marked="keyword",D(V("variable"))):"variable"==t?O(G,$t):void 0}function Xt(t){return"string"==t?D():"("==t?O(K):"."==t?O(Y):O(Yt,Jt,Qt)}function Yt(t,e){return"{"==t?ut(Yt,"}"):("variable"==t&&E(e),"*"==e&&(T.marked="keyword"),D(Zt))}function Jt(t){if(","==t)return D(Yt,Jt)}function Zt(t,e){if("as"==e)return T.marked="keyword",D(Yt)}function Qt(t,e){if("from"==e)return T.marked="keyword",D(K)}function te(t){return"]"==t?D():O(ct(G,"]"))}function ee(){return O(_("form"),Dt,V("{"),_("}"),ct(ne,"}"),z,z)}function ne(){return O(Dt,Nt)}function ie(t,e){return"operator"==t.lastType||","==t.lastType||d.test(e.charAt(0))||/[,.]/.test(e.charAt(0))}function re(t,e,n){return e.tokenize==v&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(e.lastType)||"quasi"==e.lastType&&/\{\s*$/.test(t.string.slice(0,t.pos-(n||0)))}return W.lex=F.lex=!0,H.lex=!0,z.lex=!0,{startState:function(t){var e={tokenize:v,lastType:"sof",cc:[],lexical:new C((t||0)-o,0,"block",!1),localVars:n.localVars,context:n.localVars&&new I(null,null,!1),indented:t||0};return n.globalVars&&"object"==typeof n.globalVars&&(e.globalVars=n.globalVars),e},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation(),S(t,e)),e.tokenize!=b&&t.eatSpace())return null;var n=e.tokenize(t,e);return"comment"==i?n:(e.lastType="operator"!=i||"++"!=r&&"--"!=r?i:"incdec",A(e,n,i,r,t))},indent:function(e,i){if(e.tokenize==b||e.tokenize==w)return t.Pass;if(e.tokenize!=v)return 0;var r,l=i&&i.charAt(0),a=e.lexical;if(!/^\s*else\b/.test(i))for(var h=e.cc.length-1;h>=0;--h){var c=e.cc[h];if(c==z)a=a.prev;else if(c!=It&&c!=H)break}while(("stat"==a.type||"form"==a.type)&&("}"==l||(r=e.cc[e.cc.length-1])&&(r==Y||r==J)&&!/^[,\.=+\-*:?[\(]/.test(i)))a=a.prev;s&&")"==a.type&&"stat"==a.prev.type&&(a=a.prev);var u=a.type,f=l==u;return"vardef"==u?a.indented+("operator"==e.lastType||","==e.lastType?a.info.length+1:0):"form"==u&&"{"==l?a.indented:"form"==u?a.indented+o:"stat"==u?a.indented+(ie(e,i)?s||o:0):"switch"!=a.info||f||0==n.doubleIndentSwitch?a.align?a.column+(f?0:1):a.indented+(f?0:o):a.indented+(/^(?:case|default)\b/.test(i)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:a?null:"/*",blockCommentEnd:a?null:"*/",blockCommentContinue:a?null:" * ",lineComment:a?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:a?"json":"javascript",jsonldMode:l,jsonMode:a,expressionAllowed:re,skipExpression:function(e){A(e,"atom","atom","true",new t.StringStream("",2,null))}}})),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})}))}}]);